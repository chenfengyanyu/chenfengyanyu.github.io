<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Jartto&#39;s blog</title>
  <icon>https://www.gravatar.com/avatar/ee1200dca3e1b26043739f4bd08bfc12</icon>
  <subtitle>Jartto ä¸ªäººåšå®¢</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://jartto.wang/"/>
  <updated>2025-08-31T12:37:30.732Z</updated>
  <id>http://jartto.wang/</id>
  
  <author>
    <name>Jartto</name>
    <email>jartto@qq.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ç”¨ Tauri+Rust+Yew æ¥æ„å»ºä½ çš„è·¨ç«¯æ¡Œé¢åº”ç”¨</title>
    <link href="http://jartto.wang/2023/05/16/tauri-rust-demo/"/>
    <id>http://jartto.wang/2023/05/16/tauri-rust-demo/</id>
    <published>2023-05-15T22:38:02.000Z</published>
    <updated>2025-08-31T12:37:30.732Z</updated>
    
    <content type="html"><![CDATA[<p><code>Tauri</code> å¯ä»¥å¼€å‘è·¨å¹³å°æ¡Œé¢åº”ç”¨ã€‚èµ·å…ˆäº†è§£ <code>Tauri</code> çš„æ—¶å€™ï¼Œå°±è¢«å®ƒã€Œæ€§èƒ½+åŒ…ä½“ç§¯ã€çš„ä¼˜åŠ¿æ‰€å¸å¼•ã€‚æ­£å¥½ä¹‹å‰æœ‰ <code>Electron</code> å¼€å‘ç»éªŒï¼Œé‚£ä¸å¦¨æ¥å°è¯•ä¸€ä¸‹ï¼<br><a id="more"></a></p><h4 id="ä¸€ã€Tauri-æ˜¯ä»€ä¹ˆ"><a href="#ä¸€ã€Tauri-æ˜¯ä»€ä¹ˆ" class="headerlink" title="ä¸€ã€Tauri æ˜¯ä»€ä¹ˆ"></a>ä¸€ã€<code>Tauri</code> æ˜¯ä»€ä¹ˆ</h4><p><code>Tauri</code> æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œå¯ä»¥ç”¨äºæ„å»ºè½»é‡çº§ã€å®‰å…¨çš„æ¡Œé¢åº”ç”¨ç¨‹åºã€‚å®ƒä¸ç°ä»£å‰ç«¯æ¡†æ¶ï¼ˆå¦‚ <code>Vue.js</code>ã€<code>React.js</code> æˆ–è€… <code>Svelte</code>ï¼‰ä¸€èµ·ä½¿ç”¨ï¼Œä½¿å¼€å‘è€…å¯ä»¥ç”¨è‡ªå·±ç†Ÿæ‚‰çš„ <code>Web</code> æŠ€æœ¯åˆ›å»ºæ¡Œé¢åº”ç”¨ã€‚</p><p><code>Tauri</code> çš„ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š</p><ul><li>è½»é‡çº§ï¼š<code>Tauri</code> åº”ç”¨ç¨‹åºæ¯”ä½¿ç”¨ <code>Electron</code> æ„å»ºçš„åº”ç”¨ç¨‹åºæ›´å°ï¼Œæ›´å¿«ã€‚è¿™æ˜¯å› ä¸º <code>Tauri</code> ä½¿ç”¨ <code>Rust</code> æ„å»ºï¼Œ<code>Rust</code> æ˜¯ä¸€ç§æ€§èƒ½ä¼˜è¶Šä¸”å†…å­˜å®‰å…¨çš„ç¼–ç¨‹è¯­è¨€ã€‚</li><li>å®‰å…¨æ€§ï¼š<code>Tauri</code> çš„è®¾è®¡è€ƒè™‘äº†å®‰å…¨æ€§ã€‚å®ƒæœ‰ä¸€ä¸ªå†…ç½®çš„å®‰å…¨å±‚ï¼Œå¯ä»¥é˜²æ­¢ä¸€äº›å¸¸è§çš„æ”»å‡»ã€‚</li><li>è·¨å¹³å°ï¼š<code>Tauri</code> æ”¯æŒåœ¨ <code>Windows</code>ã€<code>Mac</code> å’Œ <code>Linux</code> ä¸Šæ„å»ºåº”ç”¨ç¨‹åºã€‚</li></ul><div class="alert info"><p>æ€»çš„æ¥è¯´ï¼Œ<code>Tauri</code> æä¾›äº†ä¸€ç§é«˜æ•ˆã€å®‰å…¨çš„æ–¹å¼æ¥ä½¿ç”¨ <code>Web</code> æŠ€æœ¯æ„å»ºæ¡Œé¢åº”ç”¨ç¨‹åºã€‚</p></div><h1 id="å‰ç½®å®‰è£…"><a href="#å‰ç½®å®‰è£…" class="headerlink" title="å‰ç½®å®‰è£…"></a>å‰ç½®å®‰è£…</h1><p><a href="https://tauri.app/zh-cn/v1/guides/getting-started/prerequisites" target="_blank" rel="noopener">è¯´æ˜æ–‡æ¡£</a></p><h1 id="Rust-Tauri-Yew"><a href="#Rust-Tauri-Yew" class="headerlink" title="Rust + Tauri + Yew"></a>Rust + Tauri + Yew</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cargo install create-tauri-app</span><br><span class="line"><span class="comment"># åˆå§‹åŒ–é¡¹ç›®</span></span><br><span class="line">cargo create-tauri-app</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£…<code>Tauri CLI</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cargo install tauri-cli</span><br></pre></td></tr></table></figure></p><h1 id="è¿è¡Œé¡¹ç›®"><a href="#è¿è¡Œé¡¹ç›®" class="headerlink" title="è¿è¡Œé¡¹ç›®"></a>è¿è¡Œé¡¹ç›®</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cargo tauri dev</span><br></pre></td></tr></table></figure><p>æ—¥å¿—ä¿¡æ¯å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Running BeforeDevCommand (`trunk serve`)</span><br><span class="line">2023-03-19T12:51:19.075591Z  INFO ğŸ“¦ starting build</span><br><span class="line">2023-03-19T12:51:19.075822Z  INFO spawning asset pipelines</span><br><span class="line">2023-03-19T12:51:19.486709Z  INFO building rust-tauri-app-ui</span><br><span class="line">2023-03-19T12:51:19.486759Z  INFO copying directory path=&quot;public&quot;</span><br><span class="line">2023-03-19T12:51:19.486782Z  INFO copying &amp; hashing css path=&quot;styles.css&quot;</span><br><span class="line">2023-03-19T12:51:19.487151Z  INFO finished copying &amp; hashing css path=&quot;styles.css&quot;</span><br><span class="line">2023-03-19T12:51:19.487281Z  INFO finished copying directory path=&quot;public&quot;</span><br><span class="line">    Finished dev [unoptimized + debuginfo] target(s) in 0.17s</span><br><span class="line">2023-03-19T12:51:19.701213Z  INFO fetching cargo artifacts</span><br><span class="line">2023-03-19T12:51:19.940618Z  INFO processing WASM for rust-tauri-app-ui</span><br><span class="line">2023-03-19T12:51:19.961661Z  INFO calling wasm-bindgen for rust-tauri-app-ui</span><br><span class="line">2023-03-19T12:51:20.120952Z  INFO copying generated wasm-bindgen artifacts</span><br><span class="line">2023-03-19T12:51:20.122868Z  INFO applying new distribution</span><br><span class="line">2023-03-19T12:51:20.123718Z  INFO âœ… success</span><br><span class="line">2023-03-19T12:51:20.124694Z  INFO ğŸ“¡ serving static assets at -&gt; /</span><br><span class="line">2023-03-19T12:51:20.124755Z  INFO ğŸ“¡ server listening at http://127.0.0.1:1420</span><br><span class="line">        Info Watching /Users/jartto/Documents/Project/rust-tauri-app/src-tauri for changes...</span><br><span class="line">   Compiling rust-tauri-app v0.0.0 (/Users/jartto/Documents/Project/rust-tauri-app/src-tauri)</span><br><span class="line">    Finished dev [unoptimized + debuginfo] target(s) in 2.29s</span><br></pre></td></tr></table></figure></p><h1 id="æ•ˆæœé¢„è§ˆ"><a href="#æ•ˆæœé¢„è§ˆ" class="headerlink" title="æ•ˆæœé¢„è§ˆ"></a>æ•ˆæœé¢„è§ˆ</h1><p>å¦‚æœçœ‹åˆ°å¦‚ä¸‹çª—å£ï¼Œæ„å‘³ç€åº”ç”¨å·²ç»æ­£å¸¸å¯åŠ¨äº†ã€‚<br><img src="https://raw.githubusercontent.com/chenfengyanyu/rust-tauri-demo/master/src-tauri/img/demo.png" alt="æ•ˆæœé¢„è§ˆ"></p><h1 id="ä»£ç è¯´æ˜"><a href="#ä»£ç è¯´æ˜" class="headerlink" title="ä»£ç è¯´æ˜"></a>ä»£ç è¯´æ˜</h1><p>Tauri ä¸ºæ‚¨çš„å‰ç«¯å¼€å‘æä¾›äº†å…¶ä»–ç³»ç»ŸåŸç”ŸåŠŸèƒ½ã€‚ æˆ‘ä»¬å°†å…¶ç§°ä½œæŒ‡ä»¤ï¼Œè¿™ä½¿å¾—æ‚¨å¯ä»¥ä» JavaScript å‰ç«¯è°ƒç”¨ç”± Rust ç¼–å†™çš„å‡½æ•°ã€‚ ç”±æ­¤ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ€§èƒ½é£å¿«çš„ Rust ä»£ç å¤„ç†ç¹é‡çš„ä»»åŠ¡æˆ–ç³»ç»Ÿè°ƒç”¨ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•ç¤ºä¾‹ï¼š<br><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src-tauri/src/main.rs</span></span><br><span class="line"><span class="meta">#[tauri::command]</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">greet</span></span>(name: &amp;<span class="built_in">str</span>) -&gt; <span class="built_in">String</span> &#123;</span><br><span class="line">   <span class="built_in">format!</span>(<span class="string">"Hello, &#123;&#125;!"</span>, name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¸€ä¸ªæŒ‡ä»¤ç­‰äºä¸€ä¸ªæ™®é€šçš„ Rust å‡½æ•°ï¼Œåªæ˜¯è¿˜åŠ ä¸Šäº† #[tauri::command] å®æ¥è®©å…¶ä¸æ‚¨çš„ JavaScript ç¯å¢ƒäº¤äº’ã€‚<br>æœ€åï¼Œæˆ‘ä»¬éœ€è¦è®© Tauri çŸ¥æ‚‰æ‚¨åˆšåˆ›å»ºçš„æŒ‡ä»¤æ‰èƒ½è®©å…¶è°ƒç”¨ã€‚ æˆ‘ä»¬éœ€è¦ä½¿ç”¨ .invoke_handler() å‡½æ•°åŠ Generate_handler![] å®æ¥æ³¨å†ŒæŒ‡ä»¤ï¼š<br><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src-tauri/src/main.rs</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">  tauri::Builder::<span class="keyword">default</span>()</span><br><span class="line">    .invoke_handler(tauri::generate_handler![greet])</span><br><span class="line">    .run(tauri::generate_context!())</span><br><span class="line">    .expect(<span class="string">"error while running tauri application"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç°åœ¨å‰ç«¯å¯ä»¥è°ƒç”¨åˆšæ³¨å†Œçš„æŒ‡ä»¤äº†ï¼<br>æˆ‘ä»¬é€šå¸¸ä¼šæ¨èä½¿ç”¨ @tauri-apps/api åŒ…ï¼Œä½†ç”±äºæœ¬æŒ‡å—è‡³æ­¤è¿˜æ²¡æœ‰ä½¿ç”¨æ‰“åŒ…å·¥å…·ï¼Œæ‰€ä»¥éœ€è¦åœ¨ tauri.conf.json æ–‡ä»¶ä¸­å¯ç”¨ withGlobalTauri é€‰é¡¹ã€‚<br><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"build"</span>: &#123;</span><br><span class="line">    <span class="string">"beforeBuildCommand"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="string">"beforeDevCommand"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="string">"devPath"</span>: <span class="string">"../ui"</span>,</span><br><span class="line">    <span class="string">"distDir"</span>: <span class="string">"../ui"</span>,</span><br><span class="line">    <span class="string">"withGlobalTauri"</span>: <span class="literal">true</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><p>æ­¤é€‰é¡¹ä¼šå°†å·²æ‰“åŒ…ç‰ˆæœ¬çš„ API å‡½æ•°æ³¨å…¥åˆ°å‰ç«¯ä¸­ã€‚æ¥ä¸‹æ¥ï¼Œå¯ä»¥ä¿®æ”¹ index.html æ–‡ä»¶æ¥è°ƒç”¨æŒ‡ä»¤ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span>=<span class="string">"header"</span>&gt;</span>Welcome from Tauri!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">      // access the pre-bundled global API functions</span></span><br><span class="line"><span class="undefined">      const &#123; invoke &#125; = window.__TAURI__.tauri</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">      // now we can call our Command!</span></span><br><span class="line"><span class="undefined">      // You will see "Welcome from Tauri" replaced</span></span><br><span class="line"><span class="undefined">      // by "Hello, World!"!</span></span><br><span class="line"><span class="undefined">      invoke('greet', &#123; name: 'World' &#125;)</span></span><br><span class="line"><span class="undefined">        // `invoke` returns a Promise</span></span><br><span class="line"><span class="undefined">        .then((response) =&gt; &#123;</span></span><br><span class="line"><span class="undefined">          window.header.innerHTML = response</span></span><br><span class="line"><span class="undefined">        &#125;)</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h1 id="åº”ç”¨è°ƒè¯•"><a href="#åº”ç”¨è°ƒè¯•" class="headerlink" title="åº”ç”¨è°ƒè¯•"></a>åº”ç”¨è°ƒè¯•</h1><p><a href="https://tauri.app/zh-cn/v1/guides/debugging/application" target="_blank" rel="noopener">åº”ç”¨ç¨‹åºè°ƒè¯•</a></p><h1 id="æ‰“åŒ…åº”ç”¨"><a href="#æ‰“åŒ…åº”ç”¨" class="headerlink" title="æ‰“åŒ…åº”ç”¨"></a>æ‰“åŒ…åº”ç”¨</h1><p>æ‰§è¡Œå‘½ä»¤<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cargo tauri build</span><br></pre></td></tr></table></figure></p><p>ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">You must change the bundle identifier in `tauri.conf.json &gt; tauri &gt; bundle &gt; identifier`. The default value `com.tauri.dev` is not allowed as it must be unique across applications.</span><br><span class="line">æ‚¨å¿…é¡»åœ¨ `tauri.conf.json &gt; tauri &gt; bundle &gt; identifier` ä¸­æ›´æ”¹åŒ…æ ‡è¯†ç¬¦ã€‚ é»˜è®¤å€¼ com.tauri.dev æ˜¯ä¸å…è®¸çš„ï¼Œå› ä¸ºå®ƒåœ¨åº”ç”¨ç¨‹åºä¸­å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚</span><br></pre></td></tr></table></figure></p><p>æŒ‰ç…§æç¤ºä¿®æ”¹æ ‡è¯†ç¬¦ï¼šcom.tauri.dev â€”â€”&gt; com.tauri.jarttoï¼Œé‡æ–°è¿è¡Œæ‰“åŒ…å‘½ä»¤ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cargo tauri build</span><br></pre></td></tr></table></figure></p><p>æ­¤æ—¶ï¼Œç¨‹åºå·²ç»å¼€å§‹ç¼–è¯‘ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Compiling serialize-to-javascript v0.1.1</span><br><span class="line">   Compiling rust-tauri-app v0.0.0 (/Users/jartto/Documents/Project/rust-tauri-app/src-tauri)</span><br><span class="line">   Compiling ignore v0.4.18</span><br><span class="line">   Compiling tauri-macros v1.2.1</span><br><span class="line">   Compiling serde_repr v0.1.12</span><br><span class="line">   Compiling encoding_rs v0.8.32</span><br><span class="line">   Compiling state v0.5.3</span><br><span class="line">   Compiling embed_plist v1.2.2</span><br><span class="line">    Building [=======================&gt; ] 376/377: rust-tauri-app(bin)</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬é‡ç‚¹å…³æ³¨æœ€åä¸¤è¡Œï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Finished 2 bundles at:</span><br><span class="line">/Users/jartto/Documents/Project/rust-tauri-app/target/release/bundle/macos/rust-tauri-app.app</span><br><span class="line">/Users/jartto/Documents/Project/rust-tauri-app/target/release/bundle/dmg/rust-tauri-app_0.0.0_aarch64.dmg</span><br></pre></td></tr></table></figure></p><p>é¡ºç€ç›®å½•å¯ä»¥æ‰¾åˆ°æœ€ç»ˆæ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶åœ°å€ï¼Œå¦‚ä¸‹ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/rust-tauri-demo/master/src-tauri/img/dmginfo.png" alt="æ„å»ºåŒ…åœ°å€"></p><p>æŸ¥çœ‹ APP æ–‡ä»¶å¤§å°ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/rust-tauri-demo/master/src-tauri/img/size.png" alt="æ–‡ä»¶å¤§å°"></p><p>é€‰æ‹© rust-tauri-app_0.0.0_aarch64.dmg å¹¶åŒå‡»å®‰è£…ï¼Œå¦‚ä¸‹ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/rust-tauri-demo/master/src-tauri/img/setup.png" alt="å®‰è£… APP"></p><p>è¿è¡Œæ•ˆæœå°±ä¸ç”¨è¯´äº†ï¼Œå’Œä¸Šæ–‡æ•ˆæœé¢„è§ˆä¸€è‡´ã€‚è‡³æ­¤ï¼Œèµ·æ‰‹é¡¹ç›®å¤§åŠŸå‘Šæˆï¼</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;code&gt;Tauri&lt;/code&gt; å¯ä»¥å¼€å‘è·¨å¹³å°æ¡Œé¢åº”ç”¨ã€‚èµ·å…ˆäº†è§£ &lt;code&gt;Tauri&lt;/code&gt; çš„æ—¶å€™ï¼Œå°±è¢«å®ƒã€Œæ€§èƒ½+åŒ…ä½“ç§¯ã€çš„ä¼˜åŠ¿æ‰€å¸å¼•ã€‚æ­£å¥½ä¹‹å‰æœ‰ &lt;code&gt;Electron&lt;/code&gt; å¼€å‘ç»éªŒï¼Œé‚£ä¸å¦¨æ¥å°è¯•ä¸€ä¸‹ï¼&lt;br&gt;
    
    </summary>
    
    
      <category term="æŠ€æœ¯åšæ–‡" scheme="http://jartto.wang/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E6%96%87/"/>
    
    
      <category term="tauri" scheme="http://jartto.wang/tags/tauri/"/>
    
      <category term="rust" scheme="http://jartto.wang/tags/rust/"/>
    
  </entry>
  
  <entry>
    <title>Docker æ–°ä¹¦ä¸Šå¸‚ä¸€å‘¨å¹´</title>
    <link href="http://jartto.wang/2023/03/19/docker-new-book-online/"/>
    <id>http://jartto.wang/2023/03/19/docker-new-book-online/</id>
    <published>2023-03-19T04:12:59.000Z</published>
    <updated>2023-03-20T22:58:11.572Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘çš„æ–°ä¹¦<a href="https://mp.weixin.qq.com/s/DKEyfeRiNjfrQSzGxvLUHw" target="_blank" rel="noopener">ã€Š<code>Docker</code> å®æˆ˜æ´¾ï¼šå®¹å™¨å…¥é—¨ä¸ƒæ­¥æ³•ã€‹</a>ä¸Šå¸‚å·²ç»ä¸€å‘¨å¹´äº†ï¼Œåœ¨è¿™ä¸ªé‡Œç¨‹ç¢‘çš„æ—¶åˆ»ï¼Œæ„Ÿè°¢å„ä½æœ‹å‹çš„æ”¯æŒã€‚å¸Œæœ›ä»Šå¹´èƒ½å¤ŸæŒç»­ã€Œå¤§éº¦ã€ï¼Œæ‹¿ä¸‹åŒç±»ä¹¦ç± <code>Top1</code>!<br><a id="more"></a></p><p><video src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/book/video.mp4" controls="controls" width="100%" height>æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒæ’­æ”¾è¯¥è§†é¢‘ï¼</video><br><div class="alert info"><p>æœ¬ä¹¦å·²å…¥é€‰ã€è‡ªå­¦å…¥é—¨çš„ç¼–ç¨‹ä¹¦ TOP æ¦œã€ï¼Œ<a href="https://item.jd.com/13699932.html#none" target="_blank" rel="noopener">äº¬ä¸œ</a>ã€<a href="http://product.dangdang.com/29388559.html" target="_blank" rel="noopener">å½“å½“</a>ï¼Œçƒ­å–ä¸­ï¼</p></div></p><h4 id="ä¸€ã€å†…å®¹å›é¡¾"><a href="#ä¸€ã€å†…å®¹å›é¡¾" class="headerlink" title="ä¸€ã€å†…å®¹å›é¡¾"></a>ä¸€ã€å†…å®¹å›é¡¾</h4><p>å¸‚åœºä¸Šä¸ä¹<code>Docker</code>æŠ€æœ¯ç›¸å…³çš„ä¹¦ç±ï¼Œæˆ–å›´ç»•å®˜æ–¹åŸºç¡€æ–‡æ¡£ç¼ºä¹æ–°æ„ï¼Œæˆ–ç›´å…¥æºç è®©æ–°äººæœ›è€Œå´æ­¥ã€‚é²œæœ‰æ—¢æ»¡è¶³è¯»è€…å…¥é—¨éœ€è¦ï¼Œåˆç»“åˆä¼ä¸šå®é™…æ¡ˆä¾‹çš„ä½³ä½œã€‚<br>ã€Š<code>Docker</code>å®æˆ˜æ´¾ï¼šå®¹å™¨å…¥é—¨ä¸ƒæ­¥æ³•ã€‹æ­£æ˜¯çœ‹åˆ°äº†è¿™ä¸€ç‚¹ï¼Œå¦è¾Ÿè¹Šå¾„ï¼Œä»è¯»è€…è§’åº¦å‡ºå‘ï¼Œé¦–æ¬¡æå‡ºäº†ã€Œä¸ƒæ­¥æ³•ã€çš„æ¦‚å¿µã€‚</p><div class="alert success"><p>ä½•è°“ã€Œä¸ƒæ­¥æ³•ã€ï¼Ÿä¸ƒæ˜¯äººä»¬æœ€å®¹æ˜“è®°ä½çš„æ•°å­—ï¼Œä¹Ÿæ˜¯äººç±»ç¬é—´è®°å¿†çš„æé™ï¼Œæœ¬ä¹¦æ­£æ˜¯ç«‹æ„äºæ­¤ã€‚</p></div><p>ç¬¬ä¸€æ­¥ï¼Œä»å…·è±¡çš„æ•…äº‹å¼€å§‹ï¼Œå¼€é—¨è§å±±ã€é™ä½è®¤çŸ¥é—¨æ§›ã€‚<br>ç¬¬äºŒæ­¥ï¼Œé€šè¿‡ã€Œç¬¬ä¸€ä¸ª<code>Docker</code>é¡¹ç›®ã€ï¼Œå¸®åŠ©è¯»è€…å¿«é€Ÿä¸Šæ‰‹ã€‚åœ¨è¯»è€…å»ºç«‹èµ·ä½“ç³»æ¦‚å¿µåï¼›<br>ç¬¬ä¸‰æ­¥ï¼Œç›´åˆ‡æ ¸å¿ƒåŸç†ï¼Œå›´ç»•<code>Docker</code>æ¶æ„å±•å¼€ï¼Œç”±æµ…å…¥æ·±çš„è®²è§£äº†<code>Docker</code>åº•å±‚éš”ç¦»æœºåˆ¶ã€å®¹å™¨ç”Ÿå‘½å‘¨æœŸã€ç½‘ç»œä¸é€šè®¯ã€å­˜å‚¨åŸç†ä»¥åŠæºç ã€‚æ·±å…¥å‰–æï¼ŒçŸ¥å…¶ç„¶è€ŒçŸ¥å…¶æ‰€ä»¥ç„¶ã€‚<br>ç¬¬å››æ­¥ï¼Œè¶çƒ­æ‰“é“ï¼Œå›´ç»•å‰åç«¯é¡¹ç›®ï¼Œä»å…¨æ ˆè§’åº¦è¿›è¡Œé¡¹ç›®å®æˆ˜ã€‚<br>ç¬¬äº”æ­¥ï¼Œä»<code>Docker</code>å®¹å™¨è¿ç»´è§’åº¦å‡ºå‘ï¼Œè¿›ä¸€æ­¥è¡¥å……è¯»è€…çŸ¥è¯†å›¾è°±ï¼Œè¿™ä¹Ÿæ˜¯åˆå­¦è€…æœ€å®¹æ˜“å¿½è§†çš„å†…å®¹ã€‚<br>ç¬¬å…­æ­¥ï¼Œæ­¥å…¥é«˜çº§æ•™ç¨‹ï¼Œè¯¥éƒ¨åˆ†é‡ç‚¹å›´ç»•<code>Docker</code>æŠ€æœ¯æœ€ä½³å®è·µå±•å¼€ï¼Œæä¾›äº†å®¹å™¨ä¸è¿›ç¨‹ã€æ–‡ä»¶å­˜å‚¨ä¸å¤‡ä»½ã€ç½‘ç»œé…ç½®ã€é•œåƒä¼˜åŒ–ä»¥åŠå®‰å…¨ç­–ç•¥ç­‰å†…å®¹ï¼Œç¤ºä¾‹ä¸°å¯Œï¼Œæ“ä½œæ€§åè¶³ã€‚<br>ç¬¬ä¸ƒæ­¥ï¼Œå…¨ä¹¦å†…å®¹å‡åã€‚é€šè¿‡äº‘åŸç”ŸæŒç»­äº¤ä»˜æ¨¡å‹ã€ä¼ä¸šå®¹å™¨æ ‡å‡†åŒ–åŠä¸¤ä¸ªå®é™…çš„ä¼ä¸šçº§æ–¹æ¡ˆï¼Œå°†æœ¬ä¹¦æ‰€æœ‰å†…å®¹è¿›è¡Œä¸²è”ã€‚</p><p>è‡³æ­¤ï¼Œä¸ƒæ­¥å®Œæˆã€‚è¯»è€…å¯ä»¥æ¸…æ™°çš„æ„Ÿå—æ¯ä¸€æ­¥å¸¦æ¥çš„æŠ€æœ¯æå‡ï¼Œç¨³æ‰ç¨³æ‰“ï¼Œä»è€Œå®Œå…¨å°†<code>Docker</code>æŠ€æœ¯èä¼šè´¯é€šã€‚</p><h4 id="äºŒã€æœ¬ä¹¦äº®ç‚¹"><a href="#äºŒã€æœ¬ä¹¦äº®ç‚¹" class="headerlink" title="äºŒã€æœ¬ä¹¦äº®ç‚¹"></a>äºŒã€æœ¬ä¹¦äº®ç‚¹</h4><p>ã€Š<code>Docker</code> å®æˆ˜æ´¾ï¼šå®¹å™¨å…¥é—¨ä¸ƒæ­¥æ³•ã€‹æœ€å¤§çš„äº®ç‚¹å°±æ˜¯ï¼šè¶£å‘³æ˜“æ‡‚ï¼Œæ¡ˆä¾‹ä¸°å¯Œï¼Œå®æ“æ€§å¼ºã€‚<br>ï¼ˆ1ï¼‰<strong>è¶£å‘³æ˜“æ‡‚</strong><br>ä¹¦ä¸­è¾ƒå¤šçš„åŸç†ï¼Œå‰¥é™¤äº†<code>Docker</code>å®˜æ–¹æ–‡æ¡£æ™¦æ¶©éš¾æ‡‚çš„å¤–è¡£ï¼Œé€šè¿‡è¶£å‘³çš„æ•…äº‹å±•å¼€ã€‚å¦‚ï¼šé€šè¿‡ã€Œç›–æˆ¿å­ã€çš„æ¯”æ–¹æ¥ç†è§£<code>Docker</code>æ˜¯ä»€ä¹ˆï¼Œé€šè¿‡ã€Œåˆ«å¢…ä¸èƒ¶å›Šæ—…é¦†ã€çš„ä¾‹å­æ¥é˜è¿°å®¹å™¨ä¸è™šæ‹Ÿæœºçš„æ¦‚å¿µï¼Œé€šè¿‡ã€Œå·¥å‚å’Œè½¦é—´ã€æ¥è¯´æ˜è¿›ç¨‹å’Œçº¿ç¨‹ç­‰ã€‚è¯»è€…æ— éœ€è®°å¿†ï¼Œå°±å¯è½»æ¾ç†è§£ï¼Œè¿™ä¹Ÿæ­£æ˜¯æœ¬ä¹¦æƒ³è¦ä¼ è¾¾çš„è§‚ç‚¹â€”â€”æŠ€æœ¯å¹¶éæ™¦æ¶©éš¾æ‡‚ï¼Œè€Œæ˜¯ç¼ºä¹æŠ€å·§ã€‚<br>ï¼ˆ2ï¼‰<strong>æ¡ˆä¾‹ä¸°å¯Œ</strong><br>æœ¬ä¹¦ç¬¬äºŒã€å››ã€äº”ã€å…­ã€ä¸ƒç« éƒ½åŒ…å«å¤§é‡çš„ç¤ºä¾‹ã€‚ä¸ç®¡æ˜¯â€œç¬¬ä¸€ä¸ª<code>Docker</code>é¡¹ç›®â€è¿˜æ˜¯é¡¹ç›®å®æˆ˜ã€æˆ–è€…æ˜¯ã€Œä¼ä¸šæ¡ˆä¾‹ã€éƒ½åŒ…å«äº†å¤§é‡çš„ä»£ç è®²è§£ã€‚è¯»è€…å®Œå…¨å¯ä»¥æŒ‰ç…§æ•™ç¨‹é€æ­¥å®ç°ï¼Œä½“éªŒ<code>Docker</code>ç¼–ç¨‹çš„ä¹è¶£ã€‚<br>ï¼ˆ3ï¼‰<strong>å®æ“æ€§å¼º</strong><br>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œæœ¬ä¹¦ä¸­æ¡ˆä¾‹å‡æ¥è‡ªäºå®é™…çš„ç ”å‘è¿‡ç¨‹ï¼Œä¸ºäº†è®©è¯»è€…èƒ½å¤Ÿè½»æ¾æŒæ¡ï¼Œå»é™¤äº†å®¹å™¨ä¸­åŒ…å«çš„ä¸šåŠ¡é€»è¾‘ï¼Œä¿ç•™äº†<code>Docker</code>å®¹å™¨æœ€æ ¸å¿ƒçš„æ¶æ„ï¼Œå®æ“æ€§å¼ºã€‚ç†Ÿç»ƒæŒæ¡ä¹¦ä¸­çš„ç²¾å½©æ¡ˆä¾‹ï¼Œæ²‰æ·€å…¶æ‰€è¡¨ç°å‡ºæ¥çš„æ–¹æ³•è®ºï¼Œç›¸ä¿¡è¯»è€…ä¸€å®šèƒ½å¤Ÿåœ¨ä¼ä¸šåº”ç”¨ä¸­çµæ´»è¿ç”¨ï¼Œäº‹åŠåŠŸå€ã€‚</p><h4 id="ä¸‰ã€ç²¾å½©ä¹¦è¯„"><a href="#ä¸‰ã€ç²¾å½©ä¹¦è¯„" class="headerlink" title="ä¸‰ã€ç²¾å½©ä¹¦è¯„"></a>ä¸‰ã€ç²¾å½©ä¹¦è¯„</h4><p><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/book/info.png" alt="æ–°ä¹¦æ¨è"></p><p>ã€Œæ¯‹åº¸è®³è¨€ï¼Œç°å¦‚ä»Šè¿˜ä¸äº†è§£<code>Docker</code>å°±ä¸æ˜¯ä¸€ä¸ªåˆæ ¼çš„å¼€å‘è€…ã€‚<code>Docker</code>å¯¹<code>DevOps</code>çš„é£é€Ÿå‘å±•å…·æœ‰é‡è¦ä½œç”¨ã€‚æœ¬ä¹¦ç»“åˆä½œè€…å¤šå¹´ä¸€çº¿â€œå¤§å‚â€æŠ€æœ¯å®è·µçš„ç»éªŒï¼Œæ—¢æœ‰å‰ç«¯å¼€å‘è€…çš„è§†è§’ï¼Œåˆæœ‰ä¸Šä¸‹æ¸¸çš„ç›¸å…³æ¡ˆä¾‹ï¼Œä¸ºè¯»è€…æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„<code>DevOps</code>â€œåœ°å›¾â€ï¼Œå¯ä»¥ä½œä¸ºä¸€çº¿å¼€å‘äººå‘˜çš„æ¡ˆå¤´ç”¨ä¹¦ã€‚ã€â€”â€”<strong>é«˜é€”é›†å›¢å¤§å‰ç«¯æŠ€æœ¯é€šé“è´Ÿè´£äºº é»„åé”¦</strong></p><p>ã€Œ<code>Docker</code>ä½œä¸ºä¸€ç§å¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“æ­£åœ¨è¢«å¹¿æ³›ä½¿ç”¨ã€‚æœ¬ä¹¦ç”±æµ…å…¥æ·±åœ°ä»‹ç»äº†ç›¸å…³çš„çŸ¥è¯†ç‚¹ï¼Œå°†å¾ˆå¤šä¸å®¹æ˜“ç†è§£çš„æ¦‚å¿µç”¨ç”Ÿæ´»ä¸­çš„ä¾‹å­ç”ŸåŠ¨ã€å½¢è±¡åœ°è¡¨è¾¾äº†å‡ºæ¥ï¼Œå¯¹äºå„ä¸ªé˜¶æ®µçš„å­¦ä¹ è€…æ¥è¯´éƒ½éå¸¸å‹å¥½ã€‚åŒæ—¶ï¼Œæœ¬ä¹¦ä»ç ”å‘å²—ä½çš„ä¸åŒè§†è§’ï¼Œä»‹ç»äº†<code>Docker</code>çš„å®è·µæ–¹æ¡ˆï¼Œå¯¹ç›¸å…³å¼€å‘è€…çš„æ—¥å¸¸å·¥ä½œå…·æœ‰ä¸€å®šçš„æŒ‡å¯¼ä½œç”¨ã€‚ã€â€”â€”<strong>å­—èŠ‚è·³åŠ¨å•†ä¸šæŠ€æœ¯è¥é”€å·¥ç¨‹å›¢é˜Ÿè´Ÿè´£äºº èµµé¾™</strong></p><p>ã€Œäº‘è®¡ç®—æŠ€æœ¯çš„æ™®åŠï¼Œä½¿ä¼ä¸šå’Œç»„ç»‡æ›´èšç„¦äºè‡ªèº«çš„æ ¸å¿ƒä¸šåŠ¡ã€‚è€Œäº‘åŸç”Ÿå¦‚åŒâ€œé›†è£…ç®±æ”¹å˜ä¸–ç•Œâ€ä¸€æ ·ï¼Œé€šè¿‡æ ‡å‡†åŒ–çš„æ–¹å¼æ¥åº”å¯¹ä¸šåŠ¡åœ¨æ‰“åŒ…ã€éƒ¨ç½²å’Œç®¡ç†ç­‰è¿‡ç¨‹ä¸­é‡åˆ°çš„å„ç§æŒ‘æˆ˜ï¼Œä»è€Œå¸®åŠ©ä¼ä¸šè¾¾åˆ°é™æœ¬å¢æ•ˆçš„ç›®çš„ã€‚å®¹å™¨æŠ€æœ¯å¯ä»¥è¯´æ˜¯äº‘åŸç”ŸæŠ€æœ¯ä½“ç³»ç»“æ„çš„åŸºç¡€ã€‚è€Œ<code>Docker</code>åˆ™æ˜¯å®¹å™¨æŠ€æœ¯è½åœ°çš„â€œå…ˆé©±â€ï¼Œæ˜¯éå¸¸é‡è¦çš„å®¹å™¨æŠ€æœ¯å®ç°ï¼Œåœ¨æ•´ä¸ªäº‘åŸç”ŸæŠ€æœ¯ä½“ç³»ä¸­å…·æœ‰é‡è¦ä½œç”¨ã€‚æœ¬ä¹¦é€šè¿‡ä¸€ä¸ªæ•…äº‹è®©è¯»è€…æ˜ç™½<code>Docker</code>æ˜¯ä»€ä¹ˆï¼Œä¹‹åé€šè¿‡ä¸€ä¸ªé¡¹ç›®å¸¦é¢†è¯»è€…å¿«é€Ÿä¸Šæ‰‹å®è·µï¼Œå¹¶å¸®åŠ©è¯»è€…è¡¥å……äº†è§£<code>Docker</code>çš„æ ¸å¿ƒåŸç†ï¼Œè€Œåä»é¡¹ç›®å®è·µã€æŒç»­é›†æˆä¸å‘å¸ƒã€<code>Docker</code>çš„é«˜çº§åº”ç”¨ã€æ‰“é€ ä¼ä¸šçº§åº”ç”¨ç­‰æ–¹é¢å±•å¼€ä»‹ç»ã€‚æœ¬ä¹¦æ˜¯å¸®åŠ©è¯»è€…å…¥é—¨<code>Docker</code>çš„ä½³ä½œã€‚ä¹äºè§åˆ°æœ‰æ›´å¤šè¿™æ ·çš„å›¾ä¹¦æ¥å¸®åŠ©æ›´å¤šæœ‰éœ€æ±‚çš„äººï¼Œå¸®åŠ©ä»–ä»¬æ—©æ—¥èµ°ä¸Šäº‘åŸç”Ÿçš„å¤§èˆå°ã€‚ã€â€”â€”<strong>é˜¿é‡Œäº‘è¾¹ç¼˜äº‘åŸç”ŸæŠ€æœ¯è´Ÿè´£äºº å‘¨æ™¶</strong></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æˆ‘çš„æ–°ä¹¦&lt;a href=&quot;https://mp.weixin.qq.com/s/DKEyfeRiNjfrQSzGxvLUHw&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ã€Š&lt;code&gt;Docker&lt;/code&gt; å®æˆ˜æ´¾ï¼šå®¹å™¨å…¥é—¨ä¸ƒæ­¥æ³•ã€‹&lt;/a&gt;ä¸Šå¸‚å·²ç»ä¸€å‘¨å¹´äº†ï¼Œåœ¨è¿™ä¸ªé‡Œç¨‹ç¢‘çš„æ—¶åˆ»ï¼Œæ„Ÿè°¢å„ä½æœ‹å‹çš„æ”¯æŒã€‚å¸Œæœ›ä»Šå¹´èƒ½å¤ŸæŒç»­ã€Œå¤§éº¦ã€ï¼Œæ‹¿ä¸‹åŒç±»ä¹¦ç± &lt;code&gt;Top1&lt;/code&gt;!&lt;br&gt;
    
    </summary>
    
    
      <category term="å‰ç«¯åˆ†äº«" scheme="http://jartto.wang/categories/%E5%89%8D%E7%AB%AF%E5%88%86%E4%BA%AB/"/>
    
    
      <category term="docker" scheme="http://jartto.wang/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>30s å°±å¯ä»¥æŒæ¡çš„ Nginx ç‰‡æ®µ</title>
    <link href="http://jartto.wang/2023/03/12/30-seconds-of-nginx/"/>
    <id>http://jartto.wang/2023/03/12/30-seconds-of-nginx/</id>
    <published>2023-03-12T12:56:47.000Z</published>
    <updated>2023-03-20T22:38:16.301Z</updated>
    
    <content type="html"><![CDATA[<p>ä½œä¸ºä¸€æšç¨‹åºå‘˜ï¼Œæ—¥å¸¸ç ”å‘å°‘ä¸äº†ä¸Šçº¿éƒ¨ç½²å·¥ä½œã€‚ä¸€æ—¦èµ°ä¸Šâ€œåŸºå»ºâ€çš„é“è·¯ï¼Œä½ å°±ä¼šå‘ç° <code>Nginx</code> æ˜¯ä½ ç»•ä¸å¼€çš„ä¸€ä¸ªåã€‚æ¯«ä¸å¤¸å¼ çš„è¯´ï¼š<code>Nginx</code> èƒ½é¡¶åŠè¾¹å¤©ï¼<br><a id="more"></a><br>ä¹Ÿè®¸ä½ ä¼šåé©³ï¼Œæˆ‘ä»¬æœ‰ä¸“ä¸šçš„è¿ç»´ï¼ˆ <code>OP</code> ï¼‰å›¢é˜Ÿï¼Œä¸ç”¨æ“å¿ƒã€‚ç„¶è€Œå®é™…æƒ…å†µå´æ˜¯ <code>OP</code> æ¯å¤©è¢«ç¹é‡çš„å·¥å•å æ®ç€ï¼Œä½ æ— æ—¶æ— åˆ»ä¸åœ¨æ’é˜Ÿã€‚å¤§å…¬å¸å¦‚æ­¤ï¼Œå°å…¬å¸æ›´ç”šã€‚å› æ­¤ï¼Œå‚¨å¤‡ä¸€äº› <code>Nginx</code> çŸ¥è¯†ï¼Œä¸€å®šä¼šè®©ä½ äº‹åŠåŠŸå€ã€‚<br><div class="alert success"><p>æœ¬æ–‡æ€»ç»“äº†æ—¥å¸¸å¼€å‘ä¸­é«˜é¢‘å‡ºç°çš„ 15 ä¸ª Nginx é…ç½®ç‰‡æ®µï¼Œå› ä¸ºçŸ­å°ï¼Œæ‰€ä»¥ä½ åªéœ€ 30 ç§’å°±å¯ä»¥æŒæ¡ã€‚</p></div></p><h4 id="ä¸€ã€è·¨åŸŸé…ç½®"><a href="#ä¸€ã€è·¨åŸŸé…ç½®" class="headerlink" title="ä¸€ã€è·¨åŸŸé…ç½®"></a>ä¸€ã€è·¨åŸŸé…ç½®</h4><p>ç”±äºæµè§ˆå™¨çš„å®‰å…¨ç­–ç•¥ï¼Œå‰ç«¯å¤„ç†è·¨åŸŸè¯·æ±‚çš„æ¦‚ç‡æé«˜ï¼Œå¦‚ä¸‹æ˜¯å¼€å¯è·¨åŸŸè¯·æ±‚å¸¸è§„æ‰‹æ®µã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable">$request_method</span> = OPTIONS ) &#123;</span><br><span class="line">    add_header <span class="string">"Access-Control-Allow-Origin"</span>  *;</span><br><span class="line">    add_header <span class="string">"Access-Control-Allow-Methods"</span> <span class="string">"GET, POST, OPTIONS, HEAD"</span>;</span><br><span class="line">    add_header <span class="string">"Access-Control-Allow-Headers"</span> <span class="string">"Authorization, Origin, X-Requested-With, Content-Type, Accept"</span>;</span><br><span class="line">    add_header <span class="string">'Access-Control-Max-Age'</span> 600;</span><br><span class="line">    <span class="built_in">return</span> 200;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="äºŒã€å¼€å¯-GZip-å‹ç¼©"><a href="#äºŒã€å¼€å¯-GZip-å‹ç¼©" class="headerlink" title="äºŒã€å¼€å¯ GZip å‹ç¼©"></a>äºŒã€å¼€å¯ GZip å‹ç¼©</h4><p>å¦‚æœä½ å¸Œæœ›å‹ç¼©å¸¸è§„çš„æ–‡ä»¶ç±»å‹ï¼Œå¯ä»¥å‚è€ƒå¦‚ä¸‹ä»£ç ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">http </span><br><span class="line">&#123;</span><br><span class="line">  include       conf/mime.types;</span><br><span class="line">  gzip on;</span><br><span class="line">  gzip_min_length  1000;</span><br><span class="line">  gzip_buffers     4 8k;   </span><br><span class="line">  gzip_http_version 1.1; </span><br><span class="line">  gzip_types       text/plain application/x-javascript text/css application/xml application/javascript application/json;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>GZip æ¶‰åŠå‚æ•°è¾ƒå¤šï¼Œè¿˜æœ‰ <code>gzip_comp_level</code>ã€<code>gzip_proxied</code>ç­‰ï¼Œè¯¦æƒ…å¯ä»¥å‚è€ƒï¼š<a href="https://www.jianshu.com/p/e0ff1e275e7f" target="_blank" rel="noopener">Nginxé…ç½® - Gzipå‹ç¼©</a></p><h4 id="ä¸‰ã€è·¨åŸŸä¼ é€’-Cookie"><a href="#ä¸‰ã€è·¨åŸŸä¼ é€’-Cookie" class="headerlink" title="ä¸‰ã€è·¨åŸŸä¼ é€’ Cookie"></a>ä¸‰ã€è·¨åŸŸä¼ é€’ Cookie</h4><p><code>Chrome 80</code>ä»¥åçš„ç‰ˆæœ¬ï¼Œ<code>Cookie</code>é»˜è®¤ä¸å¯è·¨åŸŸï¼Œé™¤éæœåŠ¡å™¨åœ¨å“åº”å¤´é‡Œå†è®¾ç½® <code>same-site</code> å±æ€§ï¼ˆ<code>strict</code>ï¼Œ<code>lax</code>ï¼Œ<code>none</code>ï¼‰ã€‚</p><ul><li><code>Strict</code>æœ€ä¸ºä¸¥æ ¼ï¼Œå®Œå…¨ç¦æ­¢ç¬¬ä¸‰æ–¹<code>Cookie</code>ï¼Œè·¨ç«™ç‚¹æ—¶ï¼Œä»»ä½•æƒ…å†µä¸‹éƒ½ä¸ä¼šå‘é€<code>Cookie</code>ã€‚æ¢è¨€ä¹‹ï¼Œåªæœ‰å½“å‰ç½‘é¡µçš„<code>URL</code>ä¸è¯·æ±‚ç›®æ ‡ä¸€è‡´ï¼Œæ‰ä¼šå¸¦ä¸Š<code>Cookie</code>ã€‚è¿™ä¸ªè§„åˆ™è¿‡äºä¸¥æ ¼ï¼Œå¯èƒ½é€ æˆéå¸¸ä¸å¥½çš„ç”¨æˆ·ä½“éªŒã€‚æ¯”å¦‚ï¼Œå½“å‰ç½‘é¡µæœ‰ä¸€ä¸ª<code>GitHub</code>é“¾æ¥ï¼Œç”¨æˆ·ç‚¹å‡»è·³è½¬å°±ä¸ä¼šå¸¦æœ‰<code>GitHub</code>çš„<code>Cookie</code>ï¼Œè·³è½¬è¿‡å»æ€»æ˜¯æœªç™»é™†çŠ¶æ€ã€‚</li><li><p><code>None</code>ï¼Œ<code>Cookie</code>åªèƒ½é€šè¿‡<code>HTTPS</code>åè®®å‘é€ã€‚å¿…é¡»åŒæ—¶è®¾ç½®<code>Secure</code>å±æ€§ï¼ˆ<code>Cookie</code>åªèƒ½é€šè¿‡<code>HTTPS</code>åè®®å‘é€ï¼‰ï¼Œå¦åˆ™æ— æ•ˆã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-Cookie: widget_session=abc123; SameSite=None; Secure</span><br></pre></td></tr></table></figure></li><li><p><code>Lax</code>è§„åˆ™ç¨ç¨æ”¾å®½ï¼Œå¤§å¤šæ•°æƒ…å†µä¹Ÿæ˜¯ä¸å‘é€ç¬¬ä¸‰æ–¹<code>Cookie</code>ï¼Œä½†æ˜¯å¯¼èˆªåˆ°ç›®æ ‡ç½‘å€çš„<code>Get</code>è¯·æ±‚é™¤å¤–ã€‚</p></li></ul><p>è¿˜æœ‰ä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨<code>proxy_pass</code>åå‘ä»£ç†ã€‚å¦‚æœåªæ˜¯<code>Host</code>ã€ç«¯å£è½¬æ¢ï¼Œåˆ™<code>Cookie</code>ä¸ä¼šä¸¢å¤±ã€‚å†æ¬¡è®¿é—®æ—¶ï¼Œæµè§ˆå™¨ä¼šå‘é€å½“å‰çš„<code>Cookie</code>ã€‚å½“ç„¶ï¼Œè·¯å¾„å˜åŒ–äº†ï¼Œåˆ™éœ€è¦è®¾ç½®<code>Cookie</code>çš„è·¯å¾„è½¬æ¢ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">location /foo &#123;</span><br><span class="line">    proxy_pass http://localhost:4000;</span><br><span class="line">    proxy_cookie_path /foo <span class="string">"/; SameSite=None; HTTPOnly; Secure"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="å››ã€å¥åº·æ£€æŸ¥"><a href="#å››ã€å¥åº·æ£€æŸ¥" class="headerlink" title="å››ã€å¥åº·æ£€æŸ¥"></a>å››ã€å¥åº·æ£€æŸ¥</h4><p><code>Nginx</code> æœåŠ¡ç«¯ä¼šæŒ‰ç…§è®¾å®šçš„é—´éš”æ—¶é—´ä¸»åŠ¨å‘åç«¯çš„ <code>upstream_server</code> å‘å‡ºæ£€æŸ¥è¯·æ±‚æ¥éªŒè¯åç«¯çš„å„ä¸ª <code>upstream_server</code> çš„çŠ¶æ€ã€‚<br>å¦‚æœå¾—åˆ°æŸä¸ªæœåŠ¡å™¨å¤±è´¥çš„è¿”å›è¶…è¿‡ä¸€å®šæ¬¡æ•°ï¼Œæ¯”å¦‚ 3 æ¬¡å°±ä¼šæ ‡è®°è¯¥æœåŠ¡å™¨ä¸ºå¼‚å¸¸ï¼Œå°±ä¸ä¼šå°†è¯·æ±‚è½¬å‘è‡³è¯¥æœåŠ¡å™¨ã€‚ä¸€èˆ¬æƒ…å†µä¸‹åç«¯æœåŠ¡å™¨éœ€è¦ä¸ºè¿™ç§å¥åº·æ£€æŸ¥ä¸“é—¨æä¾›ä¸€ä¸ªä½æ¶ˆè€—çš„æ¥å£ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">  <span class="comment"># æŒ‡å®šä¸€ä¸ª upstream è´Ÿè½½å‡è¡¡ç»„ï¼Œåç§°ä¸º evalue</span></span><br><span class="line">  upstream evalue &#123;</span><br><span class="line">    <span class="comment"># å®šä¹‰ç»„å†…çš„èŠ‚ç‚¹æœåŠ¡ï¼Œå¦‚æœä¸åŠ  weight å‚æ•°ï¼Œé»˜è®¤å°±æ˜¯ Round Robin ï¼ŒåŠ ä¸Šäº† weight å‚æ•°å°±æ˜¯åŠ æƒè½®è¯¢</span></span><br><span class="line">    server 192.168.90.100:9999 weight=100;</span><br><span class="line">    server 192.168.90.101:9999 weight=100;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># interval=3000 æ£€æŸ¥é—´éš” 3 ç§’ ï¼Œ rise=3 è¿ç»­æˆåŠŸ3æ¬¡è®¤ä¸ºæœåŠ¡å¥åº· ï¼Œ fall=5 è¿ç»­å¤±è´¥ 5 æ¬¡è®¤ä¸ºæœåŠ¡ä¸å¥åº· ï¼Œ timeout=3000 å¥åº·æ£€æŸ¥çš„è¶…æ—¶æ—¶é—´ä¸º 3 ç§’ ï¼Œ type=http  æ£€æŸ¥ç±»å‹ http</span></span><br><span class="line">    check interval=3000 rise=3 fall=5 timeout=3000 <span class="built_in">type</span>=http;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># check_http_send è®¾å®šæ£€æŸ¥çš„è¡Œä¸ºï¼šè¯·æ±‚ç±»å‹ url è¯·æ±‚åè®® -&gt; HEAD /api/v1/health HTTP/1.0         </span></span><br><span class="line">    check_http_send <span class="string">"HEAD /api/v1/health HTTP/1.0\r\n\r\n"</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># è®¾å®šè®¤ä¸ºè¿”å›æ­£å¸¸çš„å“åº”çŠ¶æ€       </span></span><br><span class="line">    check_http_expect_alive http_2xx http_3xx;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="äº”ã€æ³›åŸŸåè§£æ"><a href="#äº”ã€æ³›åŸŸåè§£æ" class="headerlink" title="äº”ã€æ³›åŸŸåè§£æ"></a>äº”ã€æ³›åŸŸåè§£æ</h4><p>è¦åœ¨ <code>Nginx</code> ä¸­é…ç½®åŸŸåæ³›è§£æï¼Œå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ <code>*</code> æ¥å®ç°æ¬¡çº§åŸŸåæŒ‡å‘åŒä¸€ <code>IP</code> åœ°å€ã€‚å¦‚ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ <code>Nginx</code> é…ç½®ç¤ºä¾‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name *.jartto.com;</span><br><span class="line">    root /var/www/jartto.com;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¸Šé¢çš„é…ç½®å°†æ‰€æœ‰ä»¥ <code>.jartto.com</code> ç»“å°¾çš„åŸŸåéƒ½æŒ‡å‘ <code>/var/www/jartto.com</code> ç›®å½•ä¸‹çš„ç½‘ç«™ã€‚å¦‚æœè¦é…ç½®äºŒçº§åŸŸåï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„ <code>Nginx</code> é…ç½®ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name *.sub.jartto.com;</span><br><span class="line">    root /var/www/sub.jartto.com;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¸Šé¢çš„é…ç½®å°†æ‰€æœ‰ä»¥ <code>.sub.jartto.com</code> ç»“å°¾çš„äºŒçº§åŸŸåéƒ½æŒ‡å‘ <code>/var/www/sub.jartto.com</code> ç›®å½•ä¸‹çš„ç½‘ç«™ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨æ³›è§£ææ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸€äº›å®‰å…¨é—®é¢˜ã€‚å› æ­¤ï¼Œå»ºè®®ä»…åœ¨å¿…è¦æ—¶ä½¿ç”¨æ³›è§£æï¼Œå¹¶ä¸”è¦å¯¹ç½‘ç«™è¿›è¡Œå……åˆ†ä¿æŠ¤ã€‚</p><h4 id="å…­ã€ä½¿ç”¨-request-id-å®ç°é“¾è·¯è¿½è¸ª"><a href="#å…­ã€ä½¿ç”¨-request-id-å®ç°é“¾è·¯è¿½è¸ª" class="headerlink" title="å…­ã€ä½¿ç”¨ $request_id å®ç°é“¾è·¯è¿½è¸ª"></a>å…­ã€ä½¿ç”¨ $request_id å®ç°é“¾è·¯è¿½è¸ª</h4><p><code>Nginx</code>åœ¨<code>1.11.0</code>ç‰ˆæœ¬ä¸­å°±æä¾›äº†å†…ç½®å˜é‡<code>$request_id</code>ï¼Œå…¶åŸç†å°±æ˜¯ç”Ÿæˆ 32 ä½çš„éšæœºå­—ç¬¦ä¸²ï¼Œè™½ä¸èƒ½æ¯”æ‹Ÿ <code>UUID</code> çš„æ¦‚ç‡ï¼Œä½† 32 ä½çš„éšæœºå­—ç¬¦ä¸²çš„é‡å¤æ¦‚ç‡ä¹Ÿæ˜¯å¾®ä¸è¶³é“äº†ï¼Œæ‰€ä»¥ä¸€èˆ¬å¯è§†ä¸º <code>UUID</code> æ¥ä½¿ç”¨ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">location ^~ /habo/gid &#123;</span><br><span class="line">        add_header Cache-Control no-store;</span><br><span class="line">        default_type application/javascript;</span><br><span class="line">        <span class="built_in">set</span> <span class="variable">$unionId</span> <span class="variable">$cookie_GID</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$unionId</span> = <span class="string">""</span>) &#123;</span><br><span class="line">                <span class="built_in">set</span> <span class="variable">$unionId</span> <span class="variable">$request_id</span>;</span><br><span class="line">                add_header Set-Cookie <span class="string">"GID=<span class="variable">$&#123;unionId&#125;</span>;path=/habo/;max-age=<span class="variable">$&#123;GID_MAX_AGE&#125;</span>"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">return</span> 200 <span class="string">"document.cookie='GID=<span class="variable">$&#123;unionId&#125;</span>;path=/;max-age=<span class="variable">$&#123;GID_MAX_AGE&#125;</span>'"</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p><h4 id="ä¸ƒã€é™æµé…ç½®"><a href="#ä¸ƒã€é™æµé…ç½®" class="headerlink" title="ä¸ƒã€é™æµé…ç½®"></a>ä¸ƒã€é™æµé…ç½®</h4><div class="alert info"><p><code>Nginx</code>æä¾›äº†ä¸¤ç§é™æµæ–¹å¼ï¼šæ§åˆ¶é€Ÿç‡å’Œæ§åˆ¶å¹¶å‘è¿æ¥æ•°ã€‚</p></div><p>å…¶ä¸­ï¼Œæ§åˆ¶é€Ÿç‡æ˜¯æŒ‡é™åˆ¶å•ä½æ—¶é—´å†…çš„è¯·æ±‚æ¬¡æ•°ï¼Œè€Œæ§åˆ¶å¹¶å‘è¿æ¥æ•°æ˜¯æŒ‡é™åˆ¶åŒæ—¶å¤„ç†çš„è¯·æ±‚æ•°é‡ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„<code>Nginx</code>é™æµé…ç½®ç¤ºä¾‹ï¼Œä½¿ç”¨<code>leaky bucket</code>ç®—æ³•è¿›è¡Œé™æµï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">    limit_req_zone <span class="variable">$binary_remote_addr</span> zone=one:10m rate=1r/s;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        location / &#123;</span><br><span class="line">            limit_req zone=one burst=5;</span><br><span class="line">            proxy_pass http://backend;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>åœ¨ä¸Šè¿°é…ç½®ä¸­ï¼Œ<code>limit_req_zone</code>ç”¨äºå®šä¹‰ä¸€ä¸ªåä¸º<code>one</code>çš„å…±äº«å†…å­˜åŒºåŸŸï¼Œå¹¶å°†å…¶ä¸å®¢æˆ·ç«¯<code>IP</code>åœ°å€ç›¸å…³è”ã€‚è¿™ä¸ªå…±äº«å†…å­˜åŒºåŸŸæœ€å¤§å ç”¨<code>10MB</code>ç©ºé—´ï¼Œå¹¶ä¸”å…è®¸æ¯ç§’é’Ÿé€šè¿‡ 1 ä¸ªè¯·æ±‚ã€‚ç„¶åï¼Œåœ¨<code>location</code>å—ä¸­ä½¿ç”¨äº†<code>limit_req</code>æŒ‡ä»¤æ¥å¯ç”¨é™æµåŠŸèƒ½ã€‚è¿™é‡Œè®¾ç½®<code>burst</code>ä¸º 5ï¼Œè¡¨ç¤ºå½“å®¢æˆ·ç«¯åœ¨çŸ­æ—¶é—´å†…å‘é€è¶…è¿‡ 1 ä¸ªè¯·æ±‚æ—¶ï¼Œå¯ä»¥æš‚æ—¶å®¹å¿ä¸€å®šæ•°é‡çš„è¯·æ±‚è¶…å‡ºé™åˆ¶ã€‚<br>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å®é™…åº”ç”¨ä¸­éœ€è¦æ ¹æ®å…·ä½“æƒ…å†µè°ƒæ•´å‚æ•°å€¼ä»¥è¾¾åˆ°æœ€ä½³æ•ˆæœã€‚å¦‚ä¸‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">map <span class="variable">$http_baggage_flow</span>  <span class="variable">$plimit</span> &#123;</span><br><span class="line"> <span class="string">"ptest"</span> <span class="variable">$server_name</span>;</span><br><span class="line"> default <span class="string">""</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">limit_req_zone <span class="variable">$plimit</span> zone=prelimit:10m rate=600r/s;</span><br><span class="line"> server &#123;</span><br><span class="line">  listen       443 ssl;</span><br><span class="line">  server_name   www.jartto.com;</span><br><span class="line">  limit_req zone=prelimit  nodelay;</span><br><span class="line">  limit_req_status 530;</span><br><span class="line"></span><br><span class="line">  location = /530.html &#123;</span><br><span class="line">      default_type application/json;</span><br><span class="line">      <span class="built_in">return</span> 200 <span class="string">'&#123;"status" : 530&#125;'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="å…«ã€History-äºŒçº§è·¯ç”±åˆ·æ–°é—®é¢˜"><a href="#å…«ã€History-äºŒçº§è·¯ç”±åˆ·æ–°é—®é¢˜" class="headerlink" title="å…«ã€History äºŒçº§è·¯ç”±åˆ·æ–°é—®é¢˜"></a>å…«ã€History äºŒçº§è·¯ç”±åˆ·æ–°é—®é¢˜</h4><p><code>vue-router+webpack</code>é¡¹ç›®çº¿ä¸Šéƒ¨ç½²æ—¶å•é¡µé¡¹ç›®è·¯ç”±ï¼Œåˆ·æ–°é¡µé¢å‡ºç° <code>404</code> é—®é¢˜ï¼Œä¸€èˆ¬éœ€è¦é…ç½®å¦‚ä¸‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">ã€€ã€€root html;</span><br><span class="line">ã€€ã€€try_files <span class="variable">$uri</span> <span class="variable">$uri</span>/ @router;</span><br><span class="line">ã€€ã€€index index.html index.htm;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">location @router &#123;</span><br><span class="line">ã€€ã€€rewrite ^.*$ /index.html last;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="ä¹ã€Cookie-è·¯ç”±è¯†åˆ«"><a href="#ä¹ã€Cookie-è·¯ç”±è¯†åˆ«" class="headerlink" title="ä¹ã€Cookie è·¯ç”±è¯†åˆ«"></a>ä¹ã€Cookie è·¯ç”±è¯†åˆ«</h4><p>æœ€å¸¸è§çš„åœºæ™¯å°±æ˜¯ç°åº¦å‘å¸ƒï¼Œ<code>Nginx</code> æ¥è¯†åˆ«æ¥è‡ªå‰ç«¯çš„æµé‡ï¼Œä»è€Œè¿›è¡Œè½¬å‘ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">map $http_cookie $m_upstream &#123;</span><br><span class="line">    ~*baggage-version=isolute-feat-.*$ al-bj-sre-k8s-test-istio-gateway;</span><br><span class="line">    default test.jartto.com;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">upstream al-bj-sre-k8s-test-istio-gateway &#123;</span><br><span class="line">    server 47.95.128.11:80;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="åã€æœåŠ¡ç«¯å¼€å¯å›¾ç‰‡è½¬æ¢"><a href="#åã€æœåŠ¡ç«¯å¼€å¯å›¾ç‰‡è½¬æ¢" class="headerlink" title="åã€æœåŠ¡ç«¯å¼€å¯å›¾ç‰‡è½¬æ¢"></a>åã€æœåŠ¡ç«¯å¼€å¯å›¾ç‰‡è½¬æ¢</h4><p>è¿™é‡Œä¸»è¦æ˜¯è®¾ç½® <code>WebP</code> æ ¼å¼å›¾ç‰‡ï¼Œå¦‚æœä½ è¿˜ä¸äº†è§£ï¼Œè¯·æŸ¥çœ‹ï¼š<a href="http://jartto.wang/2020/05/02/webp-practice/"><code>WebP</code> æ–¹æ¡ˆåˆ†æä¸å®è·µ</a>ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">map $http_accept $webp_suffix &#123;</span><br><span class="line">    default   &quot;&quot;;</span><br><span class="line">    &quot;~*webp&quot;  &quot;.webp&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">location  ~* ^/_nuxt/img/(.+\.png|jpe?g)$ &#123;</span><br><span class="line">    rewrite ^/_nuxt/img/(.+\.png|jpe?g)$ /$1 break;</span><br><span class="line">    root /apps/srv/instance/test-webp.jartto.com/.nuxt/dist/client/img/;</span><br><span class="line">    add_header Vary Accept;</span><br><span class="line">    try_files $uri$webp_suffix $uri =404;</span><br><span class="line">    expires 30d;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åä¸€ã€è´Ÿè½½å‡è¡¡"><a href="#åä¸€ã€è´Ÿè½½å‡è¡¡" class="headerlink" title="åä¸€ã€è´Ÿè½½å‡è¡¡"></a>åä¸€ã€è´Ÿè½½å‡è¡¡</h4><p>è´Ÿè½½å‡è¡¡é€šå¸¸æœ‰å››ç§ç®—æ³•ï¼š</p><ul><li>è½®è¯¢ï¼Œé»˜è®¤æ–¹å¼ï¼Œæ¯ä¸ªè¯·æ±‚æŒ‰æ—¶é—´é¡ºåºé€ä¸€åˆ†é…åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨ï¼Œå¦‚æœåç«¯æœåŠ¡æŒ‚äº†ï¼Œèƒ½è‡ªåŠ¨å‰”é™¤ï¼›</li><li><code>weight</code>ï¼Œæƒé‡åˆ†é…ï¼ŒæŒ‡å®šè½®è¯¢å‡ ç‡ï¼Œæƒé‡è¶Šé«˜ï¼Œåœ¨è¢«è®¿é—®çš„æ¦‚ç‡è¶Šå¤§ï¼Œç”¨äºåç«¯æœåŠ¡å™¨æ€§èƒ½ä¸å‡çš„æƒ…å†µï¼›</li><li><code>ip_hash</code>ï¼Œæ¯ä¸ªè¯·æ±‚æŒ‰è®¿é—® <code>IP</code> çš„ <code>hash</code> ç»“æœåˆ†é…ï¼Œè¿™æ ·æ¯ä¸ªè®¿å®¢å›ºå®šè®¿é—®ä¸€ä¸ªåç«¯æœåŠ¡å™¨ï¼Œå¯ä»¥è§£å†³åŠ¨æ€ç½‘é¡µ <code>session</code> å…±äº«é—®é¢˜ã€‚è´Ÿè½½å‡è¡¡æ¯æ¬¡è¯·æ±‚éƒ½ä¼šé‡æ–°å®šä½åˆ°æœåŠ¡å™¨é›†ç¾¤ä¸­çš„æŸä¸€ä¸ªï¼Œé‚£ä¹ˆå·²ç»ç™»å½•æŸä¸€ä¸ªæœåŠ¡å™¨çš„ç”¨æˆ·å†é‡æ–°å®šä½åˆ°å¦ä¸€ä¸ªæœåŠ¡å™¨ï¼Œå…¶ç™»å½•ä¿¡æ¯å°†ä¼šä¸¢å¤±ï¼Œè¿™æ ·æ˜¾ç„¶æ˜¯ä¸å¦¥çš„ï¼›</li><li><code>fair</code>ï¼ˆç¬¬ä¸‰æ–¹ï¼‰ï¼ŒæŒ‰åç«¯æœåŠ¡å™¨çš„å“åº”æ—¶é—´åˆ†é…ï¼Œå“åº”æ—¶é—´çŸ­çš„ä¼˜å…ˆåˆ†é…ï¼Œä¾èµ–ç¬¬ä¸‰æ–¹æ’ä»¶ <code>nginx-upstream-fair</code>ï¼Œä½¿ç”¨å‰è¯·å…ˆå®‰è£…ï¼›<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">  upstream jartto-server &#123;</span><br><span class="line">  # ip_hash;  # ip_hash æ–¹å¼</span><br><span class="line">    # fair;   # fair æ–¹å¼</span><br><span class="line">    server 127.0.0.1:8081;  # è´Ÿè½½å‡è¡¡ç›®çš„æœåŠ¡åœ°å€</span><br><span class="line">    server 127.0.0.1:8080;</span><br><span class="line">    server 127.0.0.1:8082 weight=10;  # weight æ–¹å¼ï¼Œä¸å†™é»˜è®¤ä¸º 1</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  server &#123;</span><br><span class="line">    location / &#123;</span><br><span class="line">    proxy_pass http://jartto-server;</span><br><span class="line">      proxy_connect_timeout 10;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="åäºŒã€é…ç½®-HTTPS"><a href="#åäºŒã€é…ç½®-HTTPS" class="headerlink" title="åäºŒã€é…ç½® HTTPS"></a>åäºŒã€é…ç½® HTTPS</h4><p>è¦åœ¨ <code>Nginx</code> ä¸Šé…ç½® <code>HTTPS</code>ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</p><ol><li>ä¸º <code>Nginx</code> å®‰è£… <code>SSL</code> æ¨¡å—ã€‚ è¿™å¯ä»¥é€šè¿‡ä½¿ç”¨ <code>--with-http_ssl_module</code> é€‰é¡¹ç¼–è¯‘ <code>Nginx</code> æˆ–å®‰è£…åŒ…å« <code>SSL</code> æ¨¡å—çš„é¢„æ„å»ºåŒ…æ¥å®Œæˆã€‚</li><li>ä»å—ä¿¡ä»»çš„è¯ä¹¦é¢å‘æœºæ„<code>CA</code>ä¸ºæ‚¨çš„åŸŸè·å–<code>SSL</code>è¯ä¹¦ã€‚ è¿™å¯ä»¥é€šè¿‡è´­ä¹°è¯ä¹¦æˆ–ä»<code>Let&#39;s Encrypt</code>è·å¾—å…è´¹è¯ä¹¦æ¥å®Œæˆã€‚</li><li><p>é…ç½®<code>Nginx</code>ä»¥ä½¿ç”¨<code>SSL</code>è¯ä¹¦å’Œå¯†é’¥æ–‡ä»¶ã€‚è¿™æ¶‰åŠå°†ä»¥ä¸‹è¡Œæ·»åŠ åˆ°æ‚¨çš„<code>Nginx</code>é…ç½®æ–‡ä»¶ä¸­ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssl_certificate /path/to/jartto.crt;</span><br><span class="line">ssl_certificate_key /path/to/jartto.key;</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœéœ€è¦ï¼Œé…ç½®<code>Nginx</code>å°†<code>HTTP</code>è¯·æ±‚é‡å®šå‘åˆ°<code>HTTPS</code>ã€‚ è¿™å¯ä»¥ä½¿ç”¨æœåŠ¡å™¨å—æ¥å®Œæˆï¼Œè¯¥æœåŠ¡å™¨å—ç›‘å¬ç«¯å£<code>80</code>å¹¶å°†æ‰€æœ‰è¯·æ±‚é‡å®šå‘åˆ°ç«¯å£<code>443</code>ï¼ˆé»˜è®¤ <code>HTTPS</code> ç«¯å£ï¼‰ã€‚</p></li><li>é‡æ–°å¯åŠ¨<code>Nginx</code>ä»¥åº”ç”¨æ›´æ”¹ã€‚</li></ol><p>ä¸‹é¢æ˜¯å¯ç”¨<code>HTTPS</code>å¹¶å°†<code>HTTP</code>è¯·æ±‚é‡å®šå‘åˆ°<code>HTTPS</code>çš„<code>Nginx</code>é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name jartto.com www.jartto.com;</span><br><span class="line">    <span class="built_in">return</span> 301 https://<span class="variable">$server_name</span><span class="variable">$request_uri</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    listen 443 ssl;</span><br><span class="line">    server_name jartto.com www.jartto.com;</span><br><span class="line"></span><br><span class="line">    ssl_certificate /path/to/jartto.crt;</span><br><span class="line">    ssl_certificate_key /path/to/jartto.key;</span><br><span class="line">    <span class="comment"># Other SSL-related settings go here</span></span><br><span class="line">    <span class="comment"># Other server block settings go here</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å¦‚ä¸Šé…ç½®æ–‡ä»¶åŒæ—¶ç›‘å¬ç«¯å£<code>80</code>å’Œ<code>443</code>ï¼Œä½†ä»…åœ¨ç«¯å£<code>443</code>ä¸Šé€šè¿‡<code>HTTPS</code>æä¾›å†…å®¹ã€‚æ‰€æœ‰<code>HTTP</code>è¯·æ±‚éƒ½ä½¿ç”¨ç¬¬ä¸€ä¸ªæœåŠ¡å™¨å—ä¸­çš„è¿”å›è¯­å¥é‡å®šå‘åˆ°å®ƒä»¬ç­‰æ•ˆçš„<code>HTTPS URL</code>ã€‚</p><h4 id="åä¸‰ã€å›¾ç‰‡é˜²ç›—é“¾"><a href="#åä¸‰ã€å›¾ç‰‡é˜²ç›—é“¾" class="headerlink" title="åä¸‰ã€å›¾ç‰‡é˜²ç›—é“¾"></a>åä¸‰ã€å›¾ç‰‡é˜²ç›—é“¾</h4><p>å¦‚æœä½ ä¸æƒ³å›¾ç‰‡è¢«å¤–ç½‘éšä¾¿å¼•ç”¨ï¼Œé‚£ä¹ˆå¯ä»¥é…ç½®å›¾ç‰‡é˜²ç›—é“¾èƒ½åŠ›ï¼Œé…ç½®å¦‚ä¸‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  listen       80;        </span><br><span class="line">  server_name  *.jartto.com;</span><br><span class="line">  </span><br><span class="line">  <span class="comment"># å›¾ç‰‡é˜²ç›—é“¾</span></span><br><span class="line">  location ~* \.(gif|jpg|jpeg|png|bmp|swf)$ &#123;</span><br><span class="line">    valid_referers none blocked server_names ~\.google\. ~\.baidu\. *.qq.com;  <span class="comment"># åªå…è®¸æœ¬æœº IP å¤–é“¾å¼•ç”¨</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$invalid_referer</span>)&#123;</span><br><span class="line">      <span class="built_in">return</span> 403;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="åå››ã€é…ç½®å¤š-Server"><a href="#åå››ã€é…ç½®å¤š-Server" class="headerlink" title="åå››ã€é…ç½®å¤š Server"></a>åå››ã€é…ç½®å¤š Server</h4><p>è¦åœ¨<code>Nginx</code>ä¸­é…ç½®å¤šä¸ªæœåŠ¡å™¨ï¼Œå¯ä»¥åœ¨<code>Nginx</code>é…ç½®æ–‡ä»¶ä¸­å®šä¹‰å¤šä¸ªæœåŠ¡å™¨å—ã€‚æ¯ä¸ªæœåŠ¡å™¨å—ä»£è¡¨ä¸€ä¸ªå•ç‹¬çš„è™šæ‹ŸæœåŠ¡å™¨ï¼Œå¯ä»¥ç›‘å¬ä¸åŒçš„ç«¯å£æˆ–<code>IP</code>åœ°å€ï¼Œå¹¶æä¾›ä¸åŒçš„å†…å®¹ã€‚ä¸‹é¢æ˜¯å¦‚ä½•åœ¨<code>Nginx</code>ä¸­é…ç½®ä¸¤ä¸ªè™šæ‹ŸæœåŠ¡å™¨çš„ç¤ºä¾‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">  server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name www.jartto.com;</span><br><span class="line">    root /var/www/jartto.com;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># other server configuration directives</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name www.another-jartto.com;</span><br><span class="line">    root /var/www/another-jartto.com;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># other server configuration directives</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªç›‘å¬ç«¯å£<code>80</code>çš„è™šæ‹ŸæœåŠ¡å™¨ã€‚ç¬¬ä¸€ä¸ªè™šæ‹ŸæœåŠ¡å™¨é…ç½®ä¸ºä»ç›®å½•<code>/var/www/jartto.com</code>ä¸ºåŸŸ<code>www.jartto.com</code>æä¾›å†…å®¹ã€‚ç¬¬äºŒä¸ªè™šæ‹ŸæœåŠ¡å™¨é…ç½®ä¸ºä»ç›®å½•<code>/var/www/another-jartto.com</code>ä¸ºåŸŸ<code>www.another-jartto.com</code>æä¾›å†…å®¹ã€‚æ¯ä¸ªæœåŠ¡å™¨å—éƒ½å¯ä»¥æœ‰è‡ªå·±çš„ä¸€ç»„é…ç½®æŒ‡ä»¤ï¼Œä¾‹å¦‚<code>SSL</code>è¯ä¹¦ã€è®¿é—®æ—¥å¿—ã€é”™è¯¯é¡µé¢ç­‰ç­‰ã€‚ </p><div class="alert info"><p>é€šè¿‡åœ¨<code>Nginx</code>é…ç½®æ–‡ä»¶ä¸­å®šä¹‰å¤šä¸ªæœåŠ¡å™¨å—ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨å•ä¸ª<code>Nginx</code>å®ä¾‹ä¸Šæ‰˜ç®¡å¤šä¸ªç½‘ç«™æˆ–åº”ç”¨ç¨‹åºã€‚</p></div><h4 id="åäº”ã€åŠ¨æ€ä¿®æ”¹é…ç½®æ¨¡å—"><a href="#åäº”ã€åŠ¨æ€ä¿®æ”¹é…ç½®æ¨¡å—" class="headerlink" title="åäº”ã€åŠ¨æ€ä¿®æ”¹é…ç½®æ¨¡å—"></a>åäº”ã€åŠ¨æ€ä¿®æ”¹é…ç½®æ¨¡å—</h4><p><code>ngx_dynamic_upstream</code> æ˜¯ç”¨äºä½¿ç”¨ <code>HTTP API</code> åŠ¨æ€æ“ä½œä¸Šæ¸¸çš„æ¨¡å—ï¼Œä¾‹å¦‚ <code>ngx_http_upstream_conf</code>ã€‚å¦‚æœä½ æƒ³åŠ¨æ€ä¿®æ”¹<code>Nginx</code>é…ç½®ä¿¡æ¯ï¼Œé‚£ä¹ˆä¸å¦¨è¯•è¯•å¦‚ä¸‹ä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">upstream backends &#123;</span><br><span class="line">    zone zone_for_backends 1m;</span><br><span class="line">    server 127.0.0.1:6001;</span><br><span class="line">    server 127.0.0.1:6002;</span><br><span class="line">    server 127.0.0.1:6003;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    listen 6000;</span><br><span class="line"></span><br><span class="line">    location /dynamic &#123;</span><br><span class="line">      allow 127.0.0.1;</span><br><span class="line">      deny all;</span><br><span class="line">      dynamic_upstream;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">      proxy_pass http://backends;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ curl &quot;http://127.0.0.1:6000/dynamic?upstream=zone_for_backends&amp;verbose=&quot;</span><br><span class="line">server 127.0.0.1:6001 weight=1 max_fails=1 fail_timeout=10;</span><br><span class="line">server 127.0.0.1:6002 weight=1 max_fails=1 fail_timeout=10;</span><br><span class="line">server 127.0.0.1:6003 weight=1 max_fails=1 fail_timeout=10;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä½œä¸ºä¸€æšç¨‹åºå‘˜ï¼Œæ—¥å¸¸ç ”å‘å°‘ä¸äº†ä¸Šçº¿éƒ¨ç½²å·¥ä½œã€‚ä¸€æ—¦èµ°ä¸Šâ€œåŸºå»ºâ€çš„é“è·¯ï¼Œä½ å°±ä¼šå‘ç° &lt;code&gt;Nginx&lt;/code&gt; æ˜¯ä½ ç»•ä¸å¼€çš„ä¸€ä¸ªåã€‚æ¯«ä¸å¤¸å¼ çš„è¯´ï¼š&lt;code&gt;Nginx&lt;/code&gt; èƒ½é¡¶åŠè¾¹å¤©ï¼&lt;br&gt;
    
    </summary>
    
    
      <category term="æŠ€æœ¯åšæ–‡" scheme="http://jartto.wang/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E6%96%87/"/>
    
    
      <category term="nginx" scheme="http://jartto.wang/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>äº†ä¸èµ·çš„ Istio</title>
    <link href="http://jartto.wang/2020/07/29/istio-1/"/>
    <id>http://jartto.wang/2020/07/29/istio-1/</id>
    <published>2020-07-28T22:44:51.000Z</published>
    <updated>2020-08-03T02:18:03.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¾ˆå¤šä¼ä¸šéƒ½ä¼šé¢ä¸´ä»å•ä½“åº”ç”¨å‘å¾®æœåŠ¡æ¶æ„çš„è½¬å‹ï¼Œä¹Ÿä¼šè¡ç”Ÿå‡ºæ›´å¤šçš„åˆ†å¸ƒå¼åœºæ™¯éœ€æ±‚ã€‚éšç€è§„æ¨¡å’Œå¤æ‚åº¦çš„ä¸æ–­å¢é•¿ï¼Œå¦‚ä½•æ‰èƒ½æ›´å¥½çš„ç†è§£ã€é«˜æ•ˆçš„ç®¡ç†<strong>æœåŠ¡ç½‘æ ¼</strong>å‘¢ï¼Ÿ</p><a id="more"></a><p>æœ¬èŠ‚ç¯‡å¹…è¾ƒé•¿ï¼Œæˆ‘ä»¬ä¸»è¦å›´ç»•ä»¥ä¸‹å‡ ç‚¹æ¥å±•å¼€ï¼š<br>1.ä»€ä¹ˆæ˜¯æœåŠ¡ç½‘æ ¼ï¼Ÿ<br>2.åˆè¯† <code>Istio</code><br>3.æ ¸å¿ƒç‰¹æ€§<br>4.æµç¨‹æ¶æ„<br>5.æ ¸å¿ƒæ¨¡å—<br>6.<code>Envoy</code> è¿›é˜¶<br>7.æ–¹æ¡ˆç•…æƒ³</p><p>å¯¹è®¸å¤šå…¬å¸æ¥è¯´ï¼Œ<code>Docker</code> å’Œ <code>Kubernetes</code> è¿™æ ·çš„å·¥å…·å·²ç»è§£å†³äº†éƒ¨ç½²é—®é¢˜ï¼Œæˆ–è€…è¯´å‡ ä¹è§£å†³äº†ã€‚ä½†ä»–ä»¬è¿˜æ²¡æœ‰è§£å†³<strong>è¿è¡Œæ—¶</strong>çš„é—®é¢˜ï¼Œè¿™å°±æ˜¯æœåŠ¡ç½‘æ ¼ï¼ˆ<code>Service Mesh</code>ï¼‰çš„ç”±æ¥ã€‚</p><h4 id="ä¸€ã€ä»€ä¹ˆæ˜¯æœåŠ¡ç½‘æ ¼ï¼Ÿ"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯æœåŠ¡ç½‘æ ¼ï¼Ÿ" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯æœåŠ¡ç½‘æ ¼ï¼Ÿ"></a>ä¸€ã€ä»€ä¹ˆæ˜¯æœåŠ¡ç½‘æ ¼ï¼Ÿ</h4><p>æœåŠ¡ç½‘æ ¼ï¼ˆ<code>Service Mesh</code>ï¼‰ç”¨æ¥æè¿°ç»„æˆè¿™äº›åº”ç”¨ç¨‹åºçš„å¾®æœåŠ¡ç½‘ç»œä»¥åŠå®ƒä»¬ä¹‹é—´çš„äº¤äº’ã€‚å®ƒæ˜¯ä¸€ä¸ªç”¨äºä¿è¯æœåŠ¡é—´å®‰å…¨ã€å¿«é€Ÿã€å¯é é€šä¿¡çš„ç½‘ç»œä»£ç†ç»„ä»¶ï¼Œæ˜¯éšç€<strong>å¾®æœåŠ¡å’Œäº‘åŸç”Ÿåº”ç”¨</strong>å…´èµ·è€Œè¯ç”Ÿçš„åŸºç¡€è®¾æ–½å±‚ã€‚</p><p>å®ƒé€šå¸¸ä»¥è½»é‡çº§ç½‘ç»œä»£ç†çš„æ–¹å¼åŒåº”ç”¨éƒ¨ç½²åœ¨ä¸€èµ·ã€‚æ¯”å¦‚ <code>Sidecar</code> æ–¹å¼ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/istio/service-mesh.png" alt="Service Mesh"></p><p>æˆ‘ä»¬å¯¹ä¸Šå›¾åšä¸ªè§£é‡Šï¼š<br><code>Service Mesh</code> è®¾è®¡ä¸€èˆ¬åˆ’åˆ†ä¸ºä¸¤ä¸ªæ¨¡å—ï¼Œ<strong>æ§åˆ¶é¢</strong>å’Œ<strong>æ•°æ®é¢</strong>ã€‚å¯¹äºåº”ç”¨æ¥è¯´ï¼Œæ‰€æœ‰æµé‡éƒ½ä¼šç»è¿‡æ•°æ®é¢è¿›è¡Œè½¬å‘ã€‚é¡ºåˆ©è½¬å‘çš„å‰æï¼š<strong>æ•°æ®é¢éœ€è¦çŸ¥é“è½¬å‘çš„ç›®æ ‡åœ°å€</strong>ï¼Œç›®æ ‡åœ°å€æœ¬èº«æ˜¯ç”±ä¸€äº›ä¸šåŠ¡é€»è¾‘æ¥å†³å®šçš„(ä¾‹å¦‚æœåŠ¡å‘ç°)ã€‚</p><p>æ‰€ä»¥è‡ªç„¶è€Œç„¶åœ°ï¼Œæˆ‘ä»¬å¯ä»¥æ¨æ–­<strong>æ§åˆ¶é¢</strong>éœ€è¦è´Ÿè´£ç®¡ç†æ•°æ®é¢èƒ½æ­£å¸¸è¿è¡Œæ‰€éœ€è¦çš„ä¸€äº›é…ç½®ï¼š</p><ul><li>éœ€è¦çŸ¥é“æŸæ¬¡è¯·æ±‚è½¬å‘å»å“ªé‡Œï¼šæœåŠ¡å‘ç°é…ç½®ï¼›</li><li>å¤–éƒ¨æµé‡è¿›å…¥éœ€è¦åˆ¤æ–­æ˜¯å¦å·²ç»è¾¾åˆ°æœåŠ¡æµé‡ä¸Šé™ï¼šé™æµé…ç½®ï¼›</li><li>ä¾èµ–æœåŠ¡è¿”å›é”™è¯¯æ—¶ï¼Œéœ€è¦èƒ½å¤Ÿæ‰§è¡Œç›¸åº”çš„ç†”æ–­é€»è¾‘ï¼šç†”æ–­é…ç½®ï¼›</li></ul><p><code>Serivce Mesh</code> å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªä½äº <code>TCP/IP</code> ä¹‹ä¸Šçš„ç½‘ç»œæ¨¡å‹ï¼ŒæŠ½è±¡äº†æœåŠ¡é—´å¯é é€šä¿¡çš„æœºåˆ¶ã€‚ä½†ä¸ <code>TCP</code> ä¸åŒï¼Œå®ƒæ˜¯é¢å‘åº”ç”¨çš„ï¼Œä¸ºåº”ç”¨æä¾›äº†ç»Ÿä¸€çš„å¯è§†åŒ–å’Œæ§åˆ¶ã€‚</p><p><strong>1.<code>Service Mesh</code> å…·æœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š</strong></p><ul><li>å±è”½åˆ†å¸ƒå¼ç³»ç»Ÿé€šä¿¡çš„å¤æ‚æ€§(è´Ÿè½½å‡è¡¡ã€æœåŠ¡å‘ç°ã€è®¤è¯æˆæƒã€ç›‘æ§è¿½è¸ªã€æµé‡æ§åˆ¶ç­‰ç­‰)ï¼ŒæœåŠ¡åªç”¨å…³æ³¨ä¸šåŠ¡é€»è¾‘ï¼›</li><li>çœŸæ­£çš„è¯­è¨€æ— å…³ï¼ŒæœåŠ¡å¯ä»¥ç”¨ä»»ä½•è¯­è¨€ç¼–å†™ï¼Œåªéœ€å’Œ <code>Service Mesh</code> é€šä¿¡å³å¯ï¼›</li><li>å¯¹åº”ç”¨é€æ˜ï¼Œ<code>Service Mesh</code> ç»„ä»¶å¯ä»¥å•ç‹¬å‡çº§ï¼›</li></ul><p><strong>2.<code>Service Mesh</code> ç›®å‰ä¹Ÿé¢ä¸´ä¸€äº›æŒ‘æˆ˜ï¼š</strong></p><ul><li><code>Service Mesh</code> ç»„ä»¶ä»¥ä»£ç†æ¨¡å¼è®¡ç®—å¹¶è½¬å‘è¯·æ±‚ï¼Œä¸€å®šç¨‹åº¦ä¸Šä¼šé™ä½é€šä¿¡ç³»ç»Ÿæ€§èƒ½ï¼Œå¹¶å¢åŠ ç³»ç»Ÿèµ„æºå¼€é”€ï¼›</li><li><code>Service Mesh</code> ç»„ä»¶æ¥ç®¡äº†ç½‘ç»œæµé‡ï¼Œå› æ­¤æœåŠ¡çš„æ•´ä½“ç¨³å®šæ€§ä¾èµ–äº <code>Service Mesh</code>ï¼ŒåŒæ—¶é¢å¤–å¼•å…¥çš„å¤§é‡ <code>Service Mesh</code> æœåŠ¡å®ä¾‹çš„è¿ç»´å’Œç®¡ç†ä¹Ÿæ˜¯ä¸€ä¸ªæŒ‘æˆ˜ï¼›</li></ul><div class="alert danger"><p>éšç€æœåŠ¡ç½‘æ ¼çš„è§„æ¨¡å’Œå¤æ‚æ€§ä¸æ–­çš„å¢é•¿ï¼Œå®ƒå°†ä¼šå˜å¾—è¶Šæ¥è¶Šéš¾ä»¥ç†è§£å’Œç®¡ç†ã€‚</p></div><p><code>Service Mesh</code> çš„éœ€æ±‚åŒ…æ‹¬æœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡ã€æ•…éšœæ¢å¤ã€åº¦é‡å’Œç›‘æ§ç­‰ã€‚<code>Service Mesh</code> é€šå¸¸è¿˜æœ‰æ›´å¤æ‚çš„è¿ç»´éœ€æ±‚ï¼Œæ¯”å¦‚ <code>A/B</code> æµ‹è¯•ã€é‡‘ä¸é›€å‘å¸ƒã€é€Ÿç‡é™åˆ¶ã€è®¿é—®æ§åˆ¶å’Œç«¯åˆ°ç«¯è®¤è¯ã€‚</p><p><code>Service Mesh</code>çš„å‡ºç°ï¼Œå¼¥è¡¥äº† <code>Kubernetes</code> åœ¨å¾®æœåŠ¡çš„è¿æ¥ã€ç®¡ç†å’Œç›‘æ§æ–¹é¢çš„çŸ­æ¿ï¼Œä¸º <code>Kubernetes</code> æä¾›æ›´å¥½çš„åº”ç”¨å’ŒæœåŠ¡ç®¡ç†ã€‚å› æ­¤ï¼Œ<code>Service Mesh</code> çš„ä»£è¡¨ <code>Istio</code> ä¸€ç»æ¨å‡ºï¼Œå°±è¢«è®¤ä¸ºæ˜¯å¯ä»¥å’Œ <code>Kubernetes</code> å½¢æˆåŒå‰‘åˆç’§æ•ˆæœçš„å¾®æœåŠ¡ç®¡ç†çš„åˆ©å™¨ï¼Œå—åˆ°äº†ä¸šç•Œçš„æ¨å´‡ã€‚</p><p><code>Istio</code> æä¾›äº†å¯¹æ•´ä¸ªæœåŠ¡ç½‘æ ¼çš„è¡Œä¸ºæ´å¯Ÿå’Œæ“ä½œæ§åˆ¶çš„èƒ½åŠ›ï¼Œä»¥åŠä¸€ä¸ªå®Œæ•´çš„æ»¡è¶³å¾®æœåŠ¡åº”ç”¨å„ç§éœ€æ±‚çš„è§£å†³æ–¹æ¡ˆã€‚<code>Istio</code> ä¸»è¦é‡‡ç”¨ä¸€ç§ä¸€è‡´çš„æ–¹å¼æ¥ä¿æŠ¤ã€è¿æ¥å’Œç›‘æ§å¾®æœåŠ¡ï¼Œé™ä½äº†ç®¡ç†å¾®æœåŠ¡éƒ¨ç½²çš„å¤æ‚æ€§ã€‚</p><h4 id="äºŒã€åˆè¯†-Istio"><a href="#äºŒã€åˆè¯†-Istio" class="headerlink" title="äºŒã€åˆè¯† Istio"></a>äºŒã€åˆè¯† Istio</h4><p><code>Istio</code> å‘éŸ³ã€Œæ„ä¸å¸æ¬§ã€ï¼Œé‡éŸ³åœ¨<strong>æ„</strong>ä¸Šã€‚å®˜æ–¹ç»™å‡ºçš„ <code>Istio</code> çš„æ€»ç»“ï¼Œç®€å•æ˜äº†ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Istio lets you connect, secure, control, and observe services.</span><br></pre></td></tr></table></figure></p><div class="alert info"><p>è¿æ¥ã€å®‰å…¨ã€æ§åˆ¶å’Œè§‚æµ‹æœåŠ¡ã€‚</p></div><p><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/istio/ingress-istio.png" alt="åˆè¯† Istio"></p><p>ç®€å•æ¥è¯´ï¼Œ<code>Istio</code> é’ˆå¯¹ç°æœ‰çš„æœåŠ¡ç½‘æ ¼ï¼Œæä¾›ä¸€ç§ç®€å•çš„æ–¹å¼å°†è¿æ¥ã€å®‰å…¨ã€æ§åˆ¶å’Œè§‚æµ‹çš„æ¨¡å—ï¼Œä¸åº”ç”¨ç¨‹åºæˆ–æœåŠ¡éš”ç¦»å¼€æ¥ï¼Œä»è€Œå¼€å‘äººå‘˜å¯ä»¥å°†æ›´å¤šçš„ç²¾åŠ›æ”¾åœ¨æ ¸å¿ƒçš„ä¸šåŠ¡é€»è¾‘ä¸Šï¼Œä»¥ä¸‹æ˜¯ <code>Istio</code> çš„æ ¸å¿ƒåŠŸèƒ½ï¼š</p><p>1.<code>HTTP</code>ã€<code>gRPC</code>ã€<code>WebSocket</code> å’Œ <code>TCP</code> æµé‡çš„è‡ªåŠ¨è´Ÿè½½å‡è¡¡ï¼›<br>2.é€šè¿‡ä¸°å¯Œçš„è·¯ç”±è§„åˆ™ã€é‡è¯•ã€æ•…éšœè½¬ç§»å’Œæ•…éšœæ³¨å…¥ï¼Œå¯ä»¥å¯¹æµé‡è¡Œä¸ºè¿›è¡Œç»†ç²’åº¦æ§åˆ¶ï¼›<br>3.å¯æ’å…¥çš„ç­–ç•¥å±‚å’Œé…ç½® <code>API</code>ï¼Œæ”¯æŒè®¿é—®æ§åˆ¶ã€é€Ÿç‡é™åˆ¶å’Œé…é¢ï¼›<br>4.å¯¹å‡ºå…¥é›†ç¾¤å…¥å£å’Œå‡ºå£ä¸­æ‰€æœ‰æµé‡çš„è‡ªåŠ¨åº¦é‡æŒ‡æ ‡ã€æ—¥å¿—è®°å½•å’Œè¿½è¸ªï¼›<br>5.é€šè¿‡å¼ºå¤§çš„åŸºäºèº«ä»½çš„éªŒè¯å’Œæˆæƒï¼Œåœ¨é›†ç¾¤ä¸­å®ç°å®‰å…¨çš„æœåŠ¡é—´é€šä¿¡ï¼›</p><p>ä»è¾ƒé«˜çš„å±‚é¢æ¥è¯´ï¼Œ<code>Istio</code> æœ‰åŠ©äºé™ä½è¿™äº›éƒ¨ç½²çš„å¤æ‚æ€§ï¼Œå¹¶å‡è½»å¼€å‘å›¢é˜Ÿçš„å‹åŠ›ã€‚å®ƒæ˜¯ä¸€ä¸ªå®Œå…¨å¼€æºçš„æœåŠ¡ç½‘æ ¼ï¼Œä½œä¸ºé€æ˜çš„ä¸€å±‚æ¥å…¥åˆ°ç°æœ‰çš„åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºé‡Œã€‚å®ƒä¹Ÿæ˜¯ä¸€ä¸ªå¹³å°ï¼Œæ‹¥æœ‰å¯ä»¥é›†æˆä»»ä½•æ—¥å¿—ã€é¥æµ‹å’Œç­–ç•¥ç³»ç»Ÿçš„ <code>API</code> æ¥å£ã€‚</p><p><code>Istio</code> å¤šæ ·åŒ–çš„ç‰¹æ€§ä½¿æˆ‘ä»¬èƒ½å¤ŸæˆåŠŸä¸”é«˜æ•ˆåœ°è¿è¡Œåˆ†å¸ƒå¼å¾®æœåŠ¡æ¶æ„ï¼Œå¹¶æä¾›ä¿æŠ¤ã€è¿æ¥å’Œç›‘æ§å¾®æœåŠ¡çš„ç»Ÿä¸€æ–¹æ³•ã€‚</p><h4 id="ä¸‰ã€æ ¸å¿ƒç‰¹æ€§"><a href="#ä¸‰ã€æ ¸å¿ƒç‰¹æ€§" class="headerlink" title="ä¸‰ã€æ ¸å¿ƒç‰¹æ€§"></a>ä¸‰ã€æ ¸å¿ƒç‰¹æ€§</h4><p><code>Istio</code> ä»¥ç»Ÿä¸€çš„æ–¹å¼æä¾›äº†è®¸å¤š<strong>è·¨æœåŠ¡ç½‘æ ¼</strong>çš„å…³é”®åŠŸèƒ½ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/istio/intro.png" alt="å®˜æ–¹ä»‹ç»"></p><p><strong>1.æµé‡ç®¡ç†</strong><br><code>Istio</code> ç®€å•çš„è§„åˆ™é…ç½®å’Œæµé‡è·¯ç”±å…è®¸æˆ‘ä»¬æ§åˆ¶æœåŠ¡ä¹‹é—´çš„æµé‡å’Œ <code>API</code> è°ƒç”¨è¿‡ç¨‹ã€‚<code>Istio</code> ç®€åŒ–äº†æœåŠ¡çº§å±æ€§ï¼ˆå¦‚ç†”æ–­å™¨ã€è¶…æ—¶å’Œé‡è¯•ï¼‰çš„é…ç½®ï¼Œå¹¶ä¸”è®©å®ƒè½»è€Œæ˜“ä¸¾çš„æ‰§è¡Œé‡è¦çš„ä»»åŠ¡ï¼ˆå¦‚ <code>A/B</code> æµ‹è¯•ã€é‡‘ä¸é›€å‘å¸ƒå’ŒæŒ‰æµé‡ç™¾åˆ†æ¯”åˆ’åˆ†çš„åˆ†é˜¶æ®µå‘å¸ƒï¼‰ã€‚</p><p>æœ‰äº†æ›´å¥½çš„å¯¹æµé‡çš„å¯è§†æ€§å’Œå¼€ç®±å³ç”¨çš„æ•…éšœæ¢å¤ç‰¹æ€§ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨é—®é¢˜äº§ç”Ÿä¹‹å‰æ•è·å®ƒä»¬ï¼Œæ— è®ºé¢å¯¹ä»€ä¹ˆæƒ…å†µéƒ½å¯ä»¥ä½¿è°ƒç”¨æ›´å¯é ï¼Œç½‘ç»œæ›´å¥å£®ã€‚</p><p><strong>2.å®‰å…¨</strong><br><div class="alert warning"><p><code>Istio</code> çš„å®‰å…¨ç‰¹æ€§è§£æ”¾äº†å¼€å‘äººå‘˜ï¼Œä½¿å…¶åªéœ€è¦ä¸“æ³¨äºåº”ç”¨ç¨‹åºçº§åˆ«çš„å®‰å…¨ã€‚</p></div></p><p><code>Istio</code> æä¾›äº†<strong>åº•å±‚çš„å®‰å…¨é€šä¿¡é€šé“</strong>ï¼Œå¹¶ä¸ºå¤§è§„æ¨¡çš„<strong>æœåŠ¡é€šä¿¡ç®¡ç†è®¤è¯ã€æˆæƒå’ŒåŠ å¯†</strong>ã€‚æœ‰äº† <code>Istio</code>ï¼ŒæœåŠ¡é€šä¿¡åœ¨é»˜è®¤æƒ…å†µä¸‹å°±æ˜¯å—ä¿æŠ¤çš„ï¼Œå¯ä»¥åœ¨è·¨ä¸åŒåè®®å’Œè¿è¡Œæ—¶çš„æƒ…å†µä¸‹å®æ–½ä¸€è‡´çš„ç­–ç•¥ï¼Œè€Œæ‰€æœ‰è¿™äº›éƒ½åªéœ€è¦å¾ˆå°‘ç”šè‡³ä¸éœ€è¦ä¿®æ”¹åº”ç”¨ç¨‹åºã€‚</p><p><code>Istio</code> æ˜¯ç‹¬ç«‹äºå¹³å°çš„ï¼Œå¯ä»¥ä¸ <code>Kubernetes</code>ï¼ˆæˆ–åŸºç¡€è®¾æ–½ï¼‰çš„ç½‘ç»œç­–ç•¥ä¸€èµ·ä½¿ç”¨ã€‚ä½†å®ƒæ›´å¼ºå¤§ï¼Œèƒ½å¤Ÿåœ¨ç½‘ç»œå’Œåº”ç”¨å±‚é¢ä¿æŠ¤ <code>Pod</code> åˆ° <code>Pod</code> æˆ–è€…æœåŠ¡åˆ°æœåŠ¡ä¹‹é—´çš„é€šä¿¡ã€‚</p><p><strong>3.å¯è§‚å¯Ÿæ€§</strong><br><code>Istio</code> å¥å£®çš„<strong>è¿½è¸ªã€ç›‘æ§å’Œæ—¥å¿—ç‰¹æ€§</strong>è®©æˆ‘ä»¬èƒ½å¤Ÿæ·±å…¥çš„<strong>äº†è§£æœåŠ¡ç½‘æ ¼éƒ¨ç½²</strong>ã€‚é€šè¿‡ <code>Istio</code> çš„ç›‘æ§èƒ½åŠ›ï¼Œå¯ä»¥çœŸæ­£çš„äº†è§£åˆ°æœåŠ¡çš„æ€§èƒ½æ˜¯å¦‚ä½•å½±å“ä¸Šæ¸¸å’Œä¸‹æ¸¸çš„ã€‚è€Œå®ƒçš„å®šåˆ¶ <code>Dashboard</code> æä¾›äº†å¯¹æ‰€æœ‰æœåŠ¡æ€§èƒ½çš„å¯è§†åŒ–èƒ½åŠ›ï¼Œå¹¶è®©æˆ‘ä»¬çœ‹åˆ°å®ƒå¦‚ä½•å½±å“å…¶ä»–è¿›ç¨‹ã€‚</p><p><code>Istio</code> çš„ <code>Mixer</code> ç»„ä»¶è´Ÿè´£<strong>ç­–ç•¥æ§åˆ¶</strong>å’Œ<strong>é¥æµ‹æ•°æ®æ”¶é›†</strong>ã€‚å®ƒæä¾›äº†åç«¯æŠ½è±¡å’Œä¸­ä»‹ï¼Œå°†ä¸€éƒ¨åˆ† <code>Istio</code>ä¸åç«¯çš„åŸºç¡€è®¾æ–½å®ç°ç»†èŠ‚éš”ç¦»å¼€æ¥ï¼Œå¹¶ä¸ºè¿ç»´äººå‘˜æä¾›äº†å¯¹ç½‘æ ¼ä¸åç«¯åŸºç¡€å®æ–½ä¹‹é—´äº¤äº’çš„ç»†ç²’åº¦æ§åˆ¶ã€‚</p><p>æ‰€æœ‰è¿™äº›ç‰¹æ€§éƒ½ä½¿æˆ‘ä»¬èƒ½å¤Ÿæ›´æœ‰æ•ˆåœ°è®¾ç½®ã€ç›‘æ§å’ŒåŠ å¼ºæœåŠ¡çš„ <code>SLO</code>ã€‚å½“ç„¶ï¼Œåº•çº¿æ˜¯æˆ‘ä»¬å¯ä»¥å¿«é€Ÿæœ‰æ•ˆåœ°æ£€æµ‹åˆ°å¹¶ä¿®å¤å‡ºç°çš„é—®é¢˜ã€‚</p><p><strong>4.å¹³å°æ”¯æŒ</strong><br><code>Istio</code> ç‹¬ç«‹äºå¹³å°ï¼Œè¢«è®¾è®¡ä¸ºå¯ä»¥åœ¨å„ç§ç¯å¢ƒä¸­è¿è¡Œï¼ŒåŒ…æ‹¬è·¨äº‘ã€å†…éƒ¨ç¯å¢ƒã€<code>Kubernetes</code>ã€<code>Mesos</code> ç­‰ç­‰ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ <code>Kubernetes</code> æˆ–æ˜¯è£…æœ‰ <code>Consul</code> çš„ <code>Nomad</code> ç¯å¢ƒä¸Šéƒ¨ç½² <code>Istio</code>ã€‚</p><p><code>Istio</code> ç›®å‰æ”¯æŒï¼š</p><ul><li><code>Kubernetes</code> ä¸Šçš„æœåŠ¡éƒ¨ç½²</li><li>åŸºäº <code>Consul</code> çš„æœåŠ¡æ³¨å†Œ</li><li>æœåŠ¡è¿è¡Œåœ¨ç‹¬ç«‹çš„è™šæ‹Ÿæœºä¸Š</li></ul><p><strong>5.æ•´åˆå’Œå®šåˆ¶</strong><br><code>Istio</code> çš„ç­–ç•¥å®æ–½ç»„ä»¶å¯ä»¥æ‰©å±•å’Œå®šåˆ¶ï¼Œä¸ç°æœ‰çš„ <code>ACL</code>ã€æ—¥å¿—ã€ç›‘æ§ã€é…é¢ã€å®¡æŸ¥ç­‰è§£å†³æ–¹æ¡ˆé›†æˆã€‚</p><h4 id="å››ã€æµç¨‹æ¶æ„"><a href="#å››ã€æµç¨‹æ¶æ„" class="headerlink" title="å››ã€æµç¨‹æ¶æ„"></a>å››ã€æµç¨‹æ¶æ„</h4><p><code>Istio</code> æœåŠ¡ç½‘æ ¼é€»è¾‘ä¸Šåˆ†ä¸º<strong>æ•°æ®å¹³é¢</strong>ï¼ˆ<code>Control Plane</code>ï¼‰å’Œ<strong>æ§åˆ¶å¹³é¢</strong>ï¼ˆ<code>Data Plane</code>ï¼‰ï¼Œæ¶æ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/istio/framework.png" alt="Istio æ¶æ„å›¾"></p><p>1.<strong>æ•°æ®å¹³é¢<code>Data Plane</code></strong>ç”±ä¸€ç»„ä»¥ <code>Sidecar</code> æ–¹å¼éƒ¨ç½²çš„æ™ºèƒ½ä»£ç† <code>Envoy</code> ç»„æˆã€‚</p><p><code>Envoy</code> è¢«éƒ¨ç½²ä¸º <code>Sidecar</code>ï¼Œå’Œå¯¹åº”æœåŠ¡åœ¨åŒä¸€ä¸ª <code>Kubernetes pod</code> ä¸­ã€‚è¿™å…è®¸ <code>Istio</code> å°†å¤§é‡å…³äºæµé‡è¡Œä¸ºçš„ä¿¡å·ä½œä¸ºå±æ€§æå–å‡ºæ¥ï¼Œè€Œè¿™äº›å±æ€§åˆå¯ä»¥åœ¨ <code>Mixer</code> ä¸­ç”¨äºæ‰§è¡Œç­–ç•¥å†³ç­–ï¼Œå¹¶å‘é€ç»™ç›‘æ§ç³»ç»Ÿï¼Œä»¥æä¾›æ•´ä¸ªç½‘æ ¼è¡Œä¸ºçš„ä¿¡æ¯ã€‚</p><div class="alert success"><p>è¿™äº›ä»£ç†å¯ä»¥è°ƒèŠ‚å’Œæ§åˆ¶å¾®æœåŠ¡åŠ <code>Mixer</code> ä¹‹é—´æ‰€æœ‰çš„ç½‘ç»œé€šä¿¡ã€‚</p></div><p>2.<strong>æ§åˆ¶å¹³é¢<code>Control Plane</code></strong>è´Ÿè´£ç®¡ç†å’Œé…ç½®ä»£ç†æ¥è·¯ç”±æµé‡ï¼Œæ­¤å¤–é…ç½® <code>Mixer</code> ä»¥å®æ–½ç­–ç•¥å’Œæ”¶é›†é¥æµ‹æ•°æ®ã€‚ä¸»è¦åŒ…å«å¦‚ä¸‹å‡ éƒ¨åˆ†å†…å®¹ï¼š</p><ul><li><code>Mixer</code>ï¼šç­–ç•¥å’Œè¯·æ±‚è¿½è¸ªï¼›</li><li><code>Pilot</code>ï¼šæä¾›æœåŠ¡å‘ç°åŠŸèƒ½ï¼Œä¸ºæ™ºèƒ½è·¯ç”±ï¼ˆä¾‹å¦‚ <code>A/B</code> æµ‹è¯•ã€é‡‘ä¸é›€éƒ¨ç½²ç­‰ï¼‰å’Œå¼¹æ€§ï¼ˆè¶…æ—¶ã€é‡è¯•ã€ç†”æ–­å™¨ç­‰ï¼‰æä¾›æµé‡ç®¡ç†åŠŸèƒ½ï¼›</li><li><code>Citadel</code>ï¼šåˆ†å‘ <code>TLS</code> è¯ä¹¦åˆ°æ™ºèƒ½ä»£ç†ï¼›</li><li><code>Sidecar injector</code>ï¼šå¯ä»¥å…è®¸å‘åº”ç”¨ä¸­æ— ä¾µå…¥çš„æ·»åŠ åŠŸèƒ½ï¼Œé¿å…ä¸ºäº†æ»¡è¶³ç¬¬ä¸‰æ–¹éœ€æ±‚è€Œæ·»åŠ é¢å¤–çš„ä»£ç ï¼›</li></ul><h4 id="äº”ã€æ ¸å¿ƒæ¨¡å—"><a href="#äº”ã€æ ¸å¿ƒæ¨¡å—" class="headerlink" title="äº”ã€æ ¸å¿ƒæ¨¡å—"></a>äº”ã€æ ¸å¿ƒæ¨¡å—</h4><p>ä¸Šæ–‡æåˆ°äº†å¾ˆå¤šæŠ€æœ¯åè¯ï¼Œæˆ‘ä»¬éœ€è¦é‡ç‚¹è§£é‡Šä¸€ä¸‹ï¼š</p><p>1.ä»€ä¹ˆæ˜¯ <code>Sidecar</code> æ¨¡å¼ï¼Ÿ<br><code>Sidecar</code> æ˜¯ä¸€ç§å°†åº”ç”¨åŠŸèƒ½ä»åº”ç”¨æœ¬èº«å‰¥ç¦»å‡ºæ¥ä½œä¸ºå•ç‹¬è¿›ç¨‹çš„è®¾è®¡æ¨¡å¼ï¼Œå¯ä»¥å…è®¸å‘åº”ç”¨ä¸­æ— ä¾µå…¥çš„æ·»åŠ åŠŸèƒ½ï¼Œé¿å…ä¸ºäº†æ»¡è¶³ç¬¬ä¸‰æ–¹éœ€æ±‚è€Œæ·»åŠ é¢å¤–çš„ä»£ç ã€‚</p><p>åœ¨è½¯ä»¶æ¶æ„ä¸­ï¼Œ<code>Sidecar</code> é™„åŠ åˆ°ä¸»åº”ç”¨ï¼Œæˆ–è€…å«çˆ¶åº”ç”¨ä¸Šï¼Œä»¥æ‰©å±•ã€å¢å¼ºåŠŸèƒ½ç‰¹æ€§ï¼ŒåŒæ—¶ <code>Sidecar</code> ä¸ä¸»åº”ç”¨æ˜¯<strong>æ¾è€¦åˆ</strong>çš„ã€‚</p><div class="alert info"><p><code>Sidecar</code> æ˜¯ä¸€ç§å•èŠ‚ç‚¹å¤šå®¹å™¨çš„åº”ç”¨è®¾è®¡å½¢å¼ï¼Œä¸»å¼ ä»¥é¢å¤–çš„å®¹å™¨æ¥æ‰©å±•æˆ–å¢å¼ºä¸»å®¹å™¨ã€‚</p></div><p>2.<code>Envoy</code> çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ<br><code>Envoy</code> æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ï¼Œæ—¨åœ¨ä¸æ¯ä¸ªåº”ç”¨ç¨‹åºæœåŠ¡å™¨ä¸€èµ·è¿è¡Œã€‚æ‰€æœ‰ <code>Envoy</code> ç»„æˆäº†ä¸€ä¸ªé€æ˜çš„é€šä¿¡ç½‘æ ¼ï¼Œå…¶ä¸­æ¯ä¸ªåº”ç”¨ç¨‹åºå‘é€å’Œæ¥æ”¶æ¥è‡ªæœ¬åœ°ä¸»æœºçš„æ¶ˆæ¯ï¼Œå¹¶ä¸”ä¸éœ€è¦çŸ¥é“ç½‘ç»œæ‹“æ‰‘ã€‚</p><p>ä¸ä¼ ç»Ÿçš„æœåŠ¡é€šä¿¡æœåŠ¡çš„åº“æ–¹æ³•ç›¸æ¯”ï¼Œ<strong>è¿›ç¨‹å¤–æ¶æ„</strong>æœ‰ä¸¤ä¸ªå®è´¨æ€§å¥½å¤„ï¼š</p><ul><li><code>Envoy</code> æ”¯æŒä»»ä½•ç¼–ç¨‹è¯­è¨€å†™çš„æœåŠ¡ã€‚åªç”¨éƒ¨ç½²ä¸€ä¸ª <code>Envoy</code> å°±å¯ä»¥åœ¨ <code>Java</code>ã€<code>C++</code>ã€<code>Go</code>ã€<code>PHP</code>ã€<code>Python</code> ç­‰æœåŠ¡é—´å½¢æˆç½‘æ ¼ã€‚</li><li>ä»»ä½•ä½¿ç”¨è¿‡å¤§å‹é¢å‘æœåŠ¡çš„ä½“ç³»ç»“æ„çš„äººéƒ½çŸ¥é“ï¼Œéƒ¨ç½²åº“å‡çº§å¯èƒ½ä¼šéå¸¸ç—›è‹¦ã€‚<code>Envoy</code> å¯ä»¥åœ¨æ•´ä¸ªåŸºç¡€è®¾æ–½ä¸­è¿…é€Ÿéƒ¨ç½²å’Œå‡çº§ã€‚</li></ul><div class="alert success"><p><code>Envoy</code> ä»¥é€æ˜çš„æ–¹å¼å¼¥åˆäº†é¢å‘æœåŠ¡çš„ä½“ç³»ç»“æ„ä½¿ç”¨å¤šä¸ªåº”ç”¨ç¨‹åºæ¡†æ¶å’Œè¯­è¨€çš„æƒ…å†µã€‚</p></div><p>3.<code>Mixer</code><br><code>Mixer</code> æ˜¯ä¸€ä¸ªç‹¬ç«‹äºå¹³å°çš„ç»„ä»¶ï¼Œè´Ÿè´£åœ¨æœåŠ¡ç½‘æ ¼ä¸Šæ‰§è¡Œ<strong>è®¿é—®æ§åˆ¶</strong>å’Œ<strong>ä½¿ç”¨ç­–ç•¥</strong>ï¼Œå¹¶ä» <code>Envoy</code> ä»£ç†å’Œå…¶ä»–æœåŠ¡æ”¶é›†é¥æµ‹æ•°æ®ï¼Œä»£ç†æå–è¯·æ±‚çº§å±æ€§ï¼Œå‘é€åˆ° <code>Mixer</code> è¿›è¡Œè¯„ä¼°ã€‚æœ‰å…³å±æ€§æå–å’Œç­–ç•¥è¯„ä¼°çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ <code>Mixer</code> é…ç½®ã€‚</p><p><code>Mixer</code> ä¸­åŒ…æ‹¬ä¸€ä¸ªçµæ´»çš„æ’ä»¶æ¨¡å‹ï¼Œä½¿å…¶èƒ½å¤Ÿæ¥å…¥åˆ°å„ç§ä¸»æœºç¯å¢ƒå’ŒåŸºç¡€è®¾æ–½åç«¯ï¼Œä»è¿™äº›ç»†èŠ‚ä¸­æŠ½è±¡å‡º <code>Envoy</code> ä»£ç†å’Œ <code>Istio</code> ç®¡ç†çš„æœåŠ¡ã€‚</p><p>4.<code>Pilot</code><br>æ§åˆ¶é¢ä¸­è´Ÿè´£æµé‡ç®¡ç†çš„ç»„ä»¶ä¸º <code>Pilot</code>ï¼Œå®ƒä¸º <code>Envoy Sidecar</code> æä¾›æœåŠ¡å‘ç°åŠŸèƒ½ï¼Œä¸ºæ™ºèƒ½è·¯ç”±ï¼ˆä¾‹å¦‚ <code>A/B</code> æµ‹è¯•ã€é‡‘ä¸é›€éƒ¨ç½²ç­‰ï¼‰å’Œå¼¹æ€§ï¼ˆè¶…æ—¶ã€é‡è¯•ã€ç†”æ–­å™¨ç­‰ï¼‰æä¾›æµé‡ç®¡ç†åŠŸèƒ½ã€‚å®ƒå°†æ§åˆ¶æµé‡è¡Œä¸ºçš„é«˜çº§è·¯ç”±è§„åˆ™è½¬æ¢ä¸ºç‰¹å®šäº <code>Envoy</code> çš„é…ç½®ï¼Œå¹¶åœ¨è¿è¡Œæ—¶å°†å®ƒä»¬ä¼ æ’­åˆ° <code>Sidecar</code>ã€‚</p><p>5.<code>Istio</code> å¦‚ä½•ä¿è¯æœåŠ¡é€šä¿¡çš„å®‰å…¨ï¼Ÿ</p><ul><li><p><code>Istio</code> ä»¥å¯æ‰©ç¼©çš„æ–¹å¼ç®¡ç†å¾®æœåŠ¡é—´é€šä¿¡çš„<strong>èº«ä»½éªŒè¯ã€æˆæƒå’ŒåŠ å¯†</strong>ã€‚<code>Istio</code> æä¾›åŸºç¡€çš„å®‰å…¨é€šä¿¡æ¸ é“ï¼Œä½¿å¼€å‘è€…å¯ä»¥ä¸“æ³¨äº<strong>åº”ç”¨å±‚çº§</strong>çš„å®‰å…¨ã€‚</p></li><li><p><code>Istio</code> å¯ä»¥<strong>å¢å¼ºå¾®æœåŠ¡åŠå…¶é€šä¿¡</strong>ï¼ˆåŒ…æ‹¬æœåŠ¡åˆ°æœåŠ¡å’Œæœ€ç»ˆç”¨æˆ·åˆ°æœåŠ¡çš„é€šä¿¡ï¼‰çš„å®‰å…¨æ€§ï¼Œä¸”ä¸éœ€è¦æ›´æ”¹æœåŠ¡ä»£ç ã€‚</p><div class="alert info"><p>å®ƒä¸ºæ¯ä¸ªæœåŠ¡æä¾›åŸºäºè§’è‰²çš„å¼ºå¤§èº«ä»½æœºåˆ¶ï¼Œä»¥å®ç°è·¨é›†ç¾¤ã€è·¨äº‘ç«¯çš„äº’æ“ä½œæ€§ã€‚</p></div></li></ul><ul><li><p>å¦‚æœæˆ‘ä»¬ç»“åˆä½¿ç”¨ <code>Istio</code> ä¸ <code>Kubernetes</code>ï¼ˆæˆ–åŸºç¡€æ¶æ„ï¼‰ç½‘ç»œæ”¿ç­–ï¼Œ<code>Pod</code> åˆ° <code>Pod</code> æˆ–æœåŠ¡åˆ°æœåŠ¡çš„é€šä¿¡åœ¨ç½‘ç»œå±‚å’Œåº”ç”¨å±‚éƒ½å°†å®‰å…¨æ— è™ã€‚<code>Istio</code> ä»¥ <code>Google</code> çš„<strong>æ·±åº¦é˜²å¾¡ç­–ç•¥ä¸ºåŸºç¡€</strong>æ„å»ºè€Œæˆï¼Œä»¥ç¡®ä¿å¾®æœåŠ¡é€šä¿¡çš„å®‰å…¨ã€‚</p><div class="alert success"><p>å½“æˆ‘ä»¬åœ¨ <code>Google Cloud</code> ä¸­ä½¿ç”¨ <code>Istio</code> æ—¶ï¼Œ<code>Google</code> çš„åŸºç¡€æ¶æ„å¯è®©æˆ‘ä»¬æ„å»ºçœŸæ­£å®‰å…¨çš„åº”ç”¨éƒ¨ç½²ã€‚</p></div></li><li><p><code>Istio</code> å¯ç¡®ä¿æœåŠ¡é€šä¿¡åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯å®‰å…¨çš„ï¼Œå¹¶ä¸”æˆ‘ä»¬å¯ä»¥<strong>è·¨ä¸åŒåè®®å’Œè¿è¡Œæ—¶ä¸€è‡´åœ°å®æ–½å®‰å…¨æ”¿ç­–</strong>ï¼Œè€Œåªéœ€å¯¹åº”ç”¨ç¨ä½œè°ƒæ•´ï¼Œç”šè‡³æ— éœ€è°ƒæ•´ã€‚</p></li></ul><h4 id="å…­ã€Envoy-è¿›é˜¶"><a href="#å…­ã€Envoy-è¿›é˜¶" class="headerlink" title="å…­ã€Envoy è¿›é˜¶"></a>å…­ã€Envoy è¿›é˜¶</h4><p><code>Istio</code> ä½¿ç”¨ <code>Envoy</code> ä»£ç†çš„æ‰©å±•ç‰ˆæœ¬ï¼Œ<code>Envoy</code> æ˜¯ä»¥ <code>C++</code> å¼€å‘çš„é«˜æ€§èƒ½ä»£ç†ï¼Œç”¨äº<strong>è°ƒè§£æœåŠ¡ç½‘æ ¼ä¸­æ‰€æœ‰æœåŠ¡çš„æ‰€æœ‰å…¥ç«™å’Œå‡ºç«™æµé‡</strong>ã€‚</p><p><code>Envoy</code> çš„è®¸å¤šå†…ç½®åŠŸèƒ½è¢« <code>Istio</code> å‘æ‰¬å…‰å¤§ï¼Œä¾‹å¦‚ï¼š</p><ul><li>åŠ¨æ€æœåŠ¡å‘ç°</li><li>è´Ÿè½½å‡è¡¡</li><li><code>TLS</code> ç»ˆæ­¢</li><li><code>HTTP2 &amp; gRPC</code> ä»£ç†</li><li>ç†”æ–­å™¨</li><li>å¥åº·æ£€æŸ¥ã€åŸºäºç™¾åˆ†æ¯”æµé‡æ‹†åˆ†çš„ç°åº¦å‘å¸ƒ</li><li>æ•…éšœæ³¨å…¥</li><li>ä¸°å¯Œçš„åº¦é‡æŒ‡æ ‡</li></ul><p><code>Envoy</code> åˆ†ä¸ºä¸»çº¿ç¨‹ã€å·¥ä½œçº¿ç¨‹ã€æ–‡ä»¶åˆ·æ–°çº¿ç¨‹ï¼Œå…¶ä¸­ä¸»çº¿ç¨‹å°±æ˜¯è´Ÿè´£å·¥ä½œçº¿ç¨‹å’Œæ–‡ä»¶åˆ·æ–°çº¿ç¨‹çš„ç®¡ç†å’Œè°ƒåº¦ã€‚è€Œå·¥ä½œçº¿ç¨‹ä¸»è¦è´Ÿè´£ç›‘å¬ã€è¿‡æ»¤å’Œè½¬å‘ï¼Œå·¥ä½œçº¿ç¨‹é‡Œé¢ä¼šåŒ…å«ä¸€ä¸ªç›‘å¬å™¨ï¼Œå¦‚æœæ”¶åˆ°ä¸€ä¸ªè¯·æ±‚ä¹‹åä¼šé€šè¿‡è¿‡æ»¤é“¾æ¥è¿›è¡Œæ•°æ®è¿‡æ»¤ã€‚å‰é¢ä¸¤ä¸ªéƒ½æ˜¯éé˜»å¡çš„ï¼Œå”¯ä¸€ä¸€ä¸ªé˜»å¡çš„æ˜¯è¿™ç§ <code>IO</code> æ“ä½œçš„ï¼Œä¼šä¸æ–­åœ°æŠŠå†…å­˜é‡Œé¢ä¸€äº›ç¼“å­˜è¿›è¡Œè½ç›˜ã€‚</p><p>æ€»ç»“æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å›´ç»•å¦‚ä¸‹ 5 æ–¹é¢ï¼š</p><p><strong>1.æœåŠ¡çš„åŠ¨æ€æ³¨å†Œå’Œå‘ç°</strong><br><div class="alert info"><p><code>Envoy</code> å¯ä»¥é€‰æ‹©ä½¿ç”¨ä¸€ç»„åˆ†å±‚çš„åŠ¨æ€é…ç½® <code>API</code> æ¥è¿›è¡Œé›†ä¸­ç®¡ç†ã€‚</p></div></p><p>è¿™äº›å±‚ä¸º <code>Envoy</code> æä¾›äº†åŠ¨æ€æ›´æ–°ï¼Œåç«¯ç¾¤é›†çš„ä¸»æœºã€åç«¯ç¾¤é›†æœ¬èº«ã€<code>HTTP</code> è·¯ç”±ã€ä¾¦å¬å¥—æ¥å­—å’Œé€šä¿¡åŠ å¯†ã€‚ä¸ºäº†å®ç°æ›´ç®€å•çš„éƒ¨ç½²ï¼Œåç«¯ä¸»æœºå‘ç°å¯ä»¥é€šè¿‡ <code>DNS</code> è§£æ (ç”šè‡³å®Œå…¨è·³è¿‡) å®Œæˆï¼Œå±‚ä¹Ÿå¯ä»¥æ›¿æ¢ä¸ºé™æ€é…ç½®æ–‡ä»¶ã€‚</p><p><strong>2.å¥åº·æ£€æŸ¥</strong><br>æ„å»º <code>Envoy</code> ç½‘æ ¼çš„å»ºè®®æ–¹æ³•æ˜¯å°†<strong>æœåŠ¡å‘ç°</strong>è§†ä¸ºæœ€ç»ˆä¸€è‡´çš„è¿‡ç¨‹ã€‚ <code>Envoy</code> åŒ…æ‹¬ä¸€ä¸ªè¿è¡ŒçŠ¶å†µæ£€æŸ¥å­ç³»ç»Ÿï¼Œè¯¥å­ç³»ç»Ÿå¯ä»¥é€‰æ‹©å¯¹ä¸Šæ¸¸æœåŠ¡é›†ç¾¤æ‰§è¡Œä¸»åŠ¨è¿è¡ŒçŠ¶å†µæ£€æŸ¥ã€‚</p><p>ç„¶åï¼Œ<code>Envoy</code> ä½¿ç”¨æœåŠ¡å‘ç°å’Œè¿è¡ŒçŠ¶å†µæ£€æŸ¥ä¿¡æ¯çš„è”åˆæ¥ç¡®å®šå¥åº·çš„è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ã€‚<code>Envoy</code> è¿˜æ”¯æŒé€šè¿‡<strong>å¼‚å¸¸æ£€æµ‹å­ç³»ç»Ÿ</strong>è¿›è¡Œè¢«åŠ¨è¿è¡ŒçŠ¶å†µæ£€æŸ¥ã€‚</p><p><strong>3.é«˜çº§è´Ÿè½½å‡è¡¡</strong><br><div class="alert warning"><p>åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¸åŒç»„ä»¶ä¹‹é—´çš„è´Ÿè½½å¹³è¡¡æ˜¯ä¸€ä¸ªå¤æ‚çš„é—®é¢˜ã€‚</p></div></p><p>ç”±äº <code>Envoy</code> æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ä»£ç†è€Œä¸æ˜¯åº“ï¼Œå› æ­¤å®ƒèƒ½å¤Ÿåœ¨ä¸€ä¸ªä½ç½®å®ç°<strong>é«˜çº§è´Ÿè½½å¹³è¡¡</strong>æŠ€æœ¯ï¼Œå¹¶ä½¿ä»»ä½•åº”ç”¨ç¨‹åºéƒ½å¯ä»¥è®¿é—®ã€‚</p><p>ç›®å‰ <code>Envoy</code> åŒ…æ‹¬æ”¯æŒè‡ªåŠ¨é‡è¯•ã€æ–­è·¯ã€é€šè¿‡å¤–éƒ¨é€Ÿç‡é™åˆ¶æœåŠ¡é™åˆ¶å…¨å±€é€Ÿç‡ã€è¯·æ±‚éšè—å’Œå¼‚å¸¸å€¼æ£€æµ‹ã€‚æœªæ¥è®¡åˆ’ä¸º <code>Request Racing</code> æä¾›æ”¯æŒã€‚</p><p><strong>4.å‰ç«¯/è¾¹ç¼˜ç³»ç»Ÿä»£ç†æ”¯æŒ</strong><br>è™½ç„¶ <code>Envoy</code> ä¸»è¦æ˜¯ä¸º<strong>æœåŠ¡é€šä¿¡ç³»ç»Ÿè€Œè®¾è®¡</strong>çš„ï¼Œä½†å¯¹å‰ç«¯/è¾¹ç¼˜ç³»ç»Ÿä¹Ÿæ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œå¦‚ï¼šå¯è§‚æµ‹æ€§ã€ç®¡ç†ã€ç›¸åŒçš„æœåŠ¡å‘ç°å’Œè´Ÿè½½å¹³è¡¡ç®—æ³•ç­‰ã€‚</p><p><code>Envoy</code> åŒ…å«è¶³å¤Ÿçš„åŠŸèƒ½ï¼Œä½¿å…¶å¯ç”¨ä½œå¤§å¤šæ•° <code>Web</code> åº”ç”¨æœåŠ¡ç”¨ä¾‹çš„è¾¹ç¼˜ä»£ç†ã€‚è¿™åŒ…æ‹¬ä½œä¸º <code>TLS</code> çš„ç»ˆç‚¹ã€<code>HTTP/1.1</code> å’Œ <code>HTTP/2</code> æ”¯æŒ, ä»¥åŠ <code>HTTP L7</code> è·¯ç”±ã€‚</p><p><strong>5.æœ€å¥½çš„è§‚å¯Ÿç»Ÿè®¡èƒ½åŠ›</strong><br><code>Envoy</code> çš„é¦–è¦ç›®æ ‡æ˜¯ä½¿<strong>ç½‘ç»œé€æ˜</strong>ã€‚ä½†æ˜¯åœ¨ç½‘ç»œçº§åˆ«å’Œåº”ç”¨ç¨‹åºçº§éƒ½æ— æ³•é¿å…çš„å®¹æ˜“å‡ºç°é—®é¢˜ã€‚<code>Envoy</code> åŒ…å«äº†å¯¹æ‰€æœ‰å­ç³»ç»Ÿçš„å¼ºæœ‰åŠ›çš„ç»Ÿè®¡æ”¯æŒã€‚ <code>statsd</code> å’Œå…¶ä»–å…¼å®¹çš„æ•°æ®æä¾›ç¨‹åºæ˜¯å½“å‰æ”¯æŒçš„ç»Ÿè®¡æ¥æ”¶å™¨ï¼Œæ’å…¥ä¸åŒçš„ç»Ÿè®¡æ¥æ”¶å™¨ä¹Ÿå¹¶ä¸å›°éš¾ã€‚</p><div class="alert info"><p><code>Envoy</code> å¯ä»¥é€šè¿‡ç®¡ç†ç«¯å£æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯ï¼Œè¿˜æ”¯æŒé€šè¿‡ç¬¬ä¸‰æ–¹ä¾›åº”å•†è¿›è¡Œåˆ†å¸ƒå¼è¿½è¸ªã€‚</p></div><p>æ›´å¤šè¯¦æƒ…è¯·å‚è€ƒï¼š<a href="https://www.jianshu.com/p/a6f7f46683e1?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=seo_notes&amp;utm_source=recommendation" target="_blank" rel="noopener">ä»€ä¹ˆæ˜¯ <code>Envoy</code> ?</a></p><h4 id="ä¸ƒã€æ–¹æ¡ˆç•…æƒ³"><a href="#ä¸ƒã€æ–¹æ¡ˆç•…æƒ³" class="headerlink" title="ä¸ƒã€æ–¹æ¡ˆç•…æƒ³"></a>ä¸ƒã€æ–¹æ¡ˆç•…æƒ³</h4><div class="alert success"><p>åº”ç”¨ä¸Šé¢çš„åŸç†ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰å¾ˆå¤šå…·ä½“çš„æ–¹æ¡ˆåº”ç”¨äºæ—¥å¸¸å¼€å‘ã€‚</p></div><p><strong>1.æ–¹æ¡ˆä¸€</strong>ï¼šåº”ç”¨ <code>Istio</code> æ”¹é€ å¾®æœåŠ¡<br>æ¨¡ä»¿åœ¨çº¿ä¹¦åº—çš„ä¸€ä¸ªåˆ†ç±»ï¼Œæ˜¾ç¤ºä¸€æœ¬ä¹¦çš„ä¿¡æ¯ã€‚ é¡µé¢ä¸Šä¼šæ˜¾ç¤ºä¸€æœ¬ä¹¦çš„æè¿°ï¼Œä¹¦ç±çš„ç»†èŠ‚ï¼ˆ<code>ISBN</code>ã€é¡µæ•°ç­‰ï¼‰ï¼Œä»¥åŠå…³äºè¿™æœ¬ä¹¦çš„ä¸€äº›è¯„è®ºã€‚</p><p><strong>åº”ç”¨çš„ç«¯åˆ°ç«¯æ¶æ„ï¼š</strong><code>Bookinfo</code> åº”ç”¨ä¸­çš„å‡ ä¸ªå¾®æœåŠ¡æ˜¯ç”±ä¸åŒçš„è¯­è¨€ç¼–å†™çš„ã€‚ è¿™äº›æœåŠ¡å¯¹ <code>Istio</code> å¹¶æ— ä¾èµ–ï¼Œä½†æ˜¯æ„æˆäº†ä¸€ä¸ªæœ‰ä»£è¡¨æ€§çš„æœåŠ¡ç½‘æ ¼çš„ä¾‹å­ï¼šå®ƒç”±å¤šä¸ªæœåŠ¡ã€å¤šä¸ªè¯­è¨€æ„æˆï¼Œå¹¶ä¸” <code>reviews</code> æœåŠ¡å…·æœ‰å¤šä¸ªç‰ˆæœ¬ã€‚</p><p><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/istio/before.svg" alt="Bookinfo æ¶æ„å›¾"></p><p><strong>ç”¨ <code>Istio</code> æ”¹é€ åæ¶æ„å¦‚ä¸‹ï¼š</strong>è¦åœ¨ <code>Istio</code> ä¸­è¿è¡Œè¿™ä¸€åº”ç”¨ï¼Œæ— éœ€å¯¹åº”ç”¨è‡ªèº«åšå‡ºä»»ä½•æ”¹å˜ã€‚æˆ‘ä»¬åªéœ€è¦æŠŠ <code>Envoy Sidecar</code> æ³¨å…¥åˆ°æ¯ä¸ªæœåŠ¡ä¹‹ä¸­ã€‚æœ€ç»ˆçš„éƒ¨ç½²ç»“æœå°†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/istio/after.svg" alt="Istio æ”¹é€ åæ¶æ„å›¾"></p><p>æ‰€æœ‰çš„å¾®æœåŠ¡éƒ½å’Œ <code>Envoy Sidecar</code> é›†æˆåœ¨ä¸€èµ·ï¼Œè¢«é›†æˆæœåŠ¡æ‰€æœ‰çš„<strong>å‡ºå…¥æµé‡</strong>éƒ½è¢« <code>Sidecar</code> æ‰€åŠ«æŒï¼Œè¿™æ ·å°±ä¸ºå¤–éƒ¨æ§åˆ¶å‡†å¤‡äº†æ‰€éœ€çš„ <code>Hook</code>ï¼Œç„¶åå°±å¯ä»¥åˆ©ç”¨ <code>Istio</code> æ§åˆ¶å¹³é¢ä¸ºåº”ç”¨æä¾›æœåŠ¡è·¯ç”±ã€é¥æµ‹æ•°æ®æ”¶é›†ä»¥åŠç­–ç•¥å®æ–½ç­‰åŠŸèƒ½ã€‚</p><p>æ›´å¤šç»†èŠ‚ï¼Œè¯·ç§»æ­¥ <a href="https://istio.io/latest/zh/docs/examples/bookinfo/" target="_blank" rel="noopener">å®˜ç½‘ç¤ºä¾‹</a>ã€‚</p><p><strong>2.æ–¹æ¡ˆäºŒ</strong>ï¼šç”¨ <code>Istio</code> æ”¹é€  <code>CI/CD</code> æµç¨‹<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/istio/practice.png" alt="Istio æ¶æ„å›¾"></p><p>å¯¹ä¸Šè¿°æµç¨‹å›¾ç®€å•è§£é‡Šä¸€ä¸‹ï¼š</p><ul><li>é€šè¿‡ <code>Docker</code> å¯¹ä»£ç è¿›è¡Œå®¹å™¨åŒ–å¤„ç†ï¼›</li><li>é€šè¿‡ <code>Gitlab</code> æ‰˜ç®¡ä»£ç ï¼›</li><li><code>Jenkins</code> ç›‘å¬ <code>Gitlab</code> ä¸‹çš„ä»£ç ï¼Œè§¦å‘è‡ªåŠ¨æ„å»ºï¼Œå¹¶æ‰§è¡Œ <code>Kustomize</code> æ–‡ä»¶ï¼›</li><li><code>Kustomize</code> é€šè¿‡é…ç½®æ–‡ä»¶ï¼Œè®¾ç½®äº† <code>Istio</code> çš„é…ç½®ï¼ˆæŸ“è‰²è¯†åˆ«ã€æµé‡åˆ†å‘ï¼‰ï¼Œå¹¶å¯åŠ¨ <code>K8s</code> éƒ¨ç½²åº”ç”¨ï¼›</li><li>æœ€ç»ˆæˆ‘ä»¬é€šè¿‡ <code>Rancher</code> æ¥å¯¹å¤šå®¹å™¨è¿›è¡Œç•Œé¢åŒ–ç®¡ç†ï¼›</li><li>æ‰“å¼€æµè§ˆå™¨è¿›è¡Œè®¿é—®ï¼›</li></ul><p>çœ‹åˆ°è¿™é‡Œï¼Œç›¸ä¿¡ä½ ä¹Ÿäº†è§£äº†ï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ª<strong>å‰ç«¯å¤šå®¹å™¨åŒ–éƒ¨ç½²</strong>çš„æ¡ˆä¾‹ã€‚å®ƒæœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿ</p><ul><li>é¦–å…ˆï¼Œå½“ç„¶æ˜¯ç¯å¢ƒéš”ç¦»äº†ï¼Œç ”å‘æ¯äººä¸€ä¸ªå®¹å™¨å¼€å‘ï¼Œäº’ä¸å¹²æ‰°ï¼›</li><li>å…¶æ¬¡ï¼Œæˆ‘ä»¬å¯ä»¥åšå¾ˆå¤šå°æµé‡ã€ç°åº¦å‘å¸ƒç­‰äº‹æƒ…ï¼›</li><li>è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œä¸€ç«™å¼çš„æµç¨‹ä½“éªŒï¼›</li></ul><p>å¦‚æœä½ å¯¹å®¹å™¨åŒ–è¿˜ä¸å¤ªäº†è§£ï¼Œè¯·å…ˆçœ‹çœ‹å‰é¢ä¸¤ç¯‡æ–‡ç« ï¼š<br><a href="http://jartto.wang/2020/07/04/learn-docker/"><code>Docker</code> è¾¹å­¦è¾¹ç”¨</a><br><a href="http://jartto.wang/2020/07/15/start-k8s/">ä¸€æ–‡äº†è§£ <code>Kubernetes</code></a></p><p><code>Istio</code> è¿˜æ˜¯æœ‰å¾ˆå¤šå¯åœˆå¯ç‚¹çš„åœ°æ–¹ï¼Œç›¸ä¿¡çœ‹åˆ°è¿™é‡Œä½ ä¹Ÿæœ‰äº†æ›´å…¨é¢çš„è®¤è¯†ã€‚å¦‚æœä½ æƒ³æ·±å…¥äº†è§£ï¼Œä¸å¦¨ä»”ç»†ç ”ç©¶å®˜æ–¹ç¤ºä¾‹ï¼Œå¹¶ä¸”åœ¨å®é™…é¡¹ç›®ä¸­ä¸æ–­æ‰“ç£¨ã€‚</p><h4 id="å…«ã€å‚è€ƒèµ„æ–™"><a href="#å…«ã€å‚è€ƒèµ„æ–™" class="headerlink" title="å…«ã€å‚è€ƒèµ„æ–™"></a>å…«ã€å‚è€ƒèµ„æ–™</h4><p><a href="https://istio.io/latest/zh/docs/concepts/what-is-istio/" target="_blank" rel="noopener">1.<code>Istio</code> å®˜ç½‘</a><br><a href="https://www.jianshu.com/p/a6f7f46683e1?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=seo_notes&amp;utm_source=recommendation" target="_blank" rel="noopener">2.ä»€ä¹ˆæ˜¯ <code>Envoy</code></a><br><a href="https://www.jianshu.com/p/27a742e349f7" target="_blank" rel="noopener">3.å¾®æœåŠ¡ä¹‹ <code>Service Mesh</code></a><br><a href="https://zhuanlan.zhihu.com/p/61901608" target="_blank" rel="noopener">4.ä»€ä¹ˆæ˜¯ <code>Service Mesh</code></a><br><a href="https://www.kubernetes.org.cn/3575.html" target="_blank" rel="noopener">5.<code>Istio</code> å¦‚ä½•è¿æ¥ã€ç®¡ç†å’Œä¿æŠ¤å¾®æœåŠ¡ 2.0ï¼Ÿ</a><br><a href="https://blog.csdn.net/joke59/article/details/106725749" target="_blank" rel="noopener">6.åœ¨ <code>MOSN</code> ä¸­ç©è½¬ <code>dubbo-go</code></a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¾ˆå¤šä¼ä¸šéƒ½ä¼šé¢ä¸´ä»å•ä½“åº”ç”¨å‘å¾®æœåŠ¡æ¶æ„çš„è½¬å‹ï¼Œä¹Ÿä¼šè¡ç”Ÿå‡ºæ›´å¤šçš„åˆ†å¸ƒå¼åœºæ™¯éœ€æ±‚ã€‚éšç€è§„æ¨¡å’Œå¤æ‚åº¦çš„ä¸æ–­å¢é•¿ï¼Œå¦‚ä½•æ‰èƒ½æ›´å¥½çš„ç†è§£ã€é«˜æ•ˆçš„ç®¡ç†&lt;strong&gt;æœåŠ¡ç½‘æ ¼&lt;/strong&gt;å‘¢ï¼Ÿ&lt;/p&gt;
    
    </summary>
    
    
      <category term="æŠ€æœ¯åšæ–‡" scheme="http://jartto.wang/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E6%96%87/"/>
    
    
      <category term="istio" scheme="http://jartto.wang/tags/istio/"/>
    
      <category term="k8s" scheme="http://jartto.wang/tags/k8s/"/>
    
      <category term="service mesh" scheme="http://jartto.wang/tags/service-mesh/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€æ–‡äº†è§£ Kubernetes</title>
    <link href="http://jartto.wang/2020/07/15/start-k8s/"/>
    <id>http://jartto.wang/2020/07/15/start-k8s/</id>
    <published>2020-07-14T22:12:04.000Z</published>
    <updated>2020-07-15T00:18:26.000Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://jartto.wang/2020/07/04/learn-docker/">ä¸Šä¸€èŠ‚</a>æˆ‘ä»¬ç€é‡è®²è§£äº† <code>Docker</code>ï¼Œå…¶å®é—ç•™äº†ä¸€ä¸ªå¤§é—®é¢˜ã€‚<code>Docker</code> è™½å¥½ç”¨ï¼Œä½†é¢å¯¹å¼ºå¤§çš„é›†ç¾¤ï¼Œæˆåƒä¸Šä¸‡çš„å®¹å™¨ï¼Œçªç„¶æ„Ÿè§‰ä¸é¦™äº†ã€‚<br><a id="more"></a><br>è¿™æ—¶å€™å°±éœ€è¦æˆ‘ä»¬çš„ä¸»è§’ <code>Kubernetes</code> ä¸Šåœºäº†ï¼Œå…ˆæ¥äº†è§£ä¸€ä¸‹ <code>K8s</code> çš„åŸºæœ¬æ¦‚å¿µï¼Œåé¢å†ä»‹ç»å®è·µï¼Œç”±æµ…å…¥æ·±æ­¥æ­¥ä¸ºè¥ã€‚</p><p><strong>å…³äº <code>K8s</code> çš„åŸºæœ¬æ¦‚å¿µï¼Œæˆ‘ä»¬å°†ä¼šå›´ç»•å¦‚ä¸‹ä¸ƒç‚¹å±•å¼€ï¼š</strong><br>1.<code>Docker</code> çš„ç®¡ç†ç—›ç‚¹<br>2.ä»€ä¹ˆæ˜¯ <code>K8s</code>ï¼Ÿ<br>3.äº‘æ¶æ„ &amp; äº‘åŸç”Ÿ<br>4.<code>K8s</code> æ¶æ„åŸç†<br>5.<code>K8s</code> æ ¸å¿ƒç»„ä»¶<br>6.<code>K8s</code> çš„æœåŠ¡æ³¨å†Œä¸å‘ç°<br>7.å…³é”®é—®é¢˜</p><h4 id="ä¸€ã€Docker-çš„ç®¡ç†ç—›ç‚¹"><a href="#ä¸€ã€Docker-çš„ç®¡ç†ç—›ç‚¹" class="headerlink" title="ä¸€ã€Docker çš„ç®¡ç†ç—›ç‚¹"></a>ä¸€ã€Docker çš„ç®¡ç†ç—›ç‚¹</h4><p>å¦‚æœæƒ³è¦å°† <code>Docker</code> åº”ç”¨äºåºå¤§çš„ä¸šåŠ¡å®ç°ï¼Œæ˜¯å­˜åœ¨å›°éš¾çš„<strong>ç¼–æ’</strong>ã€<strong>ç®¡ç†</strong>å’Œ<strong>è°ƒåº¦</strong>é—®é¢˜ã€‚äºæ˜¯ï¼Œæˆ‘ä»¬è¿«åˆ‡éœ€è¦ä¸€å¥—ç®¡ç†ç³»ç»Ÿï¼Œå¯¹ <code>Docker</code> åŠå®¹å™¨è¿›è¡Œæ›´é«˜çº§æ›´çµæ´»çš„ç®¡ç†ã€‚</p><p><code>Kubernetes</code> åº”è¿è€Œç”Ÿï¼<code>Kubernetes</code>ï¼Œåè¯æºäºå¸Œè…Šè¯­ï¼Œæ„ä¸ºã€Œèˆµæ‰‹ã€æˆ–ã€Œé£è¡Œå‘˜ã€ã€‚<code>Google</code> åœ¨ <code>2014</code> å¹´å¼€æºäº† <code>Kubernetes</code> é¡¹ç›®ï¼Œå»ºç«‹åœ¨ <code>Google</code> åœ¨å¤§è§„æ¨¡è¿è¡Œç”Ÿäº§å·¥ä½œè´Ÿè½½æ–¹é¢æ‹¥æœ‰åå‡ å¹´çš„ç»éªŒçš„åŸºç¡€ä¸Šï¼Œç»“åˆäº†ç¤¾åŒºä¸­æœ€å¥½çš„æƒ³æ³•å’Œå®è·µã€‚</p><div class="alert info"><p>K8s æ˜¯ Kubernetes çš„ç¼©å†™ï¼Œç”¨ 8 æ›¿ä»£äº† ã€Œuberneteã€ï¼Œä¸‹æ–‡æˆ‘ä»¬å°†ä½¿ç”¨ç®€ç§°ã€‚</p></div><h4 id="äºŒã€ä»€ä¹ˆæ˜¯-K8s-ï¼Ÿ"><a href="#äºŒã€ä»€ä¹ˆæ˜¯-K8s-ï¼Ÿ" class="headerlink" title="äºŒã€ä»€ä¹ˆæ˜¯ K8s ï¼Ÿ"></a>äºŒã€ä»€ä¹ˆæ˜¯ K8s ï¼Ÿ</h4><p><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/k8s/intro.png" alt="K8s ä»‹ç»"><br><code>K8s</code> æ˜¯ä¸€ä¸ªå¯ç§»æ¤çš„ã€å¯æ‰©å±•çš„å¼€æºå¹³å°ï¼Œç”¨äº<strong>ç®¡ç†å®¹å™¨åŒ–çš„å·¥ä½œè´Ÿè½½å’ŒæœåŠ¡ï¼Œå¯ä¿ƒè¿›å£°æ˜å¼é…ç½®å’Œè‡ªåŠ¨åŒ–</strong>ã€‚<code>K8s</code> æ‹¥æœ‰ä¸€ä¸ªåºå¤§ä¸”å¿«é€Ÿå¢é•¿çš„ç”Ÿæ€ç³»ç»Ÿã€‚<code>K8s</code> çš„æœåŠ¡ã€æ”¯æŒå’Œå·¥å…·å¹¿æ³›å¯ç”¨ã€‚</p><p>é€šè¿‡ <code>K8s</code> æˆ‘ä»¬å¯ä»¥ï¼š<br>1.å¿«é€Ÿéƒ¨ç½²åº”ç”¨<br>2.å¿«é€Ÿæ‰©å±•åº”ç”¨<br>3.æ— ç¼å¯¹æ¥æ–°çš„åº”ç”¨åŠŸèƒ½<br>4.èŠ‚çœèµ„æºï¼Œä¼˜åŒ–ç¡¬ä»¶èµ„æºçš„ä½¿ç”¨</p><p><code>K8s</code> æœ‰å¦‚ä¸‹ç‰¹ç‚¹:<br>1.å¯ç§»æ¤: æ”¯æŒå…¬æœ‰äº‘ï¼Œç§æœ‰äº‘ï¼Œæ··åˆäº‘ï¼Œå¤šé‡äº‘ <code>multi-cloud</code><br>2.å¯æ‰©å±•: æ¨¡å—åŒ–ï¼Œæ’ä»¶åŒ–ï¼Œå¯æŒ‚è½½ï¼Œå¯ç»„åˆ<br>3.è‡ªåŠ¨åŒ–: è‡ªåŠ¨éƒ¨ç½²ï¼Œè‡ªåŠ¨é‡å¯ï¼Œè‡ªåŠ¨å¤åˆ¶ï¼Œè‡ªåŠ¨ä¼¸ç¼©/æ‰©å±•</p><h4 id="ä¸‰ã€äº‘æ¶æ„-amp-äº‘åŸç”Ÿ"><a href="#ä¸‰ã€äº‘æ¶æ„-amp-äº‘åŸç”Ÿ" class="headerlink" title="ä¸‰ã€äº‘æ¶æ„ &amp; äº‘åŸç”Ÿ"></a>ä¸‰ã€äº‘æ¶æ„ &amp; äº‘åŸç”Ÿ</h4><p>1.äº‘å’Œ <code>K8s</code> æ˜¯ä»€ä¹ˆå…³ç³»<br>äº‘å°±æ˜¯ä½¿ç”¨å®¹å™¨æ„å»ºçš„ä¸€å¥—æœåŠ¡é›†ç¾¤ç½‘ç»œï¼Œäº‘ç”±å¾ˆå¤šçš„å¤§é‡å®¹å™¨æ„æˆã€‚<code>K8s</code> å°±æ˜¯ç”¨æ¥ç®¡ç†äº‘ä¸­çš„å®¹å™¨ã€‚</p><p>2.å¸¸è§å‡ ç±»äº‘æ¶æ„</p><ul><li><code>On-Premises</code> (æœ¬åœ°éƒ¨ç½²)</li><li><code>iaas</code>ï¼ˆåŸºç¡€è®¾æ–½å³æœåŠ¡ï¼‰<ul><li>ç”¨æˆ·ï¼šç§Ÿç”¨ï¼ˆè´­ä¹°|åˆ†é…æƒé™ï¼‰äº‘ä¸»æœºï¼Œç”¨æˆ·ä¸éœ€è¦è€ƒè™‘ç½‘ç»œï¼Œ<code>DNS</code>ï¼Œç¡¬ä»¶ç¯å¢ƒæ–¹é¢çš„é—®é¢˜ã€‚</li><li>è¿è¥å•†ï¼šæä¾›ç½‘ç»œï¼Œå­˜å‚¨ï¼Œ<code>DNS</code>ï¼Œè¿™æ ·æœåŠ¡å°±å«åšåŸºç¡€è®¾æ–½æœåŠ¡</li></ul></li><li><code>paas</code>ï¼ˆå¹³å°å³æœåŠ¡ï¼‰<ul><li><code>mysql/es/mq/...</code></li></ul></li><li><code>saas</code>ï¼ˆè½¯ä»¶å³æœåŠ¡ï¼‰<ul><li>é’‰é’‰</li><li>è´¢åŠ¡ç®¡ç†</li></ul></li><li><code>serverless</code><ul><li>æ— æœåŠ¡ï¼Œä¸éœ€è¦æœåŠ¡å™¨ã€‚ç«™åœ¨ç”¨æˆ·çš„è§’åº¦è€ƒè™‘é—®é¢˜ï¼Œç”¨æˆ·åªéœ€è¦ä½¿ç”¨äº‘æœåŠ¡å™¨å³å¯ï¼Œåœ¨äº‘æœåŠ¡å™¨æ‰€åœ¨çš„åŸºç¡€ç¯å¢ƒï¼Œè½¯ä»¶ç¯å¢ƒéƒ½ä¸éœ€è¦ç”¨æˆ·å…³å¿ƒã€‚</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/k8s/iaas.png" alt="å¸¸è§äº‘æ¶æ„å›¾ç¤º"></p><p>å¦‚æœè§‰å¾—ä¸å¥½ç†è§£ï¼Œæ¨èé˜…è¯»è¿™ç¯‡æ–‡ç« ï¼š<a href="https://www.zhihu.com/question/21641778/answer/62523535" target="_blank" rel="noopener">å¦‚ä½•é€šä¿—è§£é‡Š IaaSã€PaaSã€SaaS çš„åŒºåˆ«</a></p><div class="alert info"><p>å¯ä»¥é¢„è§ï¼šæœªæ¥æœåŠ¡å¼€å‘éƒ½æ˜¯ Serverlessï¼Œä¼ä¸šéƒ½æ„å»ºäº†è‡ªå·±çš„ç§æœ‰äº‘ç¯å¢ƒï¼Œæˆ–è€…æ˜¯ä½¿ç”¨å…¬æœ‰äº‘ç¯å¢ƒã€‚</p></div><p>3.äº‘åŸç”Ÿ<br>ä¸ºäº†è®©åº”ç”¨ç¨‹åºï¼ˆé¡¹ç›®ï¼ŒæœåŠ¡è½¯ä»¶ï¼‰éƒ½è¿è¡Œåœ¨äº‘ä¸Šçš„è§£å†³æ–¹æ¡ˆï¼Œè¿™æ ·çš„æ–¹æ¡ˆå«åš<strong>äº‘åŸç”Ÿ</strong>ã€‚</p><p>äº‘åŸç”Ÿæœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>å®¹å™¨åŒ–ï¼Œæ‰€æœ‰æœåŠ¡éƒ½å¿…é¡»éƒ¨ç½²åœ¨å®¹å™¨ä¸­</li><li>å¾®æœåŠ¡ï¼Œ<code>Web</code> æœåŠ¡æ¶æ„å¼æœåŠ¡æ¶æ„</li><li><code>CI/CD</code></li><li><code>DevOps</code></li></ul><h4 id="å››ã€K8s-æ¶æ„åŸç†"><a href="#å››ã€K8s-æ¶æ„åŸç†" class="headerlink" title="å››ã€K8s æ¶æ„åŸç†"></a>å››ã€K8s æ¶æ„åŸç†</h4><p>1.<code>K8s</code> æ¶æ„<br>æ¦‚æ‹¬æ¥è¯´ <code>K8s</code> æ¶æ„å°±æ˜¯ä¸€ä¸ª <code>Master</code> å¯¹åº”ä¸€ç¾¤ <code>Node</code> èŠ‚ç‚¹ã€‚</p><p><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/k8s/k8s.png" alt="K8s æ¶æ„å›¾ç¤º"></p><p>ä¸‹é¢æˆ‘ä»¬æ¥é€ä¸€ä»‹ç» <code>K8s</code> æ¶æ„å›¾ä¸­çš„ <code>Master</code> å’Œ <code>Node</code>ã€‚</p><p>2.<code>Master</code> èŠ‚ç‚¹ç»“æ„å¦‚ä¸‹ï¼š</p><ul><li><code>apiserver</code> å³ <code>K8s</code> ç½‘å…³ï¼Œæ‰€æœ‰çš„æŒ‡ä»¤è¯·æ±‚éƒ½å¿…é¡»è¦ç»è¿‡ <code>apiserver</code>ï¼›</li><li><code>scheduler</code> è°ƒåº¦å™¨ï¼Œä½¿ç”¨è°ƒåº¦ç®—æ³•ï¼ŒæŠŠè¯·æ±‚èµ„æºè°ƒåº¦åˆ°æŸä¸€ä¸ª <code>node</code> èŠ‚ç‚¹ï¼›</li><li><code>controller</code> æ§åˆ¶å™¨ï¼Œç»´æŠ¤ <code>K8s</code> èµ„æºå¯¹è±¡ï¼›</li><li><code>etcd</code> å­˜å‚¨èµ„æºå¯¹è±¡ï¼›</li></ul><p>3.<code>Node</code>èŠ‚ç‚¹</p><ul><li><code>kubelet</code> åœ¨æ¯ä¸€ä¸ª <code>node</code> èŠ‚ç‚¹éƒ½å­˜åœ¨ä¸€ä»½ï¼Œåœ¨ <code>node</code> èŠ‚ç‚¹ä¸Šçš„èµ„æºæ“ä½œæŒ‡ä»¤ç”± <code>kubelet</code> æ¥æ‰§è¡Œï¼›</li><li><code>kube-proxy</code> ä»£ç†æœåŠ¡ï¼Œå¤„ç†æœåŠ¡é—´è´Ÿè½½å‡è¡¡ï¼›</li><li><code>pod</code> æ˜¯ <code>k8s</code> ç®¡ç†çš„åŸºæœ¬å•å…ƒï¼ˆæœ€å°å•å…ƒï¼‰ï¼Œ<code>pod</code> å†…éƒ¨æ˜¯å®¹å™¨ï¼Œ<code>k8s</code> ä¸ç›´æ¥ç®¡ç†å®¹å™¨ï¼Œè€Œæ˜¯ç®¡ç†<code>pod</code>ï¼›</li><li><code>docker</code> è¿è¡Œå®¹å™¨çš„åŸºç¡€ç¯å¢ƒï¼Œå®¹å™¨å¼•æ“ï¼›</li><li><code>fluentd</code> æ—¥å¿—æ”¶é›†æœåŠ¡ï¼›</li></ul><p>åœ¨ä»‹ç»å®Œ <code>K8s</code> æ¶æ„åï¼Œæˆ‘ä»¬åˆå¼•å…¥äº†å¾ˆå¤šæŠ€æœ¯åè¯ã€‚ä¸è¦ç€æ€¥ï¼Œå…ˆæœ‰<strong>æ•´ä½“æ¦‚å¿µï¼Œå†å„ä¸ªå‡»ç ´</strong>ã€‚è¯·è€å¿ƒ<a href="http://jartto.wang/2020/07/15/start-k8s/">é˜…è¯»ä¸‹æ–‡</a>ï¼Œç›¸ä¿¡ä½ ä¸€å®šä¼šæœ‰ä¸ä¸€æ ·çš„æ”¶è·ã€‚</p><h4 id="äº”ã€K8s-æ ¸å¿ƒç»„ä»¶"><a href="#äº”ã€K8s-æ ¸å¿ƒç»„ä»¶" class="headerlink" title="äº”ã€K8s æ ¸å¿ƒç»„ä»¶"></a>äº”ã€K8s æ ¸å¿ƒç»„ä»¶</h4><p>1.<code>K8s</code> ç»„ä»¶<br><code>K8s</code> æ˜¯ç”¨æ¥ç®¡ç†å®¹å™¨ï¼Œä½†æ˜¯ä¸ç›´æ¥æ“ä½œå®¹å™¨ï¼Œæœ€å°æ“ä½œå•å…ƒæ˜¯ <code>Pod</code> ï¼ˆé—´æ¥ç®¡ç†å®¹å™¨ï¼‰</p><ul><li>ä¸€ä¸ª <code>Master</code> æœ‰ä¸€ç¾¤ <code>Node</code> èŠ‚ç‚¹ä¸ä¹‹å¯¹åº”</li><li><code>Master</code> èŠ‚ç‚¹ä¸å­˜å‚¨å®¹å™¨ï¼Œåªè´Ÿè´£è°ƒåº¦ã€ç½‘ç®¡ã€æ§åˆ¶å™¨ã€èµ„æºå¯¹è±¡å­˜å‚¨</li><li>å®¹å™¨çš„å­˜å‚¨åœ¨ <code>Node</code> èŠ‚ç‚¹ï¼Œå®¹å™¨æ˜¯å­˜å‚¨åœ¨ <code>Pod</code> å†…éƒ¨çš„ï¼‰</li><li><code>Pod</code> å†…éƒ¨å¯ä»¥æœ‰ä¸€ä¸ªå®¹å™¨ï¼Œæˆ–è€…å¤šä¸ªå®¹å™¨</li><li><code>Kubelet</code> è´Ÿè´£æœ¬åœ° <code>Pod</code> çš„ç»´æŠ¤</li><li><code>Kube-proxy</code> è´Ÿè´£è´Ÿè½½å‡è¡¡ï¼Œåœ¨å¤šä¸ª <code>Pod</code> ä¹‹é—´æ¥åšè´Ÿè½½å‡è¡¡</li></ul><p>2.<code>Pod</code> æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li><code>pod</code> ä¹Ÿæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œè¿™ä¸ªå®¹å™¨ä¸­è£…çš„æ˜¯ <code>Docker</code> åˆ›å»ºçš„å®¹å™¨ï¼Œ<code>Pod</code> ç”¨æ¥å°è£…å®¹å™¨çš„ä¸€ä¸ªå®¹å™¨ï¼Œ<code>Pod</code> æ˜¯ä¸€ä¸ªè™šæ‹ŸåŒ–åˆ†ç»„ï¼›</li><li><code>Pod</code> ç›¸å½“äºç‹¬ç«‹ä¸»æœºï¼Œå¯ä»¥å°è£…ä¸€ä¸ªæˆ–è€…å¤šä¸ªå®¹å™¨ï¼›</li></ul><div class="alert success"><p>Pod æœ‰è‡ªå·±çš„ IP åœ°å€ã€ä¸»æœºåï¼Œç›¸å½“äºä¸€å°ç‹¬ç«‹æ²™ç®±ç¯å¢ƒã€‚</p></div><p>3.<code>Pod</code> åˆ°åº•ç”¨æ¥å¹²ä»€ä¹ˆï¼Ÿ<br>é€šå¸¸æƒ…å†µä¸‹ï¼Œåœ¨æœåŠ¡éƒ¨ç½²æ—¶å€™ï¼Œä½¿ç”¨ <code>Pod</code> æ¥ç®¡ç†ä¸€ç»„ç›¸å…³çš„æœåŠ¡ã€‚ä¸€ä¸ª <code>Pod</code> ä¸­è¦ä¹ˆéƒ¨ç½²ä¸€ä¸ªæœåŠ¡ï¼Œè¦ä¹ˆéƒ¨ç½²ä¸€ç»„æœ‰å…³ç³»çš„æœåŠ¡ã€‚</p><div class="alert warning"><p>ä¸€ç»„ç›¸å…³çš„æœåŠ¡æ˜¯æŒ‡ï¼šåœ¨é“¾å¼è°ƒç”¨çš„è°ƒç”¨è¿è·¯ä¸Šçš„æœåŠ¡ã€‚</p></div><p>4.<code>Web</code> æœåŠ¡é›†ç¾¤å¦‚ä½•å®ç°ï¼Ÿ<br>å®ç°æœåŠ¡é›†ç¾¤ï¼šåªéœ€è¦å¤åˆ¶å¤šæ–¹ <code>Pod</code> çš„å‰¯æœ¬å³å¯ï¼Œè¿™ä¹Ÿæ˜¯ <code>K8s</code> ç®¡ç†çš„å…ˆè¿›ä¹‹å¤„ï¼Œ<code>K8s</code> å¦‚æœç»§ç»­æ‰©å®¹ï¼Œåªéœ€è¦æ§åˆ¶ <code>Pod</code> çš„æ•°é‡å³å¯ï¼Œç¼©å®¹é“ç†ç±»ä¼¼ã€‚</p><p>5.<code>Pod</code> åº•å±‚ç½‘ç»œï¼Œæ•°æ®å­˜å‚¨æ˜¯å¦‚ä½•è¿›è¡Œçš„ï¼Ÿ</p><ul><li><code>Pod</code> å†…éƒ¨å®¹å™¨åˆ›å»ºä¹‹å‰ï¼Œå¿…é¡»å…ˆåˆ›å»º <code>Pause</code> å®¹å™¨ï¼›</li><li>æœåŠ¡å®¹å™¨ä¹‹é—´è®¿é—® <code>localhost</code> ï¼Œç›¸å½“äºè®¿é—®æœ¬åœ°æœåŠ¡ä¸€æ ·ï¼Œæ€§èƒ½éå¸¸é«˜ï¼›</li></ul><p>6.<code>ReplicaSet</code> å‰¯æœ¬æ§åˆ¶å™¨<br>æ§åˆ¶ <code>Pod</code> å‰¯æœ¬ã€ŒæœåŠ¡é›†ç¾¤ã€çš„æ•°é‡ï¼Œæ°¸è¿œä¸é¢„æœŸè®¾å®šçš„æ•°é‡ä¿æŒä¸€è‡´å³å¯ã€‚å½“æœ‰ <code>Pod</code> æœåŠ¡å®•æœºæ—¶å€™ï¼Œå‰¯æœ¬æ§åˆ¶å™¨å°†ä¼šç«‹é©¬é‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>Pod</code>ï¼Œæ°¸è¿œä¿è¯å‰¯æœ¬ä¸ºè®¾ç½®æ•°é‡ã€‚</p><p>å‰¯æœ¬æ§åˆ¶å™¨ï¼šæ ‡ç­¾é€‰æ‹©å™¨-é€‰æ‹©ç»´æŠ¤ä¸€ç»„ç›¸å…³çš„æœåŠ¡ï¼ˆå®ƒè‡ªå·±çš„æœåŠ¡ï¼‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">selectorï¼š</span><br><span class="line">    app = web</span><br><span class="line">    Release = stable</span><br></pre></td></tr></table></figure></p><ul><li>ReplicationController å‰¯æœ¬æ§åˆ¶å™¨ï¼šå•é€‰</li><li>ReplicaSet å‰¯æœ¬æ§åˆ¶å™¨ï¼šå•é€‰ï¼Œå¤åˆé€‰æ‹©</li></ul><div class="alert danger"><p>åœ¨æ–°ç‰ˆçš„ <code>K8s</code> ä¸­ï¼Œå»ºè®®ä½¿ç”¨ <code>ReplicaSet</code> ä½œä¸ºå‰¯æœ¬æ§åˆ¶å™¨ï¼Œ<code>ReplicationController</code> ä¸å†ä½¿ç”¨äº†ã€‚</p></div><p>7.<code>Deployment</code> éƒ¨ç½²å¯¹è±¡</p><ul><li>æœåŠ¡éƒ¨ç½²ç»“æ„æ¨¡å‹</li><li>æ»šåŠ¨æ›´æ–°</li></ul><p><code>ReplicaSet</code> å‰¯æœ¬æ§åˆ¶å™¨æ§åˆ¶ <code>Pod</code> å‰¯æœ¬çš„æ•°é‡ã€‚ä½†æ˜¯ï¼Œé¡¹ç›®çš„éœ€æ±‚åœ¨ä¸æ–­è¿­ä»£ã€ä¸æ–­çš„æ›´æ–°ï¼Œé¡¹ç›®ç‰ˆæœ¬å°†ä¼šä¸åœçš„çš„å‘ç‰ˆã€‚ç‰ˆæœ¬çš„å˜åŒ–ï¼Œå¦‚ä½•åšåˆ°æœåŠ¡æ›´æ–°ï¼Ÿ</p><p>éƒ¨ç½²æ¨¡å‹ï¼š</p><ul><li><code>ReplicaSet</code> ä¸æ”¯æŒæ»šåŠ¨æ›´æ–°ï¼Œ<code>Deployment</code> å¯¹è±¡æ”¯æŒæ»šåŠ¨æ›´æ–°ï¼Œé€šå¸¸å’Œ <code>ReplicaSet</code> ä¸€èµ·ä½¿ç”¨ï¼›</li><li><code>Deployment</code> ç®¡ç† <code>ReplicaSet</code>ï¼Œ<code>RS</code> é‡æ–°å»ºç«‹æ–°çš„ <code>RS</code>ï¼Œåˆ›å»ºæ–°çš„ <code>Pod</code>ï¼›</li></ul><p>8.<code>MySQL</code> ä½¿ç”¨å®¹å™¨åŒ–éƒ¨ç½²ï¼Œå­˜åœ¨ä»€ä¹ˆæ ·çš„é—®é¢˜ï¼Ÿ</p><ul><li>å®¹å™¨æ˜¯ç”Ÿå‘½å‘¨æœŸçš„ï¼Œä¸€æ—¦å®•æœºï¼Œæ•°æ®ä¸¢å¤±</li><li><code>Pod</code> éƒ¨ç½²ï¼Œ<code>Pod</code> æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œæ•°æ®ä¸¢å¤±</li></ul><div class="alert danger"><p>å¯¹äº K8s æ¥è¯´ï¼Œä¸èƒ½ä½¿ç”¨ Deployment éƒ¨ç½²<strong>æœ‰çŠ¶æ€</strong>æœåŠ¡ã€‚</p></div><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œ<code>Deployment</code> è¢«ç”¨æ¥éƒ¨ç½²æ— çŠ¶æ€æœåŠ¡ï¼Œé‚£ä¹ˆå¯¹äºæœ‰çŠ¶æ€æœåŠ¡çš„éƒ¨ç½²ï¼Œä½¿ç”¨ <code>StatefulSet</code> è¿›è¡Œæœ‰çŠ¶æ€æœåŠ¡çš„éƒ¨ç½²ã€‚</p><p>ä»€ä¹ˆæ˜¯<strong>æœ‰çŠ¶æ€æœåŠ¡</strong>ï¼Ÿ</p><ul><li>æœ‰å®æ—¶çš„æ•°æ®éœ€è¦å­˜å‚¨</li><li>æœ‰çŠ¶æ€æœåŠ¡é›†ç¾¤ä¸­ï¼ŒæŠŠæŸä¸€ä¸ªæœåŠ¡æŠ½ç¦»å‡ºå»ï¼Œä¸€æ®µæ—¶é—´åå†åŠ å…¥æœºå™¨ç½‘ç»œï¼Œå¦‚æœé›†ç¾¤ç½‘ç»œæ— æ³•ä½¿ç”¨</li></ul><p>ä»€ä¹ˆæ˜¯<strong>æ— çŠ¶æ€æœåŠ¡</strong>ï¼Ÿ</p><ul><li>æ²¡æœ‰å®æ—¶çš„æ•°æ®éœ€è¦å­˜å‚¨</li><li>æ— çŠ¶æ€æœåŠ¡é›†ç¾¤ä¸­ï¼ŒæŠŠæŸä¸€ä¸ªæœåŠ¡æŠ½ç¦»å‡ºå»ï¼Œä¸€æ®µæ—¶é—´åå†åŠ å…¥æœºå™¨ç½‘ç»œï¼Œå¯¹é›†ç¾¤æœåŠ¡æ²¡æœ‰ä»»ä½•å½±å“</li></ul><p>9.<code>StatefulSet</code><br>ä¸ºäº†è§£å†³æœ‰çŠ¶æ€æœåŠ¡ä½¿ç”¨å®¹å™¨åŒ–éƒ¨ç½²çš„ä¸€ä¸ªé—®é¢˜ã€‚</p><ul><li>éƒ¨ç½²æ¨¡å‹</li><li>æœ‰çŠ¶æ€æœåŠ¡</li></ul><p><code>StatefulSet</code> ä¿è¯ <code>Pod</code> é‡æ–°å»ºç«‹åï¼Œ<code>Hostname</code> ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œ<code>Pod</code> å°±å¯ä»¥é€šè¿‡ <code>Hostname</code> æ¥å…³è”æ•°æ®ã€‚</p><h4 id="å…­ã€K8s-çš„æœåŠ¡æ³¨å†Œä¸å‘ç°"><a href="#å…­ã€K8s-çš„æœåŠ¡æ³¨å†Œä¸å‘ç°" class="headerlink" title="å…­ã€K8s çš„æœåŠ¡æ³¨å†Œä¸å‘ç°"></a>å…­ã€K8s çš„æœåŠ¡æ³¨å†Œä¸å‘ç°</h4><p><strong>1.<code>Pod</code> çš„ç»“æ„æ˜¯æ€æ ·çš„ï¼Ÿ</strong></p><ul><li><code>Pod</code> ç›¸å½“äºä¸€ä¸ªå®¹å™¨ï¼Œ<code>Pod</code> æœ‰ç‹¬ç«‹ <code>IP</code> åœ°å€ï¼Œä¹Ÿæœ‰è‡ªå·±çš„ <code>Hostname</code>ï¼Œåˆ©ç”¨ <code>Namespace</code> è¿›è¡Œèµ„æºéš”ç¦»ï¼Œç‹¬ç«‹æ²™ç®±ç¯å¢ƒã€‚</li><li><code>Pod</code> å†…éƒ¨å°è£…çš„æ˜¯å®¹å™¨ï¼Œå¯ä»¥å°è£…ä¸€ä¸ªï¼Œæˆ–è€…å¤šä¸ªå®¹å™¨ï¼ˆé€šå¸¸æ˜¯ä¸€ç»„ç›¸å…³çš„å®¹å™¨ï¼‰</li></ul><p><strong>2.<code>Pod</code> ç½‘ç»œ</strong></p><ul><li><code>Pod</code> æœ‰è‡ªå·±ç‹¬ç«‹çš„ <code>IP</code> åœ°å€</li><li><code>Pod</code> å†…éƒ¨å®¹å™¨ä¹‹é—´è®¿é—®é‡‡ç”¨ <code>Localhost</code> è®¿é—®</li></ul><div class="alert info"><p>Pod å†…éƒ¨å®¹å™¨è®¿é—®æ˜¯ Localhostï¼ŒPod ä¹‹é—´çš„é€šä¿¡å±äºè¿œç¨‹è®¿é—®ã€‚</p></div><p><strong>3.<code>Pod</code> æ˜¯å¦‚ä½•å¯¹å¤–æä¾›æœåŠ¡è®¿é—®çš„ï¼Ÿ</strong><br><code>Pod</code> æ˜¯è™šæ‹Ÿçš„èµ„æºå¯¹è±¡ï¼ˆè¿›ç¨‹ï¼‰ï¼Œæ²¡æœ‰å¯¹åº”å®ä½“ï¼ˆç‰©ç†æœºï¼Œç‰©ç†ç½‘å¡ï¼‰ä¸ä¹‹å¯¹åº”ï¼Œæ— æ³•ç›´æ¥å¯¹å¤–æä¾›æœåŠ¡è®¿é—®ã€‚</p><p>é‚£ä¹ˆè¯¥<strong>å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜</strong>å‘¢ï¼Ÿ<br><code>Pod</code> å¦‚æœæƒ³è¦å¯¹å¤–æä¾›æœåŠ¡ï¼Œå¿…é¡»ç»‘å®šç‰©ç†æœºç«¯å£ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨ç‰©ç†æœºä¸Šå¼€å¯ç«¯å£ï¼Œè®©è¿™ä¸ªç«¯å£å’Œ <code>Pod</code> çš„ç«¯å£è¿›è¡Œæ˜ å°„ï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡ç‰©ç†æœºè¿›è¡Œæ•°æ®åŒ…çš„è½¬å‘ã€‚</p><div class="alert success"><p>æ¦‚æ‹¬æ¥è¯´ï¼šå…ˆé€šè¿‡ç‰©ç†æœº IP + Port è¿›è¡Œè®¿é—®ï¼Œå†è¿›è¡Œæ•°æ®åŒ…è½¬å‘ã€‚</p></div><p><strong>4.ä¸€ç»„ç›¸å…³çš„ <code>Pod</code> å‰¯æœ¬ï¼Œå¦‚ä½•å®ç°è®¿é—®è´Ÿè½½å‡è¡¡ï¼Ÿ</strong><br>æˆ‘ä»¬å…ˆæ˜ç¡®ä¸€ä¸ªæ¦‚å¿µï¼Œ<code>Pod</code> æ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œæ˜¯æœ‰<strong>ç”Ÿå‘½å‘¨æœŸ</strong>çš„ã€‚å®•æœºã€ç‰ˆæœ¬æ›´æ–°ï¼Œéƒ½ä¼šåˆ›å»ºæ–°çš„ <code>Pod</code>ã€‚è¿™æ—¶å€™ <code>IP</code> åœ°å€ä¼šå‘ç”Ÿå˜åŒ–ï¼Œ<code>Hostname</code> ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä½¿ç”¨ <code>Nginx</code> åšè´Ÿè½½å‡è¡¡å°±ä¸å¤ªåˆé€‚äº†ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¾èµ– <code>Service</code> çš„èƒ½åŠ›ã€‚</p><p><strong>5.<code>Service</code> å¦‚ä½•å®ç°è´Ÿè½½å‡è¡¡ï¼Ÿ</strong><br>ç®€å•æ¥è¯´ï¼Œ<code>Service</code> èµ„æºå¯¹è±¡åŒ…æ‹¬å¦‚ä¸‹ä¸‰éƒ¨åˆ†ï¼š</p><ul><li><code>Pod IP</code>ï¼š<code>Pod</code> çš„ <code>IP</code> åœ°å€</li><li><code>Node IP</code>ï¼šç‰©ç†æœº <code>IP</code> åœ°å€</li><li><code>Cluster IP</code>ï¼šè™šæ‹Ÿ <code>IP</code> ï¼Œæ˜¯ç”± <code>K8s</code> æŠ½è±¡å‡ºçš„ <code>Service</code> å¯¹è±¡ï¼Œè¿™ä¸ª <code>Service</code> å¯¹è±¡å°±æ˜¯ä¸€ä¸ª <code>VIP</code> çš„èµ„æºå¯¹è±¡</li></ul><p><strong>6.<code>Service VIP</code> æ›´æ·±å…¥åŸç†æ¢è®¨</strong></p><ul><li><code>Service</code> å’Œ <code>Pod</code> éƒ½æ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œ<code>Service</code> ä¹Ÿä¸èƒ½å¯¹å¤–ç½‘æä¾›æœåŠ¡ï¼›</li><li><code>Service</code> å’Œ <code>Pod</code> ä¹‹é—´å¯ä»¥ç›´æ¥è¿›è¡Œé€šä¿¡ï¼Œå®ƒä»¬çš„é€šä¿¡å±äºå±€åŸŸç½‘é€šä¿¡ï¼›</li><li>æŠŠè¯·æ±‚äº¤ç»™ <code>Service</code> åï¼Œ<code>Service</code> ä½¿ç”¨ <code>iptable</code>ï¼Œ<code>ipvs</code> åšæ•°æ®åŒ…çš„åˆ†å‘ï¼›</li></ul><p><strong>7.<code>Service</code> å¯¹è±¡æ˜¯å¦‚ä½•å’Œ <code>Pod</code> è¿›è¡Œå…³è”çš„ï¼Ÿ</strong></p><ul><li>ä¸åŒçš„ä¸šåŠ¡æœ‰ä¸åŒçš„ <code>Service</code>ï¼›</li><li><code>Service</code> å’Œ <code>Pod</code> é€šè¿‡æ ‡ç­¾é€‰æ‹©å™¨è¿›è¡Œå…³è”ï¼›  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">selectorï¼š</span><br><span class="line">    app=x é€‰æ‹©ä¸€ç»„è®¢å•çš„æœåŠ¡ pod ï¼Œåˆ›å»ºä¸€ä¸ª serviceï¼›</span><br><span class="line">    é€šè¿‡ endpoints å­˜æ”¾ä¸€ç»„ pod ipï¼›</span><br></pre></td></tr></table></figure></li></ul><p><code>Service</code> é€šè¿‡æ ‡ç­¾é€‰æ‹©å™¨é€‰æ‹©ä¸€ç»„ç›¸å…³çš„å‰¯æœ¬ï¼Œç„¶ååˆ›å»ºä¸€ä¸ª <code>Service</code>ã€‚</p><p><strong>8.<code>Pod</code> å®•æœºã€å‘å¸ƒæ–°çš„ç‰ˆæœ¬çš„æ—¶å€™ï¼Œ<code>Service</code> å¦‚ä½•å‘ç° <code>Pod</code> å·²ç»å‘ç”Ÿäº†å˜åŒ–ï¼Ÿ</strong><br>æ¯ä¸ª <code>Pod</code> ä¸­éƒ½æœ‰ <code>Kube-Proxy</code>ï¼Œç›‘å¬æ‰€æœ‰ <code>Pod</code>ã€‚å¦‚æœå‘ç° <code>Pod</code> æœ‰å˜åŒ–ï¼Œå°±åŠ¨æ€æ›´æ–°ï¼ˆ<code>etcd</code> ä¸­å­˜å‚¨ï¼‰å¯¹åº”çš„ <code>IP</code> æ˜ å°„å…³ç³»ã€‚</p><h4 id="ä¸ƒã€å…³é”®é—®é¢˜"><a href="#ä¸ƒã€å…³é”®é—®é¢˜" class="headerlink" title="ä¸ƒã€å…³é”®é—®é¢˜"></a>ä¸ƒã€å…³é”®é—®é¢˜</h4><p><strong>1.ä¼ä¸šä½¿ç”¨ <code>K8s</code> ä¸»è¦ç”¨æ¥åšä»€ä¹ˆï¼Ÿ</strong></p><ul><li><p><strong>è‡ªåŠ¨åŒ–è¿ç»´å¹³å°</strong><br>åˆ›ä¸šå‹å…¬å¸ï¼Œä¸­å°å‹ä¼ä¸šï¼Œä½¿ç”¨ <code>K8s</code> æ„å»ºä¸€å¥—è‡ªåŠ¨åŒ–è¿ç»´å¹³å°ï¼Œè‡ªåŠ¨ç»´æŠ¤æœåŠ¡æ•°é‡ï¼Œä¿æŒæœåŠ¡æ°¸è¿œå’Œé¢„æœŸçš„æ•°æ®ä¿æŒä¸€è‡´æ€§ï¼Œè®©æœåŠ¡å¯ä»¥æ°¸è¿œæä¾›æœåŠ¡ã€‚è¿™æ ·æœ€ç›´æ¥çš„å¥½å¤„å°±æ˜¯é™æœ¬å¢æ•ˆã€‚</p></li><li><p><strong>å……åˆ†åˆ©ç”¨æœåŠ¡å™¨èµ„æº</strong><br>äº’è”ç½‘ä¼ä¸šï¼Œæœ‰å¾ˆå¤šæœåŠ¡å™¨èµ„æºã€Œç‰©ç†æœºã€ï¼Œä¸ºäº†å……åˆ†åˆ©ç”¨æœåŠ¡å™¨èµ„æºï¼Œä½¿ç”¨ <code>K8s</code> æ„å»ºç§æœ‰äº‘ç¯å¢ƒï¼Œé¡¹ç›®è¿è¡Œåœ¨äº‘ã€‚<strong>è¿™åœ¨å¤§å‹äº’è”ç½‘å…¬å¸å°¤ä¸ºé‡è¦</strong>ã€‚</p></li><li><p><strong>æœåŠ¡çš„æ— ç¼è¿ç§»</strong><br>é¡¹ç›®å¼€å‘ä¸­ï¼Œäº§å“éœ€æ±‚ä¸åœçš„è¿­ä»£ï¼Œæ›´æ–°äº§å“ã€‚è¿™å°±æ„å‘³ç€é¡¹ç›®ä¸åœçš„å‘å¸ƒæ–°çš„ç‰ˆæœ¬ï¼Œè€Œ <code>K8s</code> å¯ä»¥å®ç°é¡¹ç›®ä»å¼€å‘åˆ°ç”Ÿäº§æ— ç¼è¿ç§»ã€‚</p></li></ul><p><strong>2.<code>K8s</code> æœåŠ¡çš„è´Ÿè½½å‡è¡¡æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</strong><br><code>Pod</code> ä¸­çš„å®¹å™¨å¾ˆå¯èƒ½å› ä¸ºå„ç§åŸå› å‘ç”Ÿæ•…éšœè€Œæ­»æ‰ã€‚<code>Deployment</code> ç­‰ <code>Controller</code> ä¼šé€šè¿‡åŠ¨æ€åˆ›å»ºå’Œé”€æ¯ <code>Pod</code> æ¥ä¿è¯åº”ç”¨æ•´ä½“çš„å¥å£®æ€§ã€‚æ¢å¥è¯è¯´ï¼Œ<code>Pod</code> æ˜¯è„†å¼±çš„ï¼Œä½†åº”ç”¨æ˜¯å¥å£®çš„ã€‚æ¯ä¸ª <code>Pod</code> éƒ½æœ‰è‡ªå·±çš„ <code>IP</code> åœ°å€ã€‚å½“ <code>controller</code> ç”¨æ–° <code>Pod</code> æ›¿ä»£å‘ç”Ÿæ•…éšœçš„ <code>Pod</code> æ—¶ï¼Œæ–° <code>Pod</code> ä¼šåˆ†é…åˆ°æ–°çš„ <code>IP</code> åœ°å€ã€‚</p><p>è¿™æ ·å°±äº§ç”Ÿäº†ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœä¸€ç»„ <code>Pod</code> å¯¹å¤–æä¾›æœåŠ¡ï¼ˆæ¯”å¦‚ <code>HTTP</code>ï¼‰ï¼Œå®ƒä»¬çš„ <code>IP</code> å¾ˆæœ‰å¯èƒ½å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯å¦‚ä½•æ‰¾åˆ°å¹¶è®¿é—®è¿™ä¸ªæœåŠ¡å‘¢ï¼Ÿ</p><p><code>K8s</code> ç»™å‡ºçš„è§£å†³æ–¹æ¡ˆæ˜¯ <code>Service</code>ã€‚ <code>Kubernetes Service</code> ä»é€»è¾‘ä¸Šä»£è¡¨äº†ä¸€ç»„ <code>Pod</code>ï¼Œå…·ä½“æ˜¯å“ªäº› <code>Pod</code> åˆ™æ˜¯ç”± <code>Label</code> æ¥æŒ‘é€‰ã€‚</p><p><code>Service</code> æœ‰è‡ªå·± <code>IP</code>ï¼Œè€Œä¸”è¿™ä¸ª <code>IP</code> æ˜¯ä¸å˜çš„ã€‚å®¢æˆ·ç«¯åªéœ€è¦è®¿é—® <code>Service</code> çš„ <code>IP</code>ï¼Œ<code>K8s</code> åˆ™è´Ÿè´£å»ºç«‹å’Œç»´æŠ¤ <code>Service</code> ä¸ <code>Pod</code> çš„æ˜ å°„å…³ç³»ã€‚æ— è®ºåç«¯ <code>Pod</code> å¦‚ä½•å˜åŒ–ï¼Œå¯¹å®¢æˆ·ç«¯ä¸ä¼šæœ‰ä»»ä½•å½±å“ï¼Œå› ä¸º <code>Service</code> æ²¡æœ‰å˜ã€‚</p><p><strong>3.æ— çŠ¶æ€æœåŠ¡ä¸€èˆ¬ä½¿ç”¨ä»€ä¹ˆæ–¹å¼è¿›è¡Œéƒ¨ç½²ï¼Ÿ</strong><br><code>Deployment</code> ä¸º <code>Pod</code> å’Œ <code>ReplicaSet</code> æä¾›äº†ä¸€ä¸ª å£°æ˜å¼å®šä¹‰æ–¹æ³•ï¼Œé€šå¸¸è¢«ç”¨æ¥éƒ¨ç½²æ— çŠ¶æ€æœåŠ¡ã€‚</p><p><code>Deployment</code> çš„ä¸»è¦ä½œç”¨ï¼š<br>å®šä¹‰ <code>Deployment</code> æ¥åˆ›å»º <code>Pod</code> å’Œ <code>ReplicaSet</code> æ»šåŠ¨å‡çº§å’Œå›æ»šåº”ç”¨æ‰©å®¹å’Œç´¢å®¹æš‚åœå’Œç»§ç»­ã€‚<code>Deployment</code>ä¸ä»…ä»…å¯ä»¥æ»šåŠ¨æ›´æ–°ï¼Œè€Œä¸”å¯ä»¥è¿›è¡Œå›æ»šï¼Œå¦‚æœå‘ç°å‡çº§åˆ° <code>V2</code> ç‰ˆæœ¬åï¼ŒæœåŠ¡ä¸å¯ç”¨ï¼Œå¯ä»¥è¿…é€Ÿå›æ»šåˆ° <code>V1</code> ç‰ˆæœ¬ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;http://jartto.wang/2020/07/04/learn-docker/&quot;&gt;ä¸Šä¸€èŠ‚&lt;/a&gt;æˆ‘ä»¬ç€é‡è®²è§£äº† &lt;code&gt;Docker&lt;/code&gt;ï¼Œå…¶å®é—ç•™äº†ä¸€ä¸ªå¤§é—®é¢˜ã€‚&lt;code&gt;Docker&lt;/code&gt; è™½å¥½ç”¨ï¼Œä½†é¢å¯¹å¼ºå¤§çš„é›†ç¾¤ï¼Œæˆåƒä¸Šä¸‡çš„å®¹å™¨ï¼Œçªç„¶æ„Ÿè§‰ä¸é¦™äº†ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="æŠ€æœ¯åšæ–‡" scheme="http://jartto.wang/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E6%96%87/"/>
    
    
      <category term="docker" scheme="http://jartto.wang/tags/docker/"/>
    
      <category term="k8s" scheme="http://jartto.wang/tags/k8s/"/>
    
  </entry>
  
  <entry>
    <title>Docker è¾¹å­¦è¾¹ç”¨</title>
    <link href="http://jartto.wang/2020/07/04/learn-docker/"/>
    <id>http://jartto.wang/2020/07/04/learn-docker/</id>
    <published>2020-07-04T14:10:13.000Z</published>
    <updated>2020-07-09T23:18:19.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¯Œ <code>Web</code> æ—¶ä»£ï¼Œåº”ç”¨å˜å¾—è¶Šæ¥è¶Šå¼ºå¤§ï¼Œä¸æ­¤åŒæ—¶ä¹Ÿè¶Šæ¥è¶Šå¤æ‚ã€‚é›†ç¾¤éƒ¨ç½²ã€éš”ç¦»ç¯å¢ƒã€ç°åº¦å‘å¸ƒä»¥åŠåŠ¨æ€æ‰©å®¹ç¼ºä¸€ä¸å¯ï¼Œè€Œå®¹å™¨åŒ–åˆ™æˆä¸ºä¸­é—´çš„å¿…è¦æ¡¥æ¢ã€‚<br><a id="more"></a><br>æœ¬èŠ‚æˆ‘ä»¬å°±æ¥æ¢ç´¢ä¸€ä¸‹ <code>Docker</code> çš„ç¥ç§˜ä¸–ç•Œï¼Œä»é›¶åˆ°ä¸€æŒæ¡ <code>Docker</code> çš„åŸºæœ¬åŸç†ä¸å®è·µæ“ä½œã€‚åˆ«å†å®ˆç€å‰ç«¯é‚£ä¸€äº©ä¸‰åˆ†åœ°ï¼Œæ˜¯æ—¶å€™è¯¥å¼€ç–†æ‰©åœŸäº†ã€‚</p><p>æˆ‘ä»¬å°†ä¼šå›´ç»•ä¸‹é¢å‡ ç‚¹å±•å¼€ï¼š<br>1.è®²ä¸ªæ•…äº‹<br>2.è™šæ‹Ÿæœºä¸å®¹å™¨<br>3.è®¤è¯† <code>Docker</code><br>4.æ ¸å¿ƒæ¦‚å¿µ<br>5.å®‰è£… <code>Docker</code><br>6.å¿«é€Ÿå¼€å§‹<br>7.å¸¸è§„æ“ä½œ<br>8.æœ€ä½³å®è·µ</p><h4 id="ä¸€ã€è®²ä¸ªæ•…äº‹"><a href="#ä¸€ã€è®²ä¸ªæ•…äº‹" class="headerlink" title="ä¸€ã€è®²ä¸ªæ•…äº‹"></a>ä¸€ã€è®²ä¸ªæ•…äº‹</h4><p>ä¸ºäº†æ›´å¥½çš„ç†è§£ <code>Docker</code> æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬å…ˆæ¥è®²ä¸ª<a href="https://my.oschina.net/jamesview/blog/2994112" target="_blank" rel="noopener">æ•…äº‹</a>ï¼š</p><p>æˆ‘éœ€è¦ç›–ä¸€ä¸ªæˆ¿å­ï¼Œäºæ˜¯æˆ‘æ¬çŸ³å¤´ã€ç æœ¨å¤´ã€ç”»å›¾çº¸ã€ç›–æˆ¿å­ã€‚ä¸€é¡¿æ“ä½œï¼Œç»ˆäºæŠŠè¿™ä¸ªæˆ¿å­ç›–å¥½äº†ã€‚<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/docker/store1.png" alt="ç›–æˆ¿å­"></p><p>ç»“æœï¼Œä½äº†ä¸€æ®µæ—¶é—´ï¼Œå¿ƒè¡€æ¥æ½®æƒ³æ¬åˆ°æµ·è¾¹å»ã€‚è¿™æ—¶å€™æŒ‰ä»¥å¾€çš„åŠæ³•ï¼Œæˆ‘åªèƒ½å»æµ·è¾¹ï¼Œå†æ¬¡æ¬çŸ³å¤´ã€ç æœ¨å¤´ã€ç”»å›¾çº¸ã€ç›–æˆ¿å­ã€‚<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/docker/store2.png" alt="é‡å¤ç›–æˆ¿"></p><p>çƒ¦æ¼ä¹‹é™…ï¼Œè·‘æ¥ä¸€ä¸ªé­”æ³•å¸ˆæ•™ä¼šæˆ‘ä¸€ç§é­”æ³•ã€‚è¿™ç§é­”æ³•å¯ä»¥æŠŠæˆ‘ç›–å¥½çš„æˆ¿å­å¤åˆ¶ä¸€ä»½ï¼Œåšæˆã€Œé•œåƒã€ï¼Œæ”¾åœ¨æˆ‘çš„èƒŒåŒ…é‡Œã€‚</p><p><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/docker/store3.png" alt="é»‘é­”æ³•"></p><p>ç­‰æˆ‘åˆ°äº†æµ·è¾¹ï¼Œå°±ç”¨è¿™ä¸ªã€Œé•œåƒã€ï¼Œå¤åˆ¶ä¸€å¥—æˆ¿å­ï¼Œæ‹åŒ…å…¥ä½ã€‚</p><p>æ˜¯ä¸æ˜¯å¾ˆç¥å¥‡ï¼Ÿå¯¹åº”åˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸­æ¥ï¼Œæˆ¿å­å°±æ˜¯é¡¹ç›®æœ¬èº«ï¼Œé•œåƒå°±æ˜¯é¡¹ç›®çš„å¤åˆ¶ï¼ŒèƒŒåŒ…å°±æ˜¯é•œåƒä»“åº“ã€‚å¦‚æœè¦åŠ¨æ€æ‰©å®¹ï¼Œä»ä»“åº“ä¸­å–å‡ºé¡¹ç›®é•œåƒï¼Œéšä¾¿å¤åˆ¶å°±å¯ä»¥äº†ã€‚Buildâ€‚onceï¼ŒRunâ€‚anywhere!</p><div class="alert info"><p>ä¸ç”¨å†å…³æ³¨ç‰ˆæœ¬ã€å…¼å®¹ã€éƒ¨ç½²ç­‰é—®é¢˜ï¼Œå½»åº•è§£å†³äº†ã€Œä¸Šçº¿å³å´©ï¼Œæ— ä¼‘æ­¢æ„å»ºã€çš„å°´å°¬ã€‚</p></div><h4 id="äºŒã€è™šæ‹Ÿæœºä¸å®¹å™¨"><a href="#äºŒã€è™šæ‹Ÿæœºä¸å®¹å™¨" class="headerlink" title="äºŒã€è™šæ‹Ÿæœºä¸å®¹å™¨"></a>äºŒã€è™šæ‹Ÿæœºä¸å®¹å™¨</h4><p>å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬æ¥åšä¸€äº›åŸºç¡€çŸ¥è¯†çš„å‚¨å¤‡ï¼š</p><p>1.<strong>è™šæ‹Ÿæœº</strong>ï¼šè™šæ‹ŸåŒ–ç¡¬ä»¶<br>è™šæ‹Ÿæœº <code>Virtual Machine</code> æŒ‡é€šè¿‡è½¯ä»¶æ¨¡æ‹Ÿçš„<strong>å…·æœ‰å®Œæ•´ç¡¬ä»¶ç³»ç»ŸåŠŸèƒ½çš„ã€è¿è¡Œåœ¨ä¸€ä¸ªå®Œå…¨éš”ç¦»ç¯å¢ƒä¸­çš„å®Œæ•´è®¡ç®—æœºç³»ç»Ÿ</strong>ã€‚åœ¨å®ä½“è®¡ç®—æœºä¸­èƒ½å¤Ÿå®Œæˆçš„å·¥ä½œåœ¨è™šæ‹Ÿæœºä¸­éƒ½èƒ½å¤Ÿå®ç°ã€‚</p><p>åœ¨è®¡ç®—æœºä¸­åˆ›å»ºè™šæ‹Ÿæœºæ—¶ï¼Œéœ€è¦å°†å®ä½“æœºçš„éƒ¨åˆ†ç¡¬ç›˜å’Œå†…å­˜å®¹é‡ä½œä¸ºè™šæ‹Ÿæœºçš„ç¡¬ç›˜å’Œå†…å­˜å®¹é‡ã€‚<strong>æ¯ä¸ªè™šæ‹Ÿæœºéƒ½æœ‰ç‹¬ç«‹çš„ <code>CMOS</code>ã€ç¡¬ç›˜å’Œæ“ä½œç³»ç»Ÿï¼Œå¯ä»¥åƒä½¿ç”¨å®ä½“æœºä¸€æ ·å¯¹è™šæ‹Ÿæœºè¿›è¡Œæ“ä½œ</strong>ã€‚åœ¨å®¹å™¨æŠ€æœ¯ä¹‹å‰ï¼Œä¸šç•Œçš„ç½‘çº¢æ˜¯è™šæ‹Ÿæœºã€‚</p><p>è™šæ‹ŸæœºæŠ€æœ¯çš„ä»£è¡¨ï¼Œæ˜¯ <code>VMWare</code> å’Œ <code>OpenStack</code>ã€‚æ›´å¤šè¯·å‚çœ‹<a href="https://baike.baidu.com/item/è™šæ‹Ÿæœº/104440?fr=aladdin" target="_blank" rel="noopener">ç™¾ç§‘è™šæ‹Ÿæœº</a>ã€‚</p><p>2.<strong>å®¹å™¨</strong>ï¼šå°†æ“ä½œç³»ç»Ÿå±‚è™šæ‹ŸåŒ–ï¼Œæ˜¯ä¸€ä¸ªæ ‡å‡†çš„è½¯ä»¶å•å…ƒ</p><ul><li>éšå¤„è¿è¡Œï¼šå®¹å™¨å¯ä»¥å°†ä»£ç ä¸é…ç½®æ–‡ä»¶å’Œç›¸å…³ä¾èµ–åº“è¿›è¡Œæ‰“åŒ…ï¼Œä»è€Œç¡®ä¿åœ¨ä»»ä½•ç¯å¢ƒä¸‹çš„è¿è¡Œéƒ½æ˜¯ä¸€è‡´çš„ã€‚</li><li>é«˜èµ„æºåˆ©ç”¨ç‡ï¼šå®¹å™¨æä¾›è¿›ç¨‹çº§çš„éš”ç¦»ï¼Œå› æ­¤å¯ä»¥æ›´åŠ ç²¾ç»†åœ°è®¾ç½® <code>CPU</code> å’Œå†…å­˜çš„ä½¿ç”¨ç‡ï¼Œè¿›è€Œæ›´å¥½åœ°åˆ©ç”¨æœåŠ¡å™¨çš„è®¡ç®—èµ„æºã€‚</li><li>å¿«é€Ÿæ‰©å±•ï¼šæ¯ä¸ªå®¹å™¨éƒ½å¯ä½œä¸ºå•ç‹¬çš„è¿›ç¨‹äºˆä»¥è¿è¡Œï¼Œå¹¶ä¸”å¯ä»¥å…±äº«åº•å±‚æ“ä½œç³»ç»Ÿçš„ç³»ç»Ÿèµ„æºï¼Œè¿™æ ·ä¸€æ¥å¯ä»¥åŠ å¿«å®¹å™¨çš„å¯åŠ¨å’Œåœæ­¢æ•ˆç‡ã€‚</li></ul><p>3.<strong>åŒºåˆ«ä¸è”ç³»</strong></p><ul><li>è™šæ‹Ÿæœºè™½ç„¶å¯ä»¥éš”ç¦»å‡ºå¾ˆå¤šã€Œå­ç”µè„‘ã€ï¼Œä½†å ç”¨ç©ºé—´æ›´å¤§ï¼Œå¯åŠ¨æ›´æ…¢ã€‚è™šæ‹Ÿæœºè½¯ä»¶å¯èƒ½è¿˜è¦èŠ±é’±ï¼Œä¾‹å¦‚<code>VMWare</code>ï¼›</li><li>å®¹å™¨æŠ€æœ¯ä¸éœ€è¦è™šæ‹Ÿå‡ºæ•´ä¸ªæ“ä½œç³»ç»Ÿï¼Œåªéœ€è¦è™šæ‹Ÿä¸€ä¸ªå°è§„æ¨¡çš„ç¯å¢ƒï¼Œç±»ä¼¼ã€Œæ²™ç®±ã€ï¼›</li><li>è¿è¡Œç©ºé—´ï¼Œè™šæ‹Ÿæœºä¸€èˆ¬è¦å‡  <code>GB</code> åˆ° å‡ å <code>GB</code> çš„ç©ºé—´ï¼Œè€Œå®¹å™¨åªéœ€è¦ <code>MB</code> çº§ç”šè‡³ <code>KB</code> çº§ï¼›</li></ul><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¯¹æ¯”æ•°æ®ï¼š</p><table><thead><tr><th>ç‰¹æ€§</th><th style="text-align:center">è™šæ‹Ÿæœº</th><th style="text-align:center">å®¹å™¨</th></tr></thead><tbody><tr><td>éš”ç¦»çº§åˆ«</td><td style="text-align:center">æ“ä½œç³»ç»Ÿçº§</td><td style="text-align:center">è¿›ç¨‹</td></tr><tr><td>éš”ç¦»ç­–ç•¥</td><td style="text-align:center"><a href="https://baike.baidu.com/item/hypervisor/3353492?fr=aladdin" target="_blank" rel="noopener">Hypervisor</a>ï¼ˆè™šæ‹Ÿæœºç›‘æ§å™¨ï¼‰</td><td style="text-align:center"><a href="https://baike.baidu.com/item/Cgroup/4988200?fr=aladdin" target="_blank" rel="noopener">Cgroups</a>ï¼ˆæ§åˆ¶ç»„ç¾¤ï¼‰</td></tr><tr><td>ç³»ç»Ÿèµ„æº</td><td style="text-align:center">5 ï½ 15%</td><td style="text-align:center">0 ï½ 5%</td></tr><tr><td>å¯åŠ¨æ—¶é—´</td><td style="text-align:center">åˆ†é’Ÿçº§</td><td style="text-align:center">ç§’çº§</td></tr><tr><td>é•œåƒå­˜å‚¨</td><td style="text-align:center">GB - TB</td><td style="text-align:center">KB - MB</td></tr><tr><td>é›†ç¾¤è§„æ¨¡</td><td style="text-align:center">ä¸Šç™¾</td><td style="text-align:center">ä¸Šä¸‡</td></tr><tr><td>é«˜å¯ç”¨ç­–ç•¥</td><td style="text-align:center">å¤‡ä»½ã€å®¹ç¾ã€è¿ç§»</td><td style="text-align:center">å¼¹æ€§ã€è´Ÿè½½ã€åŠ¨æ€</td></tr></tbody></table><p>ä¸è™šæ‹Ÿæœºç›¸æ¯”ï¼Œå®¹å™¨æ›´è½»é‡ä¸”é€Ÿåº¦æ›´å¿«ï¼Œå› ä¸ºå®ƒåˆ©ç”¨äº† <code>Linux</code> åº•å±‚æ“ä½œç³»ç»Ÿåœ¨éš”ç¦»çš„ç¯å¢ƒä¸­è¿è¡Œã€‚è™šæ‹Ÿæœºçš„ <code>Hypervisor</code> åˆ›å»ºäº†ä¸€ä¸ªéå¸¸ç‰¢å›ºçš„è¾¹ç•Œï¼Œä»¥é˜²æ­¢åº”ç”¨ç¨‹åºçªç ´å®ƒï¼Œè€Œå®¹å™¨çš„è¾¹ç•Œä¸é‚£ä¹ˆå¼ºå¤§ã€‚</p><p>ç‰©ç†æœºéƒ¨ç½²ä¸èƒ½å……åˆ†åˆ©ç”¨èµ„æºï¼Œé€ æˆèµ„æºæµªè´¹ã€‚è™šæ‹Ÿæœºæ–¹å¼éƒ¨ç½²ï¼Œè™šæ‹Ÿæœºæœ¬èº«ä¼šå ç”¨å¤§é‡èµ„æºï¼Œå¯¼è‡´èµ„æºæµªè´¹ï¼Œå¦å¤–è™šæ‹Ÿæœºæ€§èƒ½ä¹Ÿå¾ˆå·®ã€‚è€Œå®¹å™¨åŒ–éƒ¨ç½²æ¯”è¾ƒçµæ´»ï¼Œä¸”è½»é‡çº§ï¼Œæ€§èƒ½è¾ƒå¥½ã€‚</p><div class="alert info"><p>è™šæ‹Ÿæœºå±äºè™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œè€Œ Docker è¿™æ ·çš„å®¹å™¨æŠ€æœ¯ï¼Œå±äºè½»é‡çº§çš„è™šæ‹ŸåŒ–ã€‚</p></div><h4 id="ä¸‰ã€è®¤è¯†-Docker"><a href="#ä¸‰ã€è®¤è¯†-Docker" class="headerlink" title="ä¸‰ã€è®¤è¯† Docker"></a>ä¸‰ã€è®¤è¯† Docker</h4><p><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/docker/docker.png" alt="Docker"><br><strong>1.æ¦‚å¿µ</strong><br><code>Docker</code> æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ <code>Linux</code> æœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–ã€‚å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶ï¼Œç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ã€‚</p><p><code>Docker</code> æŠ€æœ¯çš„<strong>ä¸‰å¤§æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼Œåˆ†åˆ«æ˜¯ï¼šé•œåƒ <code>Image</code>ã€å®¹å™¨ <code>Container</code>ã€ä»“åº“ <code>Repository</code>ã€‚</p><p><strong>2.<code>Docker</code> è½»é‡çº§çš„åŸå› ï¼Ÿ</strong><br>ç›¸ä¿¡ä½ ä¹Ÿä¼šæœ‰è¿™æ ·çš„ç–‘æƒ‘ï¼šä¸ºä»€ä¹ˆ <code>Docker</code> å¯åŠ¨å¿«ï¼Ÿå¦‚ä½•åšåˆ°å’Œå®¿ä¸»æœºå…±äº«å†…æ ¸ï¼Ÿ</p><p>å½“æˆ‘ä»¬è¯·æ±‚ <code>Docker</code> è¿è¡Œå®¹å™¨æ—¶ï¼Œ<code>Docker</code> ä¼šåœ¨è®¡ç®—æœºä¸Šè®¾ç½®ä¸€ä¸ªèµ„æºéš”ç¦»çš„ç¯å¢ƒã€‚ç„¶åå°†æ‰“åŒ…çš„åº”ç”¨ç¨‹åºå’Œå…³è”çš„æ–‡ä»¶å¤åˆ¶åˆ° <code>Namespace</code> å†…çš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œæ­¤æ—¶ç¯å¢ƒçš„é…ç½®å°±å®Œæˆäº†ã€‚ä¹‹å <code>Docker</code> ä¼šæ‰§è¡Œæˆ‘ä»¬é¢„å…ˆæŒ‡å®šçš„å‘½ä»¤ï¼Œè¿è¡Œåº”ç”¨ç¨‹åºã€‚</p><div class="alert warning"><p>é•œåƒä¸åŒ…å«ä»»ä½•åŠ¨æ€æ•°æ®ï¼Œå…¶å†…å®¹åœ¨æ„å»ºä¹‹åä¹Ÿä¸ä¼šè¢«æ”¹å˜ã€‚</p></div><h4 id="å››ã€æ ¸å¿ƒæ¦‚å¿µ"><a href="#å››ã€æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="å››ã€æ ¸å¿ƒæ¦‚å¿µ"></a>å››ã€æ ¸å¿ƒæ¦‚å¿µ</h4><p>1.<code>Build, Ship and Run</code>ï¼ˆæ­å»ºã€è¿è¾“ã€è¿è¡Œï¼‰ï¼›</p><p>2.<code>Buildâ€‚once, Runâ€‚anywhere</code>ï¼ˆä¸€æ¬¡æ­å»ºï¼Œå¤„å¤„è¿è¡Œï¼‰ï¼›</p><p>3.<code>Docker</code> æœ¬èº«å¹¶ä¸æ˜¯å®¹å™¨ï¼Œå®ƒæ˜¯åˆ›å»ºå®¹å™¨çš„å·¥å…·ï¼Œæ˜¯åº”ç”¨å®¹å™¨å¼•æ“ï¼›</p><p>4.<code>Docker</code> ä¸‰å¤§æ ¸å¿ƒæ¦‚å¿µï¼Œåˆ†åˆ«æ˜¯ï¼šé•œåƒ <code>Image</code>ï¼Œå®¹å™¨ <code>Container</code>ã€ä»“åº“ <code>Repository</code>ï¼›</p><p>5.<code>Docker</code> æŠ€æœ¯ä½¿ç”¨ <code>Linux</code> å†…æ ¸å’Œå†…æ ¸åŠŸèƒ½ï¼ˆä¾‹å¦‚ <code>Cgroups</code> å’Œ <code>namespaces</code>ï¼‰æ¥åˆ†éš”è¿›ç¨‹ï¼Œä»¥ä¾¿å„è¿›ç¨‹ç›¸äº’ç‹¬ç«‹è¿è¡Œã€‚</p><p>6.ç”±äº <code>Namespace</code> å’Œ <code>Cgroups</code> åŠŸèƒ½ä»…åœ¨ <code>Linux</code> ä¸Šå¯ç”¨ï¼Œå› æ­¤å®¹å™¨æ— æ³•åœ¨å…¶ä»–æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œã€‚é‚£ä¹ˆ <code>Docker</code> å¦‚ä½•åœ¨ <code>macOS</code> æˆ– <code>Windows</code> ä¸Šè¿è¡Œï¼Ÿ <code>Docker</code> å®é™…ä¸Šä½¿ç”¨äº†ä¸€ä¸ªæŠ€å·§ï¼Œå¹¶åœ¨é <code>Linux</code> æ“ä½œç³»ç»Ÿä¸Šå®‰è£… <code>Linux</code> è™šæ‹Ÿæœºï¼Œç„¶ååœ¨è™šæ‹Ÿæœºå†…è¿è¡Œå®¹å™¨ã€‚</p><p>7.é•œåƒæ˜¯ä¸€ä¸ªå¯æ‰§è¡ŒåŒ…ï¼Œå…¶åŒ…å«è¿è¡Œåº”ç”¨ç¨‹åºæ‰€éœ€çš„ä»£ç ã€è¿è¡Œæ—¶ã€åº“ã€ç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶ï¼Œå®¹å™¨æ˜¯é•œåƒçš„<strong>è¿è¡Œæ—¶å®ä¾‹</strong>ã€‚</p><p>æ›´å¤šå…³äº <code>Docker</code> çš„åŸç†ï¼Œå¯ä»¥æŸ¥çœ‹<a href="http://dockone.io/article/8788" target="_blank" rel="noopener"> <code>Docker</code> å·¥ä½œåŸç†åŠå®¹å™¨åŒ–ç®€æ˜“æŒ‡å—</a>ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚</p><h4 id="äº”ã€å®‰è£…-Docker"><a href="#äº”ã€å®‰è£…-Docker" class="headerlink" title="äº”ã€å®‰è£… Docker"></a>äº”ã€å®‰è£… Docker</h4><p><strong>1.å‘½ä»¤è¡Œå®‰è£…</strong><br><code>Homebrew</code> çš„ <code>Cask</code> å·²ç»æ”¯æŒ <code>Docker for Mac</code>ï¼Œå› æ­¤å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨ <code>Homebrew Cask</code> æ¥è¿›è¡Œå®‰è£…ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew cask install docker</span><br></pre></td></tr></table></figure></p><p>æ›´å¤šå®‰è£…æ–¹å¼ï¼Œè¯·æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://www.docker.com/get-started" target="_blank" rel="noopener">å®‰è£… <code>Docker</code></a></p><p><strong>2.æŸ¥çœ‹ç‰ˆæœ¬</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker -v</span><br></pre></td></tr></table></figure></p><p><strong>3.é…ç½®é•œåƒåŠ é€Ÿ</strong><br>è®¾ç½® <a href="https://docs.docker.com/engine/reference/commandline/dockerd/" target="_blank" rel="noopener">Docker Engine</a> å†™å…¥é…ç½®ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [</span><br><span class="line">    &quot;http://hub-mirror.c.163.com/&quot;,</span><br><span class="line">    &quot;https://registry.docker-cn.com&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;insecure-registries&quot;:[],</span><br><span class="line">  &quot;experimental&quot;: false,</span><br><span class="line">  &quot;debug&quot;: true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><strong>4.å®‰è£…æ¡Œé¢ç«¯</strong><br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/docker/first.png" alt="Docker æ¡Œé¢ç«¯"><br>æ¡Œé¢ç«¯æ“ä½œéå¸¸ç®€å•ï¼Œå…ˆå»<a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener">å®˜ç½‘ä¸‹è½½</a>ã€‚é€šè¿‡ <code>Docker</code> æ¡Œé¢ç«¯ï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿çš„æ“ä½œï¼š<br>1.cloneï¼šå…‹éš†ä¸€ä¸ªé¡¹ç›®<br>2.buildï¼šæ‰“åŒ…é•œåƒ<br>3.runï¼šè¿è¡Œå®ä¾‹<br>4.shareï¼šå…±äº«é•œåƒ</p><p>å¥½äº†ï¼Œå‡†å¤‡å·¥ä½œå°±ç»ªï¼Œä¸‹é¢å¯ä»¥å¤§å±•èº«æ‰‹äº†ï¼</p><h4 id="å…­ã€å¿«é€Ÿå¼€å§‹"><a href="#å…­ã€å¿«é€Ÿå¼€å§‹" class="headerlink" title="å…­ã€å¿«é€Ÿå¼€å§‹"></a>å…­ã€å¿«é€Ÿå¼€å§‹</h4><p>å®‰è£…å®Œ <code>Docker</code> ä¹‹åï¼Œæˆ‘ä»¬å…ˆæ‰“ä¸ªå®é™…é¡¹ç›®çš„é•œåƒï¼Œè¾¹å­¦è¾¹ç”¨ã€‚</p><p><strong>1.é¦–å…ˆéœ€è¦å¤§è‡´äº†è§£ä¸€ä¸‹æˆ‘ä»¬å°†ä¼šç”¨åˆ°çš„ <code>11</code> ä¸ªå‘½ä»¤</strong></p><table><thead><tr><th>å‘½ä»¤</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td>FROM</td><td style="text-align:left">åŸºäºå“ªä¸ªé•œåƒæ¥å®ç°</td></tr><tr><td>MAINTAINER</td><td style="text-align:left">é•œåƒåˆ›å»ºè€…</td></tr><tr><td>ENV</td><td style="text-align:left">å£°æ˜ç¯å¢ƒå˜é‡</td></tr><tr><td>RUN</td><td style="text-align:left">æ‰§è¡Œå‘½ä»¤</td></tr><tr><td>ADD</td><td style="text-align:left">æ·»åŠ å®¿ä¸»æœºæ–‡ä»¶åˆ°å®¹å™¨é‡Œï¼Œæœ‰éœ€è¦è§£å‹çš„æ–‡ä»¶ä¼šè‡ªåŠ¨è§£å‹</td></tr><tr><td>COPY</td><td style="text-align:left">æ·»åŠ å®¿ä½æœºæ–‡ä»¶åˆ°å®¹å™¨é‡Œ</td></tr><tr><td>WORKDIR</td><td style="text-align:left">å·¥ä½œç›®å½•</td></tr><tr><td>EXPOSE</td><td style="text-align:left">å®¹å™¨å†…åº”ç”¨å¯ä½¿ç”¨çš„ç«¯å£</td></tr><tr><td>CMD</td><td style="text-align:left">å®¹å™¨å¯åŠ¨åæ‰€æ‰§è¡Œçš„ç¨‹åºï¼Œå¦‚æœæ‰§è¡Œ docker run åé¢è·Ÿå¯åŠ¨å‘½ä»¤ä¼šè¢«è¦†ç›–æ‰</td></tr><tr><td>ENTRYPOINT</td><td style="text-align:left">ä¸ CMD åŠŸèƒ½ç›¸åŒï¼Œä½†éœ€ docker run ä¸ä¼šè¦†ç›–ï¼Œå¦‚æœéœ€è¦è¦†ç›–å¯å¢åŠ å‚æ•° -entrypoint æ¥è¦†ç›–</td></tr><tr><td>VOLUME</td><td style="text-align:left">æ•°æ®å·ï¼Œå°†å®¿ä¸»æœºçš„ç›®å½•æ˜ å°„åˆ°å®¹å™¨ä¸­çš„ç›®å½•</td></tr></tbody></table><p>2.<strong>æ–°å»ºé¡¹ç›®</strong><br>ä¸ºäº†å¿«æ·ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨<a href="https://cli.vuejs.org/guide/creating-a-project.html#vue-create" target="_blank" rel="noopener"><code>Vue</code> è„šæ‰‹æ¶</a>æ„å»ºé¡¹ç›®ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create docker-demo</span><br></pre></td></tr></table></figure></p><p>å°è¯•å¯åŠ¨ä¸€ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn serve</span><br></pre></td></tr></table></figure></p><p>è®¿é—®åœ°å€ï¼š<code>http://localhost:8080/</code>ã€‚é¡¹ç›®å°±ç»ªï¼Œæˆ‘ä»¬æ¥ç€ä¸ºé¡¹ç›®æ‰“åŒ…ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn build</span><br></pre></td></tr></table></figure></p><p>è¿™æ—¶å€™ï¼Œé¡¹ç›®ç›®å½•ä¸‹çš„ <code>Dist</code> å°±æ˜¯æˆ‘ä»¬è¦éƒ¨ç½²çš„é™æ€èµ„æºäº†ï¼Œæˆ‘ä»¬ç»§ç»­ä¸‹ä¸€æ­¥ã€‚</p><p><strong>éœ€è¦æ³¨æ„</strong>ï¼šå‰ç«¯é¡¹ç›®ä¸€èˆ¬åˆ†ä¸¤ç±»ï¼Œä¸€ç±»ç›´æ¥ <code>Nginx</code> é™æ€éƒ¨ç½²ï¼Œä¸€ç±»éœ€è¦å¯åŠ¨ <code>Node</code> æœåŠ¡ã€‚æœ¬èŠ‚æˆ‘ä»¬åªè€ƒè™‘ç¬¬ä¸€ç§ã€‚å…³äº <code>Node</code> æœåŠ¡ï¼Œ<a href="#">ä¸‹æ–‡</a>æˆ‘ä¼šè¯¦ç»†è¯´æ˜ã€‚</p><p>3.<strong>æ–°å»º <code>Dockerfile</code></strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd docker-demo &amp;&amp; touch Dockerfile</span><br></pre></td></tr></table></figure></p><p>æ­¤æ—¶çš„é¡¹ç›®ç›®å½•å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ Dockerfile</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ babel.config.js</span><br><span class="line">â”œâ”€â”€ dist</span><br><span class="line">â”œâ”€â”€ node_modules</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ public</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â””â”€â”€ yarn.lock</span><br></pre></td></tr></table></figure></p><p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å·²ç»åœ¨ <code>docker-demo</code> ç›®å½•ä¸‹æˆåŠŸåˆ›å»ºäº† <code>Dockerfile</code> æ–‡ä»¶ã€‚</p><p>4.<strong>å‡†å¤‡ <code>Nginx</code> é•œåƒ</strong><br>è¿è¡Œä½ çš„ <code>Docker</code> æ¡Œé¢ç«¯ï¼Œå°±ä¼šé»˜è®¤å¯åŠ¨å®ä¾‹ï¼Œæˆ‘ä»¬åœ¨æ§åˆ¶å°æ‹‰å– <code>Nginx</code> é•œåƒï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull nginx</span><br></pre></td></tr></table></figure></p><p>æ§åˆ¶å°ä¼šå‡ºç°å¦‚ä¸‹ä¿¡æ¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from library/nginx</span><br><span class="line">8559a31e96f4: Pull complete</span><br><span class="line">8d69e59170f7: Pull complete</span><br><span class="line">3f9f1ec1d262: Pull complete</span><br><span class="line">d1f5ff4f210d: Pull complete</span><br><span class="line">1e22bfa8652e: Pull complete</span><br><span class="line">Digest: sha256:21f32f6c08406306d822a0e6e8b7dc81f53f336570e852e25fbe1e3e3d0d0133</span><br><span class="line">Status: Downloaded newer image for nginx:latest</span><br><span class="line">docker.io/library/nginx:latest</span><br></pre></td></tr></table></figure></p><p>å¦‚æœä½ å‡ºç°è¿™æ ·çš„å¼‚å¸¸ï¼Œè¯·ç¡®è®¤ <code>Docker</code> å®ä¾‹æ˜¯å¦æ­£å¸¸è¿è¡Œã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?</span><br></pre></td></tr></table></figure></p><p>é•œåƒå‡†å¤‡ <code>OK</code>ï¼Œæˆ‘ä»¬åœ¨æ ¹ç›®å½•åˆ›å»º <code>Nginx</code> é…ç½®æ–‡ä»¶ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch default.conf</span><br></pre></td></tr></table></figure></p><p>å†™å…¥ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  localhost;</span><br><span class="line"></span><br><span class="line">    #charset koi8-r;</span><br><span class="line">    access_log  /var/log/nginx/host.access.log  main;</span><br><span class="line">    error_log  /var/log/nginx/error.log  error;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root   /usr/share/nginx/html;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    error_page   500 502 503 504  /50x.html;</span><br><span class="line">    location = /50x.html &#123;</span><br><span class="line">        root   /usr/share/nginx/html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>5.<strong>é…ç½®é•œåƒ</strong><br>æ‰“å¼€ <code>Dockerfile</code> ï¼Œå†™å…¥å¦‚ä¸‹å†…å®¹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FROM nginx</span><br><span class="line">COPY dist/ /usr/share/nginx/html/</span><br><span class="line">COPY default.conf /etc/nginx/conf.d/default.conf</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬é€è¡Œè§£é‡Šä¸€ä¸‹ä»£ç ï¼š</p><ul><li><code>FROM nginx</code> æŒ‡å®šè¯¥é•œåƒæ˜¯åŸºäº <code>nginx:latest</code> é•œåƒè€Œæ„å»ºçš„ï¼›</li><li><code>COPY dist/ /usr/share/nginx/html/</code> å‘½ä»¤çš„æ„æ€æ˜¯å°†é¡¹ç›®æ ¹ç›®å½•ä¸‹ <code>dist</code> æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ°é•œåƒä¸­ <code>/usr/share/nginx/html/</code> ç›®å½•ä¸‹ï¼›</li><li><code>COPY default.conf /etc/nginx/conf.d/default.conf</code> å°† <code>default.conf</code> å¤åˆ¶åˆ° <code>etc/nginx/conf.d/default.conf</code>ï¼Œç”¨æœ¬åœ°çš„ <code>default.conf</code> é…ç½®æ¥æ›¿æ¢ <code>Nginx</code> é•œåƒé‡Œçš„é»˜è®¤é…ç½®ã€‚</li></ul><p>6.<strong>æ„å»ºé•œåƒ</strong><br><code>Docker</code> é€šè¿‡ <code>build</code> å‘½ä»¤æ¥æ„å»ºé•œåƒï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t jartto-docker-demo .</span><br></pre></td></tr></table></figure></p><p>æŒ‰ç…§æƒ¯ä¾‹ï¼Œæˆ‘ä»¬è§£é‡Šä¸€ä¸‹ä¸Šè¿°ä»£ç ï¼š</p><ul><li><code>-t</code> å‚æ•°ç»™é•œåƒå‘½å <code>jartto-docker-demo</code></li><li><code>.</code> æ˜¯åŸºäºå½“å‰ç›®å½•çš„ <code>Dockerfile</code> æ¥æ„å»ºé•œåƒ</li></ul><p>æ‰§è¡ŒæˆåŠŸåï¼Œå°†ä¼šè¾“å‡ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Sending build context to Docker daemon  115.4MB</span><br><span class="line">Step 1/3 : FROM nginx</span><br><span class="line"> ---&gt; 2622e6cca7eb</span><br><span class="line">Step 2/3 : COPY dist/ /usr/share/nginx/html/</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 82b31f98dce6</span><br><span class="line">Step 3/3 : COPY default.conf /etc/nginx/conf.d/default.conf</span><br><span class="line"> ---&gt; 7df6efaf9592</span><br><span class="line">Successfully built 7df6efaf9592</span><br><span class="line">Successfully tagged jartto-docker-demo:latest</span><br></pre></td></tr></table></figure></p><p>é•œåƒåˆ¶ä½œæˆåŠŸï¼æˆ‘ä»¬æ¥æŸ¥çœ‹ä¸€ä¸‹å®¹å™¨ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image ls | grep jartto-docker-demo</span><br></pre></td></tr></table></figure></p><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æ‰“å‡ºäº†ä¸€ä¸ª <code>133MB</code> çš„é¡¹ç›®é•œåƒï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jartto-docker-demo latest 7df6efaf9592 About a minute ago 133MB</span><br></pre></td></tr></table></figure></p><div class="alert warning"><p>é•œåƒä¹Ÿæœ‰å¥½åä¹‹åˆ†ï¼Œåç»­æˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•ä¼˜åŒ–ï¼Œè¿™é‡Œå¯ä»¥å…ˆæš‚æ—¶å¿½ç•¥ã€‚</p></div><p>7.<strong>è¿è¡Œå®¹å™¨</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 3000:80 --name docker-vue jartto-docker-demo</span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œè§£é‡Šä¸€ä¸‹å‚æ•°ï¼š</p><ul><li><code>-d</code> è®¾ç½®å®¹å™¨åœ¨åå°è¿è¡Œ</li><li><code>-p</code> è¡¨ç¤ºç«¯å£æ˜ å°„ï¼ŒæŠŠæœ¬æœºçš„ <code>3000</code> ç«¯å£æ˜ å°„åˆ° <code>container</code> çš„ <code>80</code> ç«¯å£ï¼ˆè¿™æ ·å¤–ç½‘å°±èƒ½é€šè¿‡æœ¬æœºçš„ <code>3000</code> ç«¯å£è®¿é—®äº†</li><li><code>--name</code> è®¾ç½®å®¹å™¨å <code>docker-vue</code></li><li><code>jartto-docker-demo</code> æ˜¯æˆ‘ä»¬ä¸Šé¢æ„å»ºçš„é•œåƒåå­—</li></ul><p>è¡¥å……ä¸€ç‚¹ï¼š<br>åœ¨æ§åˆ¶å°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>docker ps</code> æŸ¥çœ‹åˆšè¿è¡Œçš„ <code>Container</code> çš„ <code>ID</code>ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a</span><br></pre></td></tr></table></figure></p><p>æ§åˆ¶å°ä¼šè¾“å‡ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CONTAINER ID IMAGE              COMMAND                  CREATED       STATUS PORTS  NAMES</span><br><span class="line">ab1375befb0b jartto-docker-demo &quot;/docker-entrypoint.â€¦&quot;   8 minutes ago Up 7 minutes  0.0.0.0:3000-&gt;80/tcp  docker-vue</span><br></pre></td></tr></table></figure></p><p>å¦‚æœä½ ä½¿ç”¨æ¡Œé¢ç«¯ï¼Œé‚£ä¹ˆæ‰“å¼€ <code>Docker Dashboard</code> å°±å¯ä»¥çœ‹åˆ°å®¹å™¨åˆ—è¡¨äº†ï¼Œå¦‚ä¸‹å›¾ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/docker/desk.png" alt="Docker æ¡Œé¢ç«¯"></p><p>8.<strong>è®¿é—®é¡¹ç›®</strong><br>å› ä¸ºæˆ‘ä»¬æ˜ å°„äº†æœ¬æœº <code>3000</code> ç«¯å£ï¼Œæ‰€ä»¥æ‰§è¡Œï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -v -i localhost:3000</span><br></pre></td></tr></table></figure></p><p>æˆ–è€…æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®ï¼š<code>localhost:3000</code></p><p>9.<strong>å‘å¸ƒé•œåƒ</strong><br><div class="alert info"><p>å¦‚æœä½ æƒ³ä¸ºç¤¾åŒºè´¡çŒ®åŠ›é‡ï¼Œé‚£ä¹ˆéœ€è¦å°†é•œåƒå‘å¸ƒï¼Œæ–¹ä¾¿å…¶ä»–å¼€å‘è€…ä½¿ç”¨ã€‚</p></div></p><p>å‘å¸ƒé•œåƒéœ€è¦å¦‚ä¸‹æ­¥éª¤ï¼š</p><ul><li>ç™»é™† <code>[dockerhub](https://hub.docker.com)</code>ï¼Œæ³¨å†Œè´¦å·ï¼›</li><li>å‘½ä»¤è¡Œæ‰§è¡Œ <code>docker login</code>ï¼Œä¹‹åè¾“å…¥æˆ‘ä»¬çš„è´¦å·å¯†ç ï¼Œè¿›è¡Œç™»å½•ï¼›</li><li>æ¨é€é•œåƒä¹‹å‰ï¼Œéœ€è¦æ‰“ä¸€ä¸ª <code>Tag</code>ï¼Œæ‰§è¡Œ <code>docker tag &lt;image&gt; &lt;username&gt;/&lt;repository&gt;:&lt;tag&gt;</code></li></ul><p>å…¨æµç¨‹ç»“æŸï¼Œä»¥åæˆ‘ä»¬è¦ä½¿ç”¨ï¼Œå†ä¹Ÿä¸éœ€è¦ã€Œæ¬çŸ³å¤´ã€ç æœ¨å¤´ã€ç”»å›¾çº¸ã€ç›–æˆ¿å­ã€äº†ï¼Œæ‹åŒ…å…¥ä½ã€‚<strong>è¿™ä¹Ÿæ˜¯ <code>docker</code> ç‹¬ç‰¹é­…åŠ›æ‰€åœ¨ã€‚</strong></p><h4 id="ä¸ƒã€å¸¸è§„æ“ä½œ"><a href="#ä¸ƒã€å¸¸è§„æ“ä½œ" class="headerlink" title="ä¸ƒã€å¸¸è§„æ“ä½œ"></a>ä¸ƒã€å¸¸è§„æ“ä½œ</h4><p>åˆ°è¿™é‡Œï¼Œæ­å–œä½ å·²ç»å®Œæˆäº† <code>Docker</code> çš„å…¥é—¨é¡¹ç›®ï¼å¦‚æœè¿˜æƒ³ç»§ç»­æ·±å…¥ï¼Œä¸å¦¨æ¥ç€å¾€ä¸‹çœ‹çœ‹ã€‚</p><p><strong>1.å‚æ•°ä½¿ç”¨</strong></p><ul><li><p><code>FROM</code></p><ul><li>æŒ‡å®šåŸºç¡€é•œåƒï¼Œæ‰€æœ‰æ„å»ºçš„é•œåƒéƒ½å¿…é¡»æœ‰ä¸€ä¸ªåŸºç¡€é•œåƒï¼Œä¸” <code>FROM</code> å‘½ä»¤å¿…é¡»æ˜¯ <code>Dockerfile</code> çš„ç¬¬ä¸€ä¸ªå‘½ä»¤</li><li><code>FROM &lt;image&gt; [AS &lt;name&gt;]</code> æŒ‡å®šä»ä¸€ä¸ªé•œåƒæ„å»ºèµ·ä¸€ä¸ªæ–°çš„é•œåƒåå­—</li><li><code>FROM &lt;image&gt;[:&lt;tag&gt;] [AS &lt;name&gt;]</code>  æŒ‡å®šé•œåƒçš„ç‰ˆæœ¬ <code>Tag</code></li><li>ç¤ºä¾‹ï¼š<code>FROM mysql:5.0  AS database</code></li></ul></li><li><p><code>MAINTAINER</code></p><ul><li>é•œåƒç»´æŠ¤äººçš„ä¿¡æ¯</li><li><code>MAINTAINER  &lt;name&gt;</code></li><li>ç¤ºä¾‹ï¼š<code>MAINTAINER  Jartto  Jartto@qq.com</code></li></ul></li><li><p><code>RUN</code></p><ul><li>æ„å»ºé•œåƒæ—¶è¦æ‰§è¡Œçš„å‘½ä»¤</li><li><code>RUN &lt;command&gt;</code></li><li>ç¤ºä¾‹ï¼š<code>RUN [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;]</code></li></ul></li><li><p><code>ADD</code></p><ul><li>å°†æœ¬åœ°çš„æ–‡ä»¶æ·»åŠ å¤åˆ¶åˆ°å®¹å™¨ä¸­å»ï¼Œå‹ç¼©åŒ…ä¼šè§£å‹ï¼Œå¯ä»¥è®¿é—®ç½‘ç»œä¸Šçš„æ–‡ä»¶ï¼Œä¼šè‡ªåŠ¨ä¸‹è½½</li><li><code>ADD &lt;src&gt;  &lt;dest&gt;</code></li><li>ç¤ºä¾‹ï¼š<code>ADD  *.js  /app</code> æ·»åŠ  <code>js</code> æ–‡ä»¶åˆ°å®¹å™¨ä¸­çš„ <code>app</code> ç›®å½•ä¸‹</li></ul></li><li><code>COPY</code><ul><li>åŠŸèƒ½å’Œ <code>ADD</code> ä¸€æ ·ï¼Œåªæ˜¯å¤åˆ¶ï¼Œä¸ä¼šè§£å‹æˆ–è€…ä¸‹è½½æ–‡ä»¶</li></ul></li><li><code>CMD</code><ul><li>å¯åŠ¨å®¹å™¨åæ‰§è¡Œçš„å‘½ä»¤ï¼Œå’Œ <code>RUN</code> ä¸ä¸€æ ·ï¼Œ<code>RUN</code> æ˜¯åœ¨æ„å»ºé•œåƒæ˜¯è¦è¿è¡Œçš„å‘½ä»¤</li><li>å½“ä½¿ç”¨ <code>docker run</code> è¿è¡Œå®¹å™¨çš„æ—¶å€™ï¼Œè¿™ä¸ªå¯ä»¥åœ¨å‘½ä»¤è¡Œè¢«è¦†ç›–</li><li>ç¤ºä¾‹ï¼š<code>CMD [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;]</code></li></ul></li><li><p><code>ENTRYPOINT</code></p><ul><li>ä¹Ÿæ˜¯æ‰§è¡Œå‘½ä»¤ï¼Œå’Œ <code>CMD</code> ä¸€æ ·ï¼Œåªæ˜¯è¿™ä¸ªå‘½ä»¤ä¸ä¼šè¢«å‘½ä»¤è¡Œè¦†ç›–</li><li><code>ENTRYPOINT [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;]</code></li><li>ç¤ºä¾‹ï¼š<code>ENTRYPOINT [&quot;donnet&quot;, &quot;myapp.dll&quot;]</code></li></ul></li><li><p><code>LABEL</code>ï¼šä¸ºé•œåƒæ·»åŠ å…ƒæ•°æ®ï¼Œ<code>key-value</code> å½¢å¼</p><ul><li><code>LABEL &lt;key&gt;=&lt;value&gt;  &lt;key&gt;=&lt;value&gt; ...</code> </li><li>ç¤ºä¾‹ï¼š<code>LABEL version=&quot;1.0&quot;  description=&quot;è¿™æ˜¯ä¸€ä¸ªwebåº”ç”¨&quot;</code></li></ul></li><li><p><code>ENV</code>ï¼šè®¾ç½®ç¯å¢ƒå˜é‡ï¼Œæœ‰äº›å®¹å™¨è¿è¡Œæ—¶ä¼šéœ€è¦æŸäº›ç¯å¢ƒå˜é‡</p><ul><li><code>ENV  &lt;key&gt;  &lt;value&gt;</code> ä¸€æ¬¡è®¾ç½®ä¸€ä¸ªç¯å¢ƒå˜é‡</li><li><code>ENV  &lt;key&gt;=&lt;value&gt;  &lt;key&gt;=&lt;value&gt;  &lt;key&gt;=&lt;value&gt;</code> è®¾ç½®å¤šä¸ªç¯å¢ƒå˜é‡</li><li>ç¤ºä¾‹ï¼š<code>ENV  JAVA_HOME  /usr/java1.8/</code></li></ul></li><li><p><code>EXPOSE</code>ï¼šæš´éœ²å¯¹å¤–çš„ç«¯å£ï¼ˆå®¹å™¨å†…éƒ¨ç¨‹åºçš„ç«¯å£ï¼Œè™½ç„¶ä¼šå’Œå®¿ä¸»æœºçš„ä¸€æ ·ï¼Œä½†æ˜¯å…¶å®æ˜¯ä¸¤ä¸ªç«¯å£ï¼‰</p><ul><li><code>EXPOSE &lt;port&gt;</code></li><li>ç¤ºä¾‹ï¼š<code>EXPOSE  80</code></li><li>å®¹å™¨è¿è¡Œæ—¶ï¼Œéœ€è¦ç”¨ <code>-p</code> æ˜ å°„å¤–éƒ¨ç«¯å£æ‰èƒ½è®¿é—®åˆ°å®¹å™¨å†…çš„ç«¯å£</li></ul></li><li><code>VOLUME</code>ï¼šæŒ‡å®šæ•°æ®æŒä¹…åŒ–çš„ç›®å½•ï¼Œå®˜æ–¹è¯­è¨€å«åšæŒ‚è½½<ul><li><code>VOLUME  /var/log</code> æŒ‡å®šå®¹å™¨ä¸­éœ€è¦è¢«æŒ‚è½½çš„ç›®å½•ï¼Œä¼šæŠŠè¿™ä¸ªç›®å½•æ˜ å°„åˆ°å®¿ä¸»æœºçš„ä¸€ä¸ªéšæœºç›®å½•ä¸Šï¼Œå®ç°æ•°æ®çš„æŒä¹…åŒ–å’ŒåŒæ­¥ã€‚</li><li><code>VOLUME  [&quot;/var/log&quot;,&quot;/var/test&quot;.....]</code> æŒ‡å®šå®¹å™¨ä¸­å¤šä¸ªéœ€è¦è¢«æŒ‚è½½çš„ç›®å½•ï¼Œä¼šæŠŠè¿™äº›ç›®å½•æ˜ å°„åˆ°å®¿ä¸»æœºçš„å¤šä¸ªéšæœºç›®å½•ä¸Šï¼Œå®ç°æ•°æ®çš„æŒä¹…åŒ–å’ŒåŒæ­¥</li><li><code>VOLUME  /var/data  var/log</code> æŒ‡å®šå®¹å™¨ä¸­çš„ <code>var/log</code> ç›®å½•æŒ‚è½½åˆ°å®¿ä¸»æœºä¸Šçš„ <code>/var/data</code> ç›®å½•ï¼Œè¿™ç§å½¢å¼å¯ä»¥æ‰‹åŠ¨æŒ‡å®šå®¿ä¸»æœºä¸Šçš„ç›®å½•</li></ul></li><li><code>WORKDIR</code>ï¼šè®¾ç½®å·¥ä½œç›®å½•ï¼Œè®¾ç½®ä¹‹å ï¼Œ<code>RUNã€CMDã€COPYã€ADD</code> çš„å·¥ä½œç›®å½•éƒ½ä¼šåŒæ­¥å˜æ›´<ul><li><code>WORKDIR &lt;path&gt;</code></li><li>ç¤ºä¾‹ï¼š<code>WORKDIR  /app/test</code></li></ul></li><li><code>USER</code>ï¼šæŒ‡å®šè¿è¡Œå‘½ä»¤æ—¶æ‰€ä½¿ç”¨çš„ç”¨æˆ·ï¼Œä¸ºäº†å®‰å…¨å’Œæƒé™èµ·è§ï¼Œæ ¹æ®è¦æ‰§è¡Œçš„å‘½ä»¤é€‰æ‹©ä¸åŒç”¨æˆ·<ul><li><code>USER  &lt;user&gt;:[&lt;group&gt;]</code></li><li>ç¤ºä¾‹ï¼š<code>USER  test</code></li></ul></li><li><code>ARG</code>ï¼šè®¾ç½®æ„å»ºé•œåƒæ˜¯è¦ä¼ é€’çš„å‚æ•°<ul><li><code>ARG  &lt;name&gt;[=&lt;value&gt;]</code></li><li><code>ARG  name=sss</code></li></ul></li></ul><p>æ›´å¤šæ“ä½œï¼Œè¯·ç§»æ­¥<a href="https://docs.docker.com" target="_blank" rel="noopener">å®˜æ–¹ä½¿ç”¨æ–‡æ¡£</a>ã€‚</p><h4 id="å…«ã€æœ€ä½³å®è·µ"><a href="#å…«ã€æœ€ä½³å®è·µ" class="headerlink" title="å…«ã€æœ€ä½³å®è·µ"></a>å…«ã€æœ€ä½³å®è·µ</h4><p>åœ¨æŒæ¡ <code>Docker</code> å¸¸è§„æ“ä½œä¹‹åï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±å¯ä»¥æ‰“å‡ºè‡ªå·±æƒ³è¦çš„é¡¹ç›®é•œåƒã€‚ç„¶è€Œä¸åŒçš„æ“ä½œæ‰“å‡ºçš„é•œåƒä¹Ÿæ˜¯åƒå·®ä¸‡åˆ«ã€‚</p><div class="alert warning"><p>ç©¶ç«Ÿæ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´é•œåƒå·®å¼‚ï¼Œæˆ‘ä»¬ä¸å¦¨ç»§ç»­æ¢ç´¢ã€‚</p></div><p>ä»¥ä¸‹æ˜¯åœ¨åº”ç”¨ <code>Docker</code> è¿‡ç¨‹ä¸­æ•´ç†çš„<strong>æœ€ä½³å®è·µ</strong>ï¼Œè¯·å°½é‡éµå¾ªå¦‚ä¸‹å‡†åˆ™ï¼š</p><p>1.<code>Require</code> æ˜ç¡®ï¼šéœ€è¦ä»€ä¹ˆé•œåƒ<br>2.æ­¥éª¤ç²¾ç®€ï¼šå˜åŒ–è¾ƒå°‘çš„ <code>Step</code> ä¼˜å…ˆ<br>3.ç‰ˆæœ¬æ˜ç¡®ï¼šé•œåƒå‘½åæ˜ç¡®<br>4.è¯´æ˜æ–‡æ¡£ï¼šæ•´ä¸ªé•œåƒæ‰“åŒ…æ­¥éª¤å¯ä»¥é‡ç°</p><p>æ¨èå¦‚ä¸‹ä¸¤ç¯‡æ–‡ç« ï¼š<br><a href="https://www.docker.com/blog/intro-guide-to-dockerfile-best-practices/" target="_blank" rel="noopener">Intro Guide to Dockerfile Best Practices</a><br><a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/" target="_blank" rel="noopener">Best practices for writing Dockerfiles</a></p><h4 id="ä¹ã€æ€»ç»“"><a href="#ä¹ã€æ€»ç»“" class="headerlink" title="ä¹ã€æ€»ç»“"></a>ä¹ã€æ€»ç»“</h4><p>å®¹å™¨åŒ–æŠ€æœ¯å¿…å°†æ˜¯äº‘æ—¶ä»£ä¸å¯æˆ–ç¼ºçš„æŠ€èƒ½ä¹‹ä¸€ï¼Œè€Œ <code>Docker</code> åªæ˜¯æ²§æµ·ä¸€ç²Ÿã€‚éšä¹‹è€Œæ¥çš„è¿˜æœ‰é›†ç¾¤å®¹å™¨ç®¡ç† <code>K8s</code>ã€<code>Service Mesh</code> ã€<code>Istio</code> ç­‰æŠ€æœ¯ã€‚æ‰“å¼€ <code>Docker</code> çš„å¤§é—¨ï¼Œä¸æ–­<strong>æŠ½ä¸å‰¥èŒ§ï¼Œé€å±‚æ·±å…¥</strong>ï¼Œä½ å°†æ„Ÿå—åˆ°å®¹å™¨åŒ–çš„æ— ç©·é­…åŠ›ã€‚</p><p>èµ¶å¿«æ‰“å¼€æŠ€èƒ½è¾¹ç•Œï¼Œä¸ºä½ çš„å‰ç«¯æŠ€æœ¯èµ‹èƒ½å§ï¼</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¯Œ &lt;code&gt;Web&lt;/code&gt; æ—¶ä»£ï¼Œåº”ç”¨å˜å¾—è¶Šæ¥è¶Šå¼ºå¤§ï¼Œä¸æ­¤åŒæ—¶ä¹Ÿè¶Šæ¥è¶Šå¤æ‚ã€‚é›†ç¾¤éƒ¨ç½²ã€éš”ç¦»ç¯å¢ƒã€ç°åº¦å‘å¸ƒä»¥åŠåŠ¨æ€æ‰©å®¹ç¼ºä¸€ä¸å¯ï¼Œè€Œå®¹å™¨åŒ–åˆ™æˆä¸ºä¸­é—´çš„å¿…è¦æ¡¥æ¢ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="æŠ€æœ¯åšæ–‡" scheme="http://jartto.wang/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E6%96%87/"/>
    
    
      <category term="docker" scheme="http://jartto.wang/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>å°†åšå®¢æ¬è‡³ CSDN</title>
    <link href="http://jartto.wang/2020/05/25/blog-to-csdn/"/>
    <id>http://jartto.wang/2020/05/25/blog-to-csdn/</id>
    <published>2020-05-25T07:33:44.000Z</published>
    <updated>2020-06-20T14:48:19.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸ºäº†æ›´å¥½çš„æœåŠ¡å°ä¼™ä¼´ï¼Œæœ¬åšå®¢å°†åŒæ­¥è‡³ <code>CSDN</code>ï¼Œæ¬¢è¿å¤§å®¶å…³æ³¨è´¦å·ï¼š<code>Jartto</code>ã€‚æœ¬ç«™ç‚¹å†…å®¹å‡å±åŸåˆ›ï¼Œå¦‚æœ‰éœ€æ±‚ï¼Œè¯·è”ç³»æœ¬äººã€‚<br><a id="more"></a><br>æœ¬ç«™ç‚¹ä¾æ—§åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿æŒç»­å…³æ³¨ï¼Œä¸€èµ·æ¢ç´¢å‰ç«¯é¢†åŸŸç²¾å½©å†…å®¹ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸ºäº†æ›´å¥½çš„æœåŠ¡å°ä¼™ä¼´ï¼Œæœ¬åšå®¢å°†åŒæ­¥è‡³ &lt;code&gt;CSDN&lt;/code&gt;ï¼Œæ¬¢è¿å¤§å®¶å…³æ³¨è´¦å·ï¼š&lt;code&gt;Jartto&lt;/code&gt;ã€‚æœ¬ç«™ç‚¹å†…å®¹å‡å±åŸåˆ›ï¼Œå¦‚æœ‰éœ€æ±‚ï¼Œè¯·è”ç³»æœ¬äººã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="æŠ€æœ¯åšæ–‡" scheme="http://jartto.wang/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E6%96%87/"/>
    
    
      <category term="csdn" scheme="http://jartto.wang/tags/csdn/"/>
    
  </entry>
  
  <entry>
    <title>WebP æ–¹æ¡ˆåˆ†æä¸å®è·µ</title>
    <link href="http://jartto.wang/2020/05/02/webp-practice/"/>
    <id>http://jartto.wang/2020/05/02/webp-practice/</id>
    <published>2020-05-02T10:22:43.000Z</published>
    <updated>2020-06-21T22:54:14.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¯¹äºç½‘ç«™æ¥è¯´ï¼Œå›¾ç‰‡å§‹ç»ˆæ‰®æ¼”ç€é‡è¦è§’è‰²ã€‚å›¾ç‰‡å¤§å°ç›´æ¥å½±å“ç½‘ç«™é€Ÿåº¦ã€æµé‡ã€è¿è¥æˆæœ¬ä»¥åŠç”¨æˆ·ä½“éªŒã€‚å› æ­¤ï¼Œå‡å°‘å›¾ç‰‡å¤§å°æˆä¸ºç½‘ç«™ä¼˜åŒ–æœ€é‡è¦çš„ä¸€ä¸ªç¯èŠ‚ã€‚<br><a id="more"></a><br>å¦‚æœä½ å¯¹ä¼˜åŒ–è¿˜ä¸ç”šäº†è§£ï¼Œæ¨èé˜…è¯»å¦‚ä¸‹æ–‡ç« ï¼š<br>1.<a href="http://jartto.wang/2019/02/16/web-optimization/">ç½‘ç«™ä¼˜åŒ–å®æˆ˜</a><br>2.<a href="http://jartto.wang/2019/09/08/web-optimization-tools/">ç½‘ç«™ä¼˜åŒ–å·¥å…·</a><br>3.<a href="http://jartto.wang/2019/10/23/css-theory-and-optimization/">CSS æ¸²æŸ“åŸç†ä»¥åŠä¼˜åŒ–ç­–ç•¥</a><br>4.<a href="http://jartto.wang/2020/03/15/about-web-fmp/">ç½‘ç«™æ€§èƒ½æŒ‡æ ‡ - FMP</a><br>5.<a href="http://jartto.wang/2020/03/29/web-tti/">èšç„¦ Web æ€§èƒ½æŒ‡æ ‡ TTI</a><br>6.<a href="http://jartto.wang/2020/04/05/about-wrk/">Webã€Œæ€§èƒ½æµ‹è¯•ã€çŸ¥å¤šå°‘ï¼Ÿ</a></p><h4 id="ä¸€ã€èƒŒæ™¯"><a href="#ä¸€ã€èƒŒæ™¯" class="headerlink" title="ä¸€ã€èƒŒæ™¯"></a>ä¸€ã€èƒŒæ™¯</h4><p>å½“æˆ‘ä»¬åœ¨åšç½‘ç«™æ€§èƒ½ä¼˜åŒ–çš„æ—¶å€™ï¼Œå‡å°‘å›¾ç‰‡å¤§å°ï¼Œæ„å‘³ç€å‡å°‘äº†ç½‘ç»œä¼ è¾“ï¼Œæå‡äº†ç½‘ç«™åŠ è½½é€Ÿåº¦ï¼Œè€Œè¿™éƒ¨åˆ†ä¹Ÿæ˜¯æ€§ä»·æ¯”æœ€é«˜çš„ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å‹ç¼©å›¾ç‰‡æ¥å‡å°‘ä½“ç§¯ï¼Œä½†å‹ç¼©æ¯”ä¾‹ä¸€ç›´æ˜¯å‰ç«¯å¼€å‘å’Œè®¾è®¡å¸ˆäº‰æ‰§çš„ç„¦ç‚¹ã€‚å‹ç¼©æ¯”ä¾‹å¤§çš„è¯ï¼Œå¯ä»¥æœ‰æ•ˆå‡å°‘å›¾ç‰‡ä½“ç§¯ï¼Œå¯¹é¡µé¢åŠ è½½æœ‰åˆ©ï¼Œä½†æ˜¯å´æŸå¤±äº†åƒç´ ï¼Œæ˜¯è®¾è®¡å¸ˆæ— æ³•å®¹å¿çš„ã€‚</p><p>åœ¨è¿™ç§çŸ›ç›¾çš„åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬æ—¢è¦æœ€å¤§ç¨‹åº¦çš„å‹ç¼©å›¾ç‰‡åˆè¦ä¿æŒè¶³å¤Ÿçš„æ¸…æ™°ï¼Œ<code>WebP</code> ä¾¿åº”è¿è€Œç”Ÿã€‚<br><div class="alert danger"><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼šWebP å¹¶ä¸æ˜¯æ–°æŠ€æœ¯ï¼Œè€Œæ˜¯å—é™äºå…¼å®¹æ€§è€Œæœªå…¨é¢æ™®åŠã€‚</p></div></p><h4 id="äºŒã€ç›®æ ‡ä¸æ„ä¹‰"><a href="#äºŒã€ç›®æ ‡ä¸æ„ä¹‰" class="headerlink" title="äºŒã€ç›®æ ‡ä¸æ„ä¹‰"></a>äºŒã€ç›®æ ‡ä¸æ„ä¹‰</h4><p>1.æ—¶é—´æˆæœ¬<br>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ç»„æ•°æ®å¯¹æ¯”å›¾ï¼Œå¦‚æœä½ åšè¿‡ <code>Gif</code> åŠ¨å›¾ï¼Œä½ è‚¯å®šçŸ¥é“ä¸‹é¢è¿™æ ·çš„å¤„ç†æ„ä¹‰æœ‰å¤šå¤§ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/webp/sample.png" alt="WebP æ—¶é—´å¯¹æ¯”"></p><div class="alert success"><p>åœ¨è‚‰çœ¼æ— æ³•è¯†åˆ«å·®å¼‚çš„å‰æä¸‹ï¼Œå›¾ç‰‡å¤§å°å‡å°‘äº† 88%ã€‚</p></div><p>2.å¸¦å®½æˆæœ¬</p><ul><li><code>YouTube</code> çš„è§†é¢‘ç•¥ç¼©å›¾é‡‡ç”¨ <code>WebP</code> æ ¼å¼åï¼Œç½‘é¡µåŠ è½½é€Ÿåº¦æå‡äº† <code>10%</code>ï¼›</li><li>è°·æ­Œçš„ <code>Chrome</code> ç½‘ä¸Šåº”ç”¨å•†åº—é‡‡ç”¨ <code>WebP</code> æ ¼å¼å›¾ç‰‡åï¼Œæ¯å¤©å¯ä»¥èŠ‚çœå‡  <code>TB</code> çš„å¸¦å®½ï¼Œé¡µé¢å¹³å‡åŠ è½½æ—¶é—´å¤§çº¦å‡å°‘ <code>1/3</code>ï¼›</li><li><code>Google+</code> ç§»åŠ¨åº”ç”¨é‡‡ç”¨ <code>WebP</code> å›¾ç‰‡æ ¼å¼åï¼Œæ¯å¤©èŠ‚çœäº† <code>50TB</code> æ•°æ®å­˜å‚¨ç©ºé—´ã€‚</li></ul><p>ç›®å‰ <code>Google</code>ã€<code>Facebook</code>ã€é˜¿é‡Œã€äº¬ä¸œçš„ç­‰å›½å†…å¤–äº’è”ç½‘å…¬å¸å¹¿æ³›åº”ç”¨äº† <code>WebP</code>ï¼Œè¶…è¿‡ <code>70%</code> çš„æµè§ˆå™¨å·²ç»æ”¯æŒ <code>WebP</code>ã€‚</p><h4 id="ä¸‰ã€ä»€ä¹ˆæ˜¯-WebP-ï¼Ÿ"><a href="#ä¸‰ã€ä»€ä¹ˆæ˜¯-WebP-ï¼Ÿ" class="headerlink" title="ä¸‰ã€ä»€ä¹ˆæ˜¯ WebP ï¼Ÿ"></a>ä¸‰ã€ä»€ä¹ˆæ˜¯ WebP ï¼Ÿ</h4><div class="alert info"><p>WebP æ ¼å¼ï¼Œè°·æ­Œå¼€å‘çš„ä¸€ç§æ—¨åœ¨åŠ å¿«å›¾ç‰‡åŠ è½½é€Ÿåº¦çš„å›¾ç‰‡æ ¼å¼ã€‚</p></div><p>ä¼˜åŠ¿åœ¨äºå®ƒå…·æœ‰<strong>æ›´ä¼˜çš„å›¾åƒæ•°æ®å‹ç¼©ç®—æ³•</strong>ï¼Œåœ¨æ‹¥æœ‰è‚‰çœ¼æ— æ³•è¯†åˆ«å·®å¼‚çš„å›¾åƒè´¨é‡å‰æä¸‹ï¼Œå¸¦æ¥<strong>æ›´å°çš„å›¾ç‰‡ä½“ç§¯</strong>ï¼ŒåŒæ—¶å…·å¤‡äº†æ— æŸå’Œæœ‰æŸçš„å‹ç¼©æ¨¡å¼ã€<code>Alpha</code> é€æ˜ä»¥åŠåŠ¨ç”»çš„ç‰¹æ€§ï¼Œåœ¨ <code>JPEG</code> å’Œ <code>PNG</code> ä¸Šçš„è½¬åŒ–æ•ˆæœéƒ½éå¸¸ä¼˜ç§€ã€ç¨³å®šå’Œç»Ÿä¸€ã€‚</p><p>åœ¨å°è¯•ä¸€äº›æŠ€æœ¯å‰ï¼Œæˆ‘ä»¬å¿…é¡»è¦å……åˆ†äº†è§£ä»–çš„<strong>å…¼å®¹æ€§</strong>ï¼Œå¦‚ä¸‹å›¾ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/webp/caniuse.png" alt="WebP å…¼å®¹æ€§"></p><p>å¯ä»¥çœ‹å‡ºæ¥ï¼Œç»å¤§å¤šæ•°æµè§ˆå™¨å·²ç»æœ‰äº†è¾ƒå¥½çš„æ”¯æŒã€‚å½“ç„¶ï¼Œé™¤äº† <code>Safari</code> å’Œ <code>IE</code>ï¼æˆ‘ä»¬æ¥çœ‹çœ‹æµè§ˆå™¨å¸‚åœºå æœ‰ç‡å§ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/webp/chrome.png" alt="æµè§ˆå™¨å¸‚åœºå æœ‰ç‡"></p><div class="alert warning"><p>Safari å’Œ Foxmail ä¹Ÿåœ¨è¿›è¡Œæ”¯æŒ WebP çš„æµ‹è¯•ã€‚</p></div><h4 id="å››ã€åº”ç”¨åœºæ™¯"><a href="#å››ã€åº”ç”¨åœºæ™¯" class="headerlink" title="å››ã€åº”ç”¨åœºæ™¯"></a>å››ã€åº”ç”¨åœºæ™¯</h4><p><code>WebP</code> çœ‹èµ·æ¥ä¸é”™ï¼Œé‚£ä¹ˆå®ƒç©¶ç«Ÿé€‚åˆä»€ä¹ˆæ ·çš„åœºæ™¯å‘¢ï¼Ÿä¸ç€æ€¥ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹é¢çš„å›¾ä¾‹ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/webp/sence.png" alt="WebP ä½¿ç”¨åœºæ™¯"></p><p>ä»ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œé€‚åˆ <code>WebP</code> åœºæ™¯çš„ç«™ç‚¹ä¸å¤–ä¹å¦‚ä¸‹å‡ ç§åœºæ™¯ï¼š<br>1.<strong>ç½‘ç«™å›¾ç‰‡æ¯”é‡å¤§</strong><br>å¦‚æœä½ çš„ç½‘ç«™ <code>80%</code> ç”šè‡³æ›´å¤šä¾èµ–å›¾ç‰‡èµ„æºï¼Œé‚£ä¹ˆè¯·ä½¿ç”¨ <code>WebP</code>ï¼Œèµ„æºæˆæœ¬å¯ä»¥è¾ƒå°‘ <code>50%</code> ä»¥ä¸Šã€‚</p><p>2.<strong>ç»†èŠ‚è¦æ±‚ä¸é«˜</strong><br>å›¾ç‰‡èµ·åˆ°å ä½ç›®çš„ï¼Œä¸éœ€è¦æ¯›å­”çº§åˆ«ï¼Œé‚£ä¹ˆè¯·å¤§èƒ†ä½¿ç”¨ï¼</p><p>3.<strong>æµé‡è¿è¥æ¨å¹¿</strong><br>è¿è¥æ¨å¹¿éƒ½æ˜¯æŠ¢å å…ˆæœºï¼Œæˆ‘ä»¬ä¸ä½†è¦å’Œç«å“æ¯”æ‹¼ç”¨æˆ·ï¼Œæ›´è¦å¿«é€Ÿå“åº”ï¼Œæé«˜è½¬åŒ–ç‡ã€‚</p><p>4.<strong>è§†é¢‘é¦–å›¾</strong><br>è§†é¢‘å†…å®¹å½¢å¼çš„ç½‘ç«™ï¼Œèµ„æºå­˜å‚¨å¿…æ˜¯ä¸€å¤§éš¾é¢˜ã€‚å¦‚ä½•åšåˆ°ç¨³å‡†ç‹ ï¼Œé€Ÿåº¦å¿…ä¸å¯å°‘ï¼Œå¤§é‡çš„è§†é¢‘å ä½å›¾ä¹Ÿä¾¿æˆä¸ºäº†é‡ä¸­ä¹‹é‡ã€‚</p><h4 id="äº”ã€å®è·µæ–¹æ¡ˆ"><a href="#äº”ã€å®è·µæ–¹æ¡ˆ" class="headerlink" title="äº”ã€å®è·µæ–¹æ¡ˆ"></a>äº”ã€å®è·µæ–¹æ¡ˆ</h4><p>ç›¸ä¿¡åˆ°è¿™é‡Œï¼Œä½ å·²ç»å¯¹ <code>WebP</code> æœ‰äº†è¶³å¤Ÿçš„äº†è§£ï¼Œå¿«æ¥çœ‹çœ‹å®é™…é¡¹ç›®ä¸­æˆ‘ä»¬æ˜¯å¦‚ä½•ä½¿ç”¨çš„å§ï½</p><p><strong>æ–¹å¼ä¸€ï¼š<code>HTML5 Picture</code></strong><br><code>Picture</code> å…ƒç´ å…è®¸æˆ‘ä»¬åœ¨ä¸åŒçš„è®¾å¤‡ä¸Šæ˜¾ç¤ºä¸åŒçš„å›¾ç‰‡ï¼Œä¸€èˆ¬ç”¨äºå“åº”å¼ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">picture</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">type</span>=<span class="string">"image/webp"</span> <span class="attr">srcset</span>=<span class="string">"images/jartto.webp"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/jartto.jpg"</span> <span class="attr">alt</span>=<span class="string">â€œjarttoâ€™s</span> <span class="attr">demo</span>"&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">picture</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><code>Picture</code> ç®—æ˜¯æœ€ç®€å•æ˜“è¡Œçš„æ–¹æ¡ˆäº†ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„ä»¥ä¸‹ä¸¤ç‚¹ï¼š<br>1.å…¼å®¹æ€§ï¼Œ<code>IE</code> ä¸æ”¯æŒï¼Œå¯ä»¥æŸ¥çœ‹<a href="https://caniuse.com/#search=picture" target="_blank" rel="noopener">Picutre Element</a>ï¼›<br>2.è€é¡¹ç›®è¿ç§»æˆæœ¬è¾ƒå¤§ï¼Œéœ€è¦æ”¹åŠ¨æ¯ä¸€ä¸ª <code>IMG</code> èµ„æºï¼Œè¯·å°½å¯èƒ½å°è£…æˆç»„ä»¶ï¼›</p><p><strong>æ–¹å¼äºŒï¼š<code>Webpack + Nginx</code></strong><br>æ­¤æ–¹æ¡ˆåœ¨ <code>Webpack</code> æ‰“åŒ…è¿‡ç¨‹ç”Ÿæˆäº† <code>.webp</code> æ ¼å¼çš„å›¾ç‰‡ï¼Œé€šè¿‡ <code>Nginx</code> æ£€æµ‹æµè§ˆå™¨ <code>Accept</code> æ˜¯å¦åŒ…å« <code>image/webp</code> è€Œè¿›è¡ŒåŠ¨æ€è½¬å‘ã€‚<br><div class="alert info"><p>å®Œæ•´æ ¼å¼ï¼šaccept: image/webp,image/apng,image/<em>,</em>/*;q=0.8</p></div></p><p>1.é¡¹ç›®å¼•å…¥ <code>Webpack</code> æ’ä»¶ <code>imagemin-webp-webpack-plugin</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">const ImageminWebpWebpackPlugin = require(&apos;imagemin-webp-webpack-pluginâ€™);</span><br><span class="line"></span><br><span class="line">plugins: [</span><br><span class="line">            new ImageminWebpWebpackPlugin(&#123;</span><br><span class="line">                config: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        test: /\.(jpe?g|png)$/,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            quality: 60,</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                ],</span><br><span class="line">                overrideExtension: false,</span><br><span class="line">                detailedLogs: true,</span><br><span class="line">                strict: false</span><br><span class="line">            &#125;)</span><br><span class="line">        ],</span><br></pre></td></tr></table></figure></p><p>2.<code>Nginx</code> é…ç½®<br>æ£€æµ‹ <code>Accept</code> å¤´ä¸­æ˜¯å¦å«æœ‰ <code>WebP</code> å­—æ®µï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">map <span class="variable">$http_accept</span> <span class="variable">$webp_suffix</span> &#123;</span><br><span class="line">    default   <span class="string">""</span>;</span><br><span class="line">    <span class="string">"~*webp"</span>  <span class="string">".webp"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å¦‚æœæµè§ˆå™¨æ”¯æŒ <code>WebP</code> æ ¼å¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å°† <code>.png</code> æˆ–è€… <code>.jpg</code> æ ¼å¼å›¾ç‰‡è½¬å‘åˆ° <code>.webp</code> æ ¼å¼ä¸‹ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">location  ~* ^/_nuxt/img/(.+\.png|jpe?g)$ &#123;</span><br><span class="line">    rewrite ^/_nuxt/img/(.+\.png|jpe?g)$ /<span class="variable">$1</span> <span class="built_in">break</span>;</span><br><span class="line">    root /apps/srv/instance/<span class="built_in">test</span>-webp.jartto.wang/.nuxt/dist/client/img/;</span><br><span class="line">    add_header Vary Accept;</span><br><span class="line">    try_files <span class="variable">$uri</span><span class="variable">$webp_suffix</span> <span class="variable">$uri</span> =404;</span><br><span class="line">    expires 30d;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è®¾ç½®å®Œ <code>Nginx</code> è½¬å‘è§„åˆ™åï¼Œè®°å¾— <code>Reload Nginx</code>ã€‚åˆ·æ–°æµè§ˆå™¨ï¼Œè¿™æ—¶å€™æµè§ˆå™¨ä¸­çš„å›¾ç‰‡ <code>Type</code> ç±»å‹å·²ç»å˜æˆäº† <code>WebP</code> æ ¼å¼ã€‚</p><p><strong>æ–¹å¼ä¸‰ï¼šæœåŠ¡ç«¯ <code>Nginx PageSpeed</code> æ¨¡å—</strong><br><code>Google</code> å¼€å‘çš„ <code>PageSpeed</code> æ¨¡å—æœ‰ä¸€ä¸ªåŠŸèƒ½ï¼Œä¼šè‡ªåŠ¨å°†å›¾åƒè½¬æ¢æˆ <code>WebP</code> æ ¼å¼æˆ–è€…æ˜¯æµè§ˆå™¨æ‰€æ”¯æŒçš„å…¶å®ƒæ ¼å¼ã€‚<br><div class="alert info"><p>å®‰è£… Nginx æ¨¡å—è¯·æŸ¥çœ‹æ–‡æ¡£ï¼š<a href="https://www.modpagespeed.com/doc/build_ngx_pagespeed_from_source#dependencies" target="_blank" rel="noopener">Build ngx_pagespeed From Source</a></p></div></p><p>å®‰è£…æˆåŠŸä¹‹åï¼Œéœ€è¦åœ¨ <code>Nginx Config</code> ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">pagespeed</span> <span class="literal">on</span>;</span><br><span class="line"><span class="attribute">pagespeed</span> FileCachePath <span class="string">"/var/cache/ngx_pagespeed/"</span>;</span><br><span class="line"><span class="comment"># pagespeed RewriteLevel OptimizeForBandwidth;</span></span><br><span class="line"><span class="attribute">pagespeed</span> XHeaderValue <span class="string">"Powered By Jartto"</span>;</span><br><span class="line"><span class="attribute">pagespeed</span> EnableFilters convert_gif_to_png;</span><br><span class="line"><span class="attribute">pagespeed</span> EnableFilters convert_png_to_jpeg;</span><br><span class="line"><span class="attribute">pagespeed</span> EnableFilters convert_jpeg_to_webp;</span><br><span class="line"><span class="attribute">pagespeed</span> ImageRecompressionQuality <span class="number">10</span>;</span><br><span class="line"><span class="comment"># pagespeed EnableFilters convert_jpeg_to_progressive;</span></span><br><span class="line"><span class="comment"># pagespeed EnableFilters inline_images;</span></span><br><span class="line"></span><br><span class="line">location ~ "\.pagespeed\.([a-z]\.)?[a-z]&#123;2&#125;\.[^.]&#123;10&#125;\.[^.]+" &#123;</span><br><span class="line"><span class="attribute">add_header</span> <span class="string">""</span> <span class="string">""</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="attribute">location</span> <span class="regexp">~ "^/pagespeed_static/"</span> &#123; &#125;</span><br><span class="line"><span class="attribute">location</span> <span class="regexp">~ "^/ngx_pagespeed_beacon$"</span> &#123; &#125;</span><br></pre></td></tr></table></figure></p><p>çœ‹èµ·æ¥æ­¤æ–¹æ¡ˆæ˜¯æœ€ä½³é€‰æ‹©ï¼Œæ—¢æ²¡æœ‰å‰ç«¯ä»£ç ä¾µå…¥ï¼Œä¹Ÿä¸éœ€è¦å„ç§å—…æ¢ï¼ŒæœåŠ¡ç«¯ä¸€ä¸ªæ¨¡å—å°±æå®šäº†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“æˆ‘ä»¬äº«å—ä¾¿åˆ©çš„åŒæ—¶ï¼Œ<strong>ä¸€å®šè¦æ˜ç¡®å…·ä½“çš„åŸç†ï¼Œå¤šç»´åº¦æ€è€ƒ</strong>ã€‚</p><p>æ—¢ç„¶åœ¨æœåŠ¡ç«¯å®Œæˆ <code>WebP</code> æ ¼å¼çš„è½¬åŒ–ï¼Œé‚£ä¹ˆä¸€å®šè¦æ³¨æ„æ­¤æ“ä½œå¯¹æœåŠ¡å™¨çš„æ€§èƒ½æŸè€—ã€‚æˆ‘ä»¬ä¸å¦¨è¯•ä¸€ä¸‹ï¼Œé€šè¿‡ <code>Wrk</code> å¯¹æœåŠ¡å™¨æ–½å‹ï¼Œçœ‹ä¸€ä¸‹æœåŠ¡å™¨çš„å¹¶å‘æ€§èƒ½ã€‚</p><p>å…·ä½“çš„å‹æµ‹è¿‡ç¨‹å°±ä¸ç»†è¯´äº†ï¼Œæ„Ÿå…´è¶£çš„ç«¥é‹å¯ä»¥æŸ¥çœ‹ï¼š<a href="http://jartto.wang/2020/04/05/about-wrk/">Web æ€§èƒ½æµ‹è¯•</a>ã€‚æˆ‘ä»¬ç›´æ¥ä¸Šç»“è®ºï¼š</p><p><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/webp/nginx.png" alt="Nginx CPU"></p><p><strong>ç›¸æ¯”è½¬ç ï¼Œç›¸åŒ <code>QPS</code> ä¸‹ <code>Nginx</code> å¯¹ <code>CPU</code> çš„ä½¿ç”¨ä¸Šå‡äº† <code>70%</code>ï¼Œé¡µé¢æå‡æ—¶é—´åœ¨æ¯«ç§’é‡çº§ï¼Œæ€§ä»·æ¯”ä¸é«˜</strong>ã€‚</p><p><strong>æ–¹å¼å››ï¼š<code>Nginx + Luaï¼ˆOpenRestyï¼‰</code></strong><br>å…ˆæ¥ç§‘æ™®ä¸€ä¸‹ï¼š<code>OpenResty</code> æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ <code>Web</code> åº”ç”¨æœåŠ¡å™¨ï¼Œ<code>Web</code> å¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨ <code>Lua</code> è„šæœ¬è¯­è¨€è°ƒåŠ¨ <code>Nginx</code> æ”¯æŒçš„å„ç§ <code>C</code> ä»¥åŠ <code>Lua</code> æ¨¡å—ï¼Œæ›´ä¸»è¦çš„æ˜¯åœ¨æ€§èƒ½æ–¹é¢ï¼Œ<code>OpenResty</code> å¯ä»¥å¿«é€Ÿæ„é€ å‡ºè¶³ä»¥èƒœä»» <code>10K</code> ä»¥ä¸Šå¹¶å‘è¿æ¥å“åº”çš„è¶…é«˜æ€§èƒ½ <code>Web</code> åº”ç”¨ç³»ç»Ÿã€‚</p><p><code>Lua</code> æ˜¯ä¸€ç§è½»é‡å°å·§çš„è„šæœ¬è¯­è¨€ï¼Œç”¨æ ‡å‡† <code>C</code> è¯­è¨€ç¼–å†™å¹¶ä»¥æºä»£ç å½¢å¼å¼€æ”¾ï¼Œå…¶è®¾è®¡ç›®çš„æ˜¯ä¸ºäº†åµŒå…¥åº”ç”¨ç¨‹åºä¸­ï¼Œä»è€Œä¸ºåº”ç”¨ç¨‹åºæä¾›çµæ´»çš„æ‰©å±•å’Œå®šåˆ¶åŠŸèƒ½ã€‚</p><p><strong>1.ç¼–å†™ <code>Lua</code> è„šæœ¬</strong><br><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">file_exists</span><span class="params">(name)</span></span></span><br><span class="line">   <span class="keyword">local</span> f=<span class="built_in">io</span>.<span class="built_in">open</span>(name,<span class="string">"r"</span>)</span><br><span class="line">   <span class="keyword">if</span> f~=<span class="literal">nil</span> <span class="keyword">then</span> <span class="built_in">io</span>.<span class="built_in">close</span>(f) <span class="keyword">return</span> <span class="literal">true</span> <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span> <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">local</span> newFile = ngx.var.request_filename;</span><br><span class="line"><span class="keyword">local</span> originalFile = newFile:<span class="built_in">sub</span>(<span class="number">1</span>, #newFile - <span class="number">5</span>);</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> file_exists(originalFile) <span class="keyword">then</span></span><br><span class="line">  ngx.<span class="built_in">exit</span>(<span class="number">404</span>);</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">execute</span>(<span class="string">"cwebp -q 75 "</span> .. originalFile  .. <span class="string">" -o "</span> .. newFile);</span><br><span class="line"><span class="keyword">if</span> file_exists(newFile) <span class="keyword">then</span></span><br><span class="line">    ngx.exec(ngx.var.uri)</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    ngx.<span class="built_in">exit</span>(<span class="number">404</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure></p><p>ä¸è€ƒè™‘å­¦ä¹ æˆæœ¬çš„è¯ï¼Œ<code>Nginx + Lua</code> å°†ä¼šæ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚</p><p><strong>2.é…ç½® <code>Nginx</code> æ–‡ä»¶</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># http ä¸­åŠ å…¥ï¼Œlua è„šæœ¬çš„æœç´¢è·¯å¾„</span></span><br><span class="line">lua_package_path <span class="string">"/usr/local/openresty/nginx/conf/jartto/?.lua;"</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># server ä¸­é…ç½® location</span></span><br><span class="line">location /images &#123;</span><br><span class="line">  expires 365d;</span><br><span class="line">  <span class="comment"># å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™é€šè¿‡ @webp è¿›è¡Œå†…éƒ¨é‡å®šå‘</span></span><br><span class="line">  try_files <span class="variable">$uri</span> <span class="variable">$uri</span>/ @webp; </span><br><span class="line">&#125;</span><br><span class="line">location @webp&#123;</span><br><span class="line">  <span class="comment"># å›¾ç‰‡è®¿é—®åœ°å€</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="variable">$uri</span> ~ <span class="string">"/([a-zA-Z0-9-_]+)\.(png|jpg|gif)\.webp"</span>) &#123; </span><br><span class="line">    <span class="comment"># æŸ¥æ‰¾æ‰§è¡Œçš„ lua è„šæœ¬</span></span><br><span class="line">    content_by_lua_file <span class="string">"/usr/local/nginx/conf/jartto/webp.lua"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><strong>è¡¥å……ï¼šæµè§ˆå™¨å—…æ¢ï¼ˆé˜¿é‡Œäº‘ <code>OSS</code> æ–¹å¼ï¼‰</strong><br>1.æœ¬åœ°å—…æ¢ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// check_webp_feature:</span></span><br><span class="line"><span class="comment">// 'feature' can be one of 'lossy', 'lossless', 'alpha' or 'animation'.</span></span><br><span class="line"><span class="comment">// 'callback(feature, result)' will be passed back the detection result (in an asynchronous way!)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">check_webp_feature</span>(<span class="params">feature, callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> kTestImages = &#123;</span><br><span class="line">        lossy: <span class="string">"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"</span>,</span><br><span class="line">        lossless: <span class="string">"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA=="</span>,</span><br><span class="line">        alpha: <span class="string">"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA=="</span>,</span><br><span class="line">        animation: <span class="string">"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> img = <span class="keyword">new</span> Image();</span><br><span class="line">    img.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> result = (img.width &gt; <span class="number">0</span>) &amp;&amp; (img.height &gt; <span class="number">0</span>);</span><br><span class="line">        callback(feature, result);</span><br><span class="line">    &#125;;</span><br><span class="line">    img.onerror = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        callback(feature, <span class="literal">false</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    img.src = <span class="string">`data:image/webp;base64<span class="subst">$&#123;kTestImages[feature]&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>2.è°ƒç”¨æ–¹å¼<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Jartto's Demo</span></span><br><span class="line">check_webp_feature(<span class="string">'lossy'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">feature, isSupported</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (isSupported) &#123;</span><br><span class="line">        <span class="comment">// webp is supported, you can cache the result here if you want</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><div class="alert danger"><p>è¯·æ³¨æ„ï¼Œå›¾åƒåŠ è½½æ˜¯éé˜»å¡ä¸”å¼‚æ­¥çš„ã€‚ è¿™æ„å‘³ç€ä¾èµ–äº WebP æ”¯æŒçš„ä»»ä½•ä»£ç æœ€å¥½éƒ½åº”æ”¾åœ¨å›è°ƒå‡½æ•°ä¸­ã€‚</p></div><h4 id="å…­ã€éƒ¨ç½²æ¨¡å‹"><a href="#å…­ã€éƒ¨ç½²æ¨¡å‹" class="headerlink" title="å…­ã€éƒ¨ç½²æ¨¡å‹"></a>å…­ã€éƒ¨ç½²æ¨¡å‹</h4><p>æœåŠ¡ç«¯éƒ¨ç½²æ¨¡å‹éœ€è¦ç®€å•äº†è§£ä¸€ä¸‹ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ ¹æ®ä¸åŒçš„å®é™…æƒ…å†µä»ä¸Šè¿°<a href="http://jartto.wang/2020/05/02/webp-practice/">å››ç§æ–¹æ¡ˆ</a>ä¸­è¿›è¡Œé€‰æ‹©äº†ã€‚<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/webp/server.png" alt="Server"></p><p>æ³¨æ„ï¼Œå¦‚æœä½ éœ€è¦å¯¹ <code>Nginx</code> è¿›è¡Œé…ç½®ï¼Œè¯·ä¸è¦æ“ä½œ <code>Load Balancer</code> å±‚ï¼Œå°½é‡åœ¨åº”ç”¨æœåŠ¡å™¨å±‚æ“ä½œã€‚</p><h4 id="ä¸ƒã€æŠ€æœ¯æ­ç§˜"><a href="#ä¸ƒã€æŠ€æœ¯æ­ç§˜" class="headerlink" title="ä¸ƒã€æŠ€æœ¯æ­ç§˜"></a>ä¸ƒã€æŠ€æœ¯æ­ç§˜</h4><p>å¬èµ·æ¥å¾ˆé…·ï¼Œé‚£ä¹ˆ <code>WebP</code> ç©¶ç«Ÿä½¿ç”¨äº†ä»€ä¹ˆå¾ˆé­”æ³•ï¼Œæˆ‘ä»¬æ¥æ­ç§˜ä¸€ä¸‹ï¼š              </p><p><strong>1.åˆ†å— <code>MacroBlocking</code></strong><br>å°†å›¾ç‰‡åˆ’åˆ†æˆå¤šä¸ªå®å— <code>Macro Blocks</code>ï¼Œå…¸å‹çš„å®å—ç”±ä¸€ä¸ª <code>16Ã—16</code> çš„äº®åº¦åƒç´  <code>luma pixel</code> å—å’Œä¸¤ä¸ª <code>8Ã—8</code> çš„è‰²åº¦åƒç´  <code>chroma pixel</code> å—ç»„æˆã€‚<br><div class="alert success"><p>åˆ†å—è¶Šå°ï¼Œé¢„æµ‹è¶Šå‡†ï¼Œéœ€è¦è®°å½•çš„ä¿¡æ¯ä¹Ÿè¶Šå¤šã€‚</p></div><br>ä¸€èˆ¬æ¥è¯´ï¼Œç»†èŠ‚è¶Šä¸°å¯Œçš„åœ°æ–¹ï¼Œåˆ†å—è¶Šç»†ï¼Œå³ä½¿ç”¨ <code>4Ã—4</code> åˆ†å—é¢„æµ‹ã€‚ç»†èŠ‚ç›¸å¯¹ä¸ä¸°å¯Œçš„åœ°æ–¹ä½¿ç”¨ <code>16Ã—16</code> åˆ†å—ã€‚</p><p><strong>2.å¸§å†…é¢„æµ‹</strong><br><code>WebP</code> æœ‰æŸå‹ç¼©ä½¿ç”¨äº†å¸§å†…é¢„æµ‹ç¼–ç ï¼Œè¿™ä¸€æŠ€æœ¯ä¹Ÿè¢«ç”¨äº <code>VP8</code> è§†é¢‘ç¼–ç ä¸­çš„å…³é”®å¸§å‹ç¼©ã€‚</p><p><code>VP8</code> æœ‰å››ç§å¸¸è§çš„å¸§å†…é¢„æµ‹æ¨¡å‹ï¼š</p><ul><li><code>H_PRED(horizontal prediction)</code>ï¼šåƒç´ å—ä¸­æ¯ä¸€è¡Œä½¿ç”¨å…¶å·¦è¾¹ä¸€åˆ— <code>Col L</code> çš„æ•°æ®å¡«å……ï¼›</li><li><code>V_PRED(vertical prediction)</code>ï¼šåƒç´ å—ä¸­æ¯ä¸€åˆ—ä½¿ç”¨å…¶ä¸Šè¾¹ä¸€è¡Œ <code>Row A</code> çš„æ•°æ®å¡«å……ï¼›</li><li><code>DC_PRED(DC prediction)</code>ï¼šåƒç´ å—ä¸­æ¯ä¸ªå•å…ƒä½¿ç”¨ <code>Row A</code> å’Œ <code>Col L</code> çš„æ‰€æœ‰åƒç´ çš„å¹³å‡å€¼å¡«å……ï¼›</li><li><code>TM_PRED(TrueMotion prediction)</code>ï¼šæ··åˆå¼ï¼Œæ¥è¿‘çœŸå®æ•°æ®ï¼›</li></ul><p>ä½¿ç”¨å“ªç§åˆ†å—é¢„æµ‹æ¨¡å¼æ˜¯åŠ¨æ€å†³å®šçš„ã€‚<br><div class="alert info"><p>ç¼–ç å™¨ä¼šå°†æ‰€æœ‰å¯èƒ½çš„é¢„æµ‹æ¨¡å¼éƒ½è®¡ç®—å‡ºæ¥ï¼Œç„¶åé€‰å‡ºé”™è¯¯ç¨‹åº¦æœ€å°çš„æ¨¡å¼ã€‚</p></div></p><p><strong>3.ç®—æ³•ç¼–ç </strong><br><code>WebP</code> ä½¿ç”¨ <code>Arithmetic entropy encoding</code>ï¼Œè¯¥ç®—æ³•ç›¸æ¯” <code>JPEG</code> ä¸Šä½¿ç”¨çš„ <code>Huffman encoding</code>ï¼Œåœ¨å‹ç¼©è¡¨ç°ä¸Šæ›´å‡ºè‰²ã€‚</p><p>æ·±å…¥ç ”ç©¶ï¼Œè¯·ç§»æ­¥ï¼š<br>1.<a href="https://developers.google.com/speed/webp/docs/compression?hl=zh_cn" target="_blank" rel="noopener">Compression Techniques</a><br>2.<a href="https://www.jianshu.com/p/7fb720ec57cd" target="_blank" rel="noopener">WebP æœ‰æŸå‹ç¼©çš„ç¼–ç è¿‡ç¨‹</a></p><h4 id="å…«ã€4ç§å¸¸è§å‹ç¼©æ ¼å¼"><a href="#å…«ã€4ç§å¸¸è§å‹ç¼©æ ¼å¼" class="headerlink" title="å…«ã€4ç§å¸¸è§å‹ç¼©æ ¼å¼"></a>å…«ã€4ç§å¸¸è§å‹ç¼©æ ¼å¼</h4><ol><li><p><code>Lossy</code><br>æœ‰æŸå‹ç¼©åŸºäº <code>VP8</code> å…³é”®å¸§ç¼–ç ã€‚ <code>VP8</code> æ˜¯ ä¸€ç§è§†é¢‘å‹ç¼©æ ¼å¼ï¼Œæ˜¯ <code>VP6</code> å’Œ <code>VP7</code> æ ¼å¼çš„åç»§æ ¼å¼ã€‚</p></li><li><p><code>Lossless</code><br>æ— æŸå‹ç¼©æ ¼å¼ç”± <code>WebP</code> å›¢é˜Ÿå¼€å‘ã€‚</p></li><li><p>Alpha<br><code>8</code> ä½ <code>Alpha</code> é€šé“å¯¹äºå›¾å½¢å›¾åƒå¾ˆæœ‰ç”¨ã€‚ <code>Alpha</code> é€šé“å¯ä¸æœ‰æŸ <code>RGB</code> ä¸€èµ·ä½¿ç”¨ï¼Œè¯¥åŠŸèƒ½ç›®å‰æ— æ³•åœ¨ä»»ä½•å…¶ä»–æ ¼å¼ä¸‹ä½¿ç”¨ã€‚</p></li><li><p>Animation<br>å®ƒæ”¯æŒçœŸå½©è‰²åŠ¨ç”»å›¾åƒã€‚</p></li></ol><div class="alert warning"><p>24 ä½è‰²è¢«ç§°ä¸ºçœŸå½©è‰²ï¼Œå®ƒå¯ä»¥è¾¾åˆ°äººçœ¼åˆ†è¾¨çš„æé™ï¼Œå‘è‰²æ•°æ˜¯ 1677 ä¸‡å¤šè‰²ï¼Œä¹Ÿå°±æ˜¯ 2 çš„ 24 æ¬¡æ–¹ã€‚</p></div><h4 id="ä¹ã€WebP-æ–¹æ¡ˆ-ROI"><a href="#ä¹ã€WebP-æ–¹æ¡ˆ-ROI" class="headerlink" title="ä¹ã€WebP æ–¹æ¡ˆ ROI"></a>ä¹ã€WebP æ–¹æ¡ˆ ROI</h4><p>ä¸€èˆ¬åœ¨åšæŠ€æœ¯é€‰å‹çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éƒ½è¦è¯„ä¼°å¼•å…¥æŠ€æœ¯çš„æ”¶ç›Šï¼Œè¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ <code>ROI</code>ã€‚é‚£ä¹ˆå¦‚æœä½ å†³å®šè¦ä½¿ç”¨ <code>WebP</code>ï¼Œä»¥ä¸‹çš„æ•°æ®å¯èƒ½ä¼šå¯¹ä½ äº§ç”Ÿå¸®åŠ©ï¼š<br>1.ä¼˜åŒ–åï¼Œç½‘ç«™èµ„æºå¤§å°ä» <code>2.6MB</code> å‡å°‘åˆ° <code>1.5MB</code>ï¼›<br>2.å›¾ç‰‡å¤§å°å‡å°‘åˆ°åŸæ¥çš„ <code>1/8</code>ï¼›<br>3.åŒä¸€æ—¶é—´æœåŠ¡å™¨è¯·æ±‚æ•°å¢åŠ  <code>335%</code>ï¼Œè¯·æ±‚æ—¶é•¿å‡å°‘ <code>75%</code>ï¼›<br>4.<code>Lighthouse Performance</code> è¯„åˆ† <code>97</code>ï¼Œ<code>FCP</code>ï¼Œ<code>FMP</code>å¤§æ¦‚åœ¨ <code>0.5-0.7s</code>ï¼ˆå’Œå…¶ä»–ä¼˜åŒ–æœ‰å…³ï¼‰ï¼›           </p><div class="alert danger"><p>ç½‘ç«™æ•°æ®å¯èƒ½ä¸å°½ç›¸åŒï¼Œä»¥ä¸Šæ•°æ®ä»…ä¾›å‚è€ƒã€‚</p></div><h4 id="åã€æ€»ç»“"><a href="#åã€æ€»ç»“" class="headerlink" title="åã€æ€»ç»“"></a>åã€æ€»ç»“</h4><p><a href="http://jartto.wang/2020/05/02/webp-practice/">ä¸Šæ–‡</a> æˆ‘ä»¬ä» <code>WebP</code> èƒŒæ™¯å±•å¼€ï¼Œä»‹ç»äº†å®ƒçš„å…¼å®¹æ€§ã€åº”ç”¨åœºæ™¯ï¼Œä»¥åŠ 4 ç§å®è·µæ–¹æ¡ˆï¼ŒåŒæ—¶ä¹Ÿæåˆ°äº†æµè§ˆå™¨å¦‚ä½•å—…æ¢ <code>WebP</code> æ ¼å¼ã€‚ååŠéƒ¨åˆ†ä¸»è¦ä»åŸç†å‡ºå‘ï¼Œäº†è§£ <code>WebP</code> æ ¼å¼çš„ç®—æ³•ç»†èŠ‚ä»¥åŠå‹ç¼©æ ¼å¼ï¼Œç”±æµ…å…¥æ·±ï¼Œé€å±‚å‰–æã€‚</p><p>æ–‡ç« æœ€åï¼Œæ‰“ä¸ªå°å¹¿å‘Šå§ã€‚å¦‚æœä½ æƒ³æ­ä¸Šåœ¨çº¿æ•™è‚²çš„å¿«è½¦ï¼Œå¿«é€Ÿæˆé•¿ï¼Œä¸å¦¨åŠ å…¥æˆ‘ä»¬ã€‚ä¸€èµ·æˆé•¿ï¼Œä¸€èµ·å­¦ä¹ ï¼Œä¸€èµ·æŒ‘æˆ˜æ›´å¤šæœ‰è¶£çš„äº‹æƒ…ï¼Œã€Œè·Ÿè°å­¦-é«˜é€”è¯¾å ‚ã€æ¬¢è¿ä½ ï¼Œè¯·å°†ç®€å†ç§æˆ‘ï½</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¯¹äºç½‘ç«™æ¥è¯´ï¼Œå›¾ç‰‡å§‹ç»ˆæ‰®æ¼”ç€é‡è¦è§’è‰²ã€‚å›¾ç‰‡å¤§å°ç›´æ¥å½±å“ç½‘ç«™é€Ÿåº¦ã€æµé‡ã€è¿è¥æˆæœ¬ä»¥åŠç”¨æˆ·ä½“éªŒã€‚å› æ­¤ï¼Œå‡å°‘å›¾ç‰‡å¤§å°æˆä¸ºç½‘ç«™ä¼˜åŒ–æœ€é‡è¦çš„ä¸€ä¸ªç¯èŠ‚ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="æŠ€æœ¯åšæ–‡" scheme="http://jartto.wang/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E6%96%87/"/>
    
    
      <category term="web" scheme="http://jartto.wang/tags/web/"/>
    
      <category term="optimization" scheme="http://jartto.wang/tags/optimization/"/>
    
      <category term="webp" scheme="http://jartto.wang/tags/webp/"/>
    
  </entry>
  
  <entry>
    <title>Webã€Œæ€§èƒ½æµ‹è¯•ã€çŸ¥å¤šå°‘ï¼Ÿ</title>
    <link href="http://jartto.wang/2020/04/05/about-wrk/"/>
    <id>http://jartto.wang/2020/04/05/about-wrk/</id>
    <published>2020-04-05T13:44:12.000Z</published>
    <updated>2020-04-06T15:22:02.000Z</updated>
    
    <content type="html"><![CDATA[<p>èº«ä¸ºå‰ç«¯çš„ä½ ï¼Œæ˜¯å¦ä¼šæœ‰è¿™æ ·çš„çƒ¦æ¼ï¼šéšç€è®¿é—®ç”¨æˆ·çš„æˆå€å¢åŠ ï¼Œç«™ç‚¹å˜å¾—è¶Šæ¥è¶Šè„†å¼±ã€‚ä»»ä½•çš„è®¿é—®è¿‡æ…¢æˆ–å´©æºƒéƒ½å°†æ˜¯ä¸€åœºç¾éš¾ã€‚<br><a id="more"></a><br>è¿™å°±å¯¹æˆ‘ä»¬å·¥ç¨‹å¸ˆæå‡ºäº†æ›´é«˜çš„è¦æ±‚ï¼Œè¦ä¿éšœç½‘ç«™çš„ã€Œå¯è®¿é—®æ€§ã€å’Œã€Œç¨³å®šæ€§ã€éƒ½ç»´æŒåœ¨ä¸€ä¸ªè¾ƒé«˜æ°´å¹³ã€‚é‚£ä¹ˆï¼Œæ˜¯æ—¶å€™äº†è§£äº†è§£ <code>Web</code> æ€§èƒ½æµ‹è¯•äº†ï¼</p><h4 id="ä¸€ã€æƒ…æ™¯å†ç°"><a href="#ä¸€ã€æƒ…æ™¯å†ç°" class="headerlink" title="ä¸€ã€æƒ…æ™¯å†ç°"></a>ä¸€ã€æƒ…æ™¯å†ç°</h4><p>æœ‰ä¸€ä¸ªå¤§å‹æ¨å¹¿æ´»åŠ¨æ¥äº†ï¼Œç±»ä¼¼ä¸æŠ¢ç«è½¦ç¥¨ã€æ·˜å®åŒåä¸€ï¼Œä½ èƒ½å¦å›ç­” <code>Boss</code> çš„å¦‚ä¸‹é—®é¢˜ï¼Ÿ<br>1.æˆ‘ä»¬çš„ç½‘ç«™æ˜¯å¦èƒ½æ‰›ä½å¦‚æ­¤çš„é«˜å¹¶å‘ï¼Ÿ<br>2.æœåŠ¡å™¨å•æœº <code>QPS</code> æ˜¯å¤šå°‘ï¼Ÿ<br>3.å¦‚æœç«™ç‚¹æ‰›ä¸ä½ï¼Œæ‰©å®¹çš„è¯ï¼Œéœ€è¦å‡ å°ï¼Ÿ<br>â€¦</p><p>ä¸€è¿ä¸²çš„é—®é¢˜ï¼Œå¦‚æœä½ æ‹›æ¶ä¸ä½ï¼Œä¸å¦¨ä»”ç»†<a href="http://jartto.wang/2020/04/05/about-wrk/">é˜…è¯»æœ¬æ–‡</a>ã€‚</p><h4 id="äºŒã€ä»€ä¹ˆæ˜¯æ€§èƒ½æµ‹è¯•ï¼Ÿ"><a href="#äºŒã€ä»€ä¹ˆæ˜¯æ€§èƒ½æµ‹è¯•ï¼Ÿ" class="headerlink" title="äºŒã€ä»€ä¹ˆæ˜¯æ€§èƒ½æµ‹è¯•ï¼Ÿ"></a>äºŒã€ä»€ä¹ˆæ˜¯æ€§èƒ½æµ‹è¯•ï¼Ÿ</h4><p>è¦å›ç­”ä¸Šé¢çš„é—®é¢˜ï¼Œéœ€è¦æˆ‘ä»¬æœ‰ä¸€äº›çŸ¥è¯†å‚¨å¤‡ã€‚ä¸ç€æ€¥ï¼Œå¾ªåºæ¸è¿›ï¼Œå„ä¸ªå‡»ç ´ã€‚<br><div class="alert success"><p>ä¸€èˆ¬æ¥è¯´ã€Œæ€§èƒ½æµ‹è¯•ã€åŒ…æ‹¬å‹åŠ›æµ‹è¯•ã€è´Ÿè½½æµ‹è¯•ã€å®¹é‡æµ‹è¯•ä¸‰ç§ä¸»è¦æµ‹è¯•ç±»å‹ã€‚</p></div></p><p><strong>1.å‹åŠ›æµ‹è¯• <code>StressTest</code></strong><br>å‹åŠ›æµ‹è¯•å¯ä»¥æµ‹è¯•ç½‘ç«™åœ¨æŸä¸ªç‰¹å®šçš„æŒç»­çš„å‹åŠ›ä¸‹è¿è¡Œçš„ç¨³å®šæ€§ã€‚</p><p><strong>2.è´Ÿè½½æµ‹è¯• <code>LoadTest</code></strong><br>è´Ÿè½½æµ‹è¯•æ˜¯ä¸ºäº†æ£€éªŒç³»ç»Ÿåœ¨ç»™å®šè´Ÿè½½ä¸‹æ˜¯å¦èƒ½è¾¾åˆ°é¢„æœŸæ€§èƒ½æŒ‡æ ‡ã€‚</p><p><strong>3.å®¹é‡æµ‹è¯• <code>CapabilityTest</code></strong><br>å®¹é‡æµ‹è¯•é’ˆå¯¹æ•°æ®åº“è€Œè¨€ï¼Œæ˜¯åœ¨æ•°æ®åº“ä¸­æœ‰è¾ƒå¤§æ•°é‡çš„æ•°æ®è®°å½•æƒ…å†µä¸‹å¯¹ç³»ç»Ÿè¿›è¡Œçš„æµ‹è¯•ã€‚</p><p>å†…å®¹æ¯”è¾ƒå¤šï¼Œä¸ºäº†ä¸“æ³¨èšç„¦ï¼Œæˆ‘ä»¬æœ¬èŠ‚ä¸»è¦æ¥çœ‹ä¸€ä¸‹å‹åŠ›æµ‹è¯•ã€‚</p><h4 id="ä¸‰ã€å‹åŠ›æµ‹è¯•"><a href="#ä¸‰ã€å‹åŠ›æµ‹è¯•" class="headerlink" title="ä¸‰ã€å‹åŠ›æµ‹è¯•"></a>ä¸‰ã€å‹åŠ›æµ‹è¯•</h4><p>å‹åŠ›æµ‹è¯•æ˜¯é€šè¿‡ä¸æ–­å‘è¢«æµ‹ç³»ç»Ÿæ–½åŠ å‹åŠ›ï¼Œæµ‹è¯•ç³»ç»Ÿåœ¨å‹åŠ›æƒ…å†µä¸‹çš„æ€§èƒ½è¡¨ç°ã€‚ä¸»è¦è€ƒå¯Ÿå½“å‰è½¯ç¡¬ä»¶ç¯å¢ƒä¸‹ç³»ç»Ÿæ‰€èƒ½æ‰¿å—çš„æœ€å¤§è´Ÿè·å¹¶å¸®åŠ©å¼€å‘äººå‘˜æ‰¾å‡ºç³»ç»Ÿç“¶é¢ˆæ‰€åœ¨ã€‚æˆ‘ä»¬å¯ä»¥æ¨¡æ‹Ÿå·¨å¤§çš„æµé‡è¯·æ±‚ä»¥æŸ¥çœ‹åº”ç”¨ç¨‹åºåœ¨å³°å€¼ä½¿ç”¨æƒ…å†µä»¥åŠæœåŠ¡å™¨çŠ¶å†µã€‚</p><div class="alert info"><p>æœ‰æ•ˆçš„å‹åŠ›æµ‹è¯•å°†åº”ç”¨ä»¥ä¸‹è¿™äº›å…³é”®æ¡ä»¶ï¼šé‡å¤ï¼Œå¹¶å‘ï¼Œé‡çº§ï¼Œéšæœºå˜åŒ–ã€‚</p></div><p><strong>éœ€è¦æ³¨æ„çš„æ˜¯</strong>ï¼šå‹åŠ›æµ‹è¯•å¹¶ä¸ä¼šæŠ¥å‘Šæ˜¯ä»€ä¹ˆå¯¼è‡´äº†é—®é¢˜ã€‚å®ƒåªä¼šæŠ¥å‘Šè¿™æœ‰äº†é—®é¢˜ï¼Œä¾‹å¦‚ï¼šæŸ¥è¯¢é¡µé¢åœ¨å¹¶å‘ 1000 ä¸ªç”¨æˆ·ä½¿ç”¨æ—¶å˜æ…¢ä¸‹æ¥ï¼Œä½†å®ƒä¸ä¼šæ˜¾ç¤ºä»€ä¹ˆå¯¼è‡´äº†å˜æ…¢ã€‚</p><p>æ•è·åˆ°çš„æ€§èƒ½ç»Ÿè®¡æ•°æ®ä¾‹å¦‚ <code>CPU</code> å’Œå†…å­˜ä½¿ç”¨é‡åªæ˜¯å¼ºè°ƒäº†æ½œåœ¨çš„é—®é¢˜åŒºåŸŸï¼Œä½†å¹¶ä¸ä¼šæŒ‡å‡ºå®é™…çš„æ ¹æºåœ¨åº”ç”¨ç¨‹åºçš„ä»€ä¹ˆåœ°æ–¹ã€‚</p><p>æ›´å¤šçš„æ¦‚å¿µå¯ä»¥æŸ¥çœ‹ï¼š<a href="https://blog.csdn.net/weixin_40296254/article/details/80247111" target="_blank" rel="noopener">ä¸ºä»€ä¹ˆè¦è¿›è¡Œå‹åŠ›æµ‹è¯•?</a>ã€‚</p><h4 id="å››ã€æ ¸å¿ƒæŒ‡æ ‡"><a href="#å››ã€æ ¸å¿ƒæŒ‡æ ‡" class="headerlink" title="å››ã€æ ¸å¿ƒæŒ‡æ ‡"></a>å››ã€æ ¸å¿ƒæŒ‡æ ‡</h4><p>äº†è§£äº†ä¸Šè¿°å‹åŠ›æµ‹è¯•ä¹‹åï¼Œæˆ‘ä»¬å…ˆä¸ç€æ€¥è¿›è¡Œç½‘ç«™å‹æµ‹ï¼Œè¡¥å……å‡ ä¸ªå¯ä»¥è®©ä½ äº‹åŠåŠŸå€çš„æ ¸å¿ƒæŒ‡æ ‡ï¼š</p><p>1.ä»€ä¹ˆæ˜¯ <code>TPS</code> ï¼Ÿ<br>å³ <code>Transactions Per Second</code> çš„ç¼©å†™ï¼Œæ¯ç§’å¤„ç†çš„äº‹åŠ¡æ•°ç›®ã€‚ä¸€ä¸ªäº‹åŠ¡æ˜¯æŒ‡ä¸€ä¸ªå®¢æˆ·æœºå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ç„¶åæœåŠ¡å™¨åšå‡ºååº”çš„è¿‡ç¨‹ã€‚å®¢æˆ·æœºåœ¨å‘é€è¯·æ±‚æ—¶å¼€å§‹è®¡æ—¶ï¼Œæ”¶åˆ°æœåŠ¡å™¨å“åº”åç»“æŸè®¡æ—¶ï¼Œä»¥æ­¤æ¥è®¡ç®—ä½¿ç”¨çš„æ—¶é—´å’Œå®Œæˆçš„äº‹åŠ¡ä¸ªæ•°ï¼Œæœ€ç»ˆåˆ©ç”¨è¿™äº›ä¿¡æ¯ä½œå‡ºçš„è¯„ä¼°åˆ†ã€‚</p><div class="alert warning"><p>ä¸€ä¸ªäº‹åŠ¡å¯èƒ½å¯¹åº”å¤šä¸ªè¯·æ±‚ï¼Œè¿™ä¸æ•°æ®åº“çš„äº‹åŠ¡æ“ä½œæå…¶ç›¸ä¼¼ã€‚</p></div><p>2.ä»€ä¹ˆæ˜¯ <code>QPS</code> ï¼Ÿ<br><code>Queries Per Second</code> çš„ç¼©å†™ï¼Œæ¯ç§’èƒ½å¤„ç†æŸ¥è¯¢æ•°ç›®ï¼Œæ˜¯å¯¹ä¸€ä¸ªç‰¹å®šçš„æŸ¥è¯¢æœåŠ¡å™¨åœ¨è§„å®šæ—¶é—´å†…æ‰€å¤„ç†æµé‡å¤šå°‘çš„è¡¡é‡æ ‡å‡†ã€‚</p><p><strong>éœ€è¦æ³¨æ„çš„æ˜¯</strong>ï¼šè™½ç„¶åä¹‰ä¸Šæ˜¯æŸ¥è¯¢çš„æ„æ€ï¼Œä½†å®é™…ä¸Šï¼Œç°åœ¨ä¹ æƒ¯äºå¯¹å•ä¸€æ¥å£æœåŠ¡çš„å¤„ç†èƒ½åŠ›ç”¨ <code>QPS</code> è¿›è¡Œè¡¨è¿°ï¼ˆå³ä½¿å®ƒå¹¶ä¸æ˜¯æŸ¥è¯¢æ“ä½œï¼‰ã€‚</p><p>3.ä»€ä¹ˆæ˜¯ <code>RT</code> ï¼Ÿ<br>å“åº”æ—¶é—´ï¼Œå¤„ç†ä¸€æ¬¡è¯·æ±‚æ‰€éœ€è¦çš„å¹³å‡å¤„ç†æ—¶é—´ã€‚æˆ‘ä»¬ä¸€èˆ¬ä¼šå…³æ³¨ <code>90th</code> è¯·æ±‚çš„çš„å¤„ç†æ—¶é—´ï¼Œå› ä¸ºå¯èƒ½å› ç½‘ç»œæƒ…å†µå‡ºç°æç«¯æƒ…å†µï¼Œé•¿å°¾æ•°æ®ä¼šå¯¹æˆ‘ä»¬äº§ç”Ÿå¹²æ‰°ã€‚</p><p>4.ç³»ç»Ÿ <code>CPU</code> åˆ©ç”¨ç‡<br>å¦‚æœç³»ç»Ÿçš„ <code>CPU</code> ä½¿ç”¨ç‡å·²ç»å¾ˆé«˜ï¼Œè¯´æ˜æˆ‘ä»¬çš„ç³»ç»Ÿæ˜¯ä¸ªè®¡ç®—åº¦å¾ˆå¤æ‚çš„ç³»ç»Ÿï¼Œè¿™æ—¶å€™å¦‚æœ <code>QPS</code> å·²ç»ä¸Šä¸å»äº†ï¼Œå°±éœ€è¦èµ¶ç´§æ‰©å®¹ï¼Œé€šè¿‡å¢åŠ æœºå™¨åˆ†æ‹…è®¡ç®—çš„æ–¹å¼æ¥æé«˜ç³»ç»Ÿçš„ååé‡ã€‚</p><p>5.ç³»ç»Ÿå†…å­˜<br>å¦‚æœ <code>CPU</code> ä½¿ç”¨ç‡ä¸€èˆ¬ï¼Œä½†æ˜¯ç³»ç»Ÿçš„ <code>QPS</code> ä¸Šä¸å»ï¼Œè¯´æ˜æˆ‘ä»¬çš„æœºå™¨å¹¶æ²¡æœ‰å¿™äºè®¡ç®—ï¼Œè€Œæ˜¯å—åˆ°å…¶ä»–èµ„æºçš„é™åˆ¶ï¼Œå¦‚å†…å­˜ã€<code>I/O</code>ã€‚è¿™æ—¶å€™é¦–å…ˆçœ‹ä¸‹å†…å­˜æ˜¯ä¸æ˜¯å·²ç»ä¸å¤Ÿäº†ï¼Œå¦‚æœå†…å­˜ä¸å¤Ÿäº†ï¼Œé‚£å°±èµ¶ç´§æ‰©å®¹äº†ã€‚</p><h4 id="äº”ã€QPS-å¦‚ä½•è®¡ç®—ï¼Ÿ"><a href="#äº”ã€QPS-å¦‚ä½•è®¡ç®—ï¼Ÿ" class="headerlink" title="äº”ã€QPS å¦‚ä½•è®¡ç®—ï¼Ÿ"></a>äº”ã€QPS å¦‚ä½•è®¡ç®—ï¼Ÿ</h4><p><code>QPS</code> å¹¶æ²¡æœ‰å‡†ç¡®çš„è®¡ç®—å…¬å¼ï¼Œä½†æ˜¯å®é™…å‹æµ‹ä¸­æˆ‘ä»¬å®Œå…¨å¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ¨¡å‹è¿›è¡Œä¼°ç®—ï¼š<br><div class="alert info"><p>åŸç†ï¼šæ¯å¤© 80% çš„è®¿é—®é›†ä¸­åœ¨ 20% çš„æ—¶é—´é‡Œï¼Œè¿™ 20% æ—¶é—´å«åšã€Œå³°å€¼æ—¶é—´ã€ã€‚</p></div></p><p>å…¬å¼ï¼š( æ€» <code>PV</code> æ•° <em> <code>80%</code> ) / ( æ¯å¤©ç§’æ•° </em> <code>20%</code> ) = å³°å€¼æ—¶é—´æ¯ç§’è¯·æ±‚æ•°(<code>QPS</code>)<br>æœºå™¨ï¼šå³°å€¼æ—¶é—´æ¯ç§’ <code>QPS</code> / å•å°æœºå™¨çš„ <code>QPS</code> = éœ€è¦çš„æœºå™¨</p><p>é—®ï¼šæ¯å¤© <code>300w PV</code> çš„åœ¨å•å°æœºå™¨ä¸Šï¼Œè¿™å°æœºå™¨éœ€è¦å¤šå°‘ <code>QPS</code>ï¼Ÿ<br>ç­”ï¼š<code>( 3000000 * 0.8 ) / (86400 * 0.2 ) = 139 (QPS)</code></p><p>é—®ï¼šå¦‚æœä¸€å°æœºå™¨çš„ <code>QPS</code> æ˜¯ <code>58</code> ï¼Œéœ€è¦å‡ å°æœºå™¨æ¥æ”¯æŒï¼Ÿ<br>ç­”ï¼š<code>139 / 58 = 3</code></p><p>å…·ä½“çš„è®¡ç®—å…¬å¼å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼š<a href="#">å³°å€¼ <code>QPS</code> å’Œæœºå™¨è®¡ç®—å…¬å¼</a>ã€‚</p><h4 id="å…­ã€æ¨èå·¥å…·"><a href="#å…­ã€æ¨èå·¥å…·" class="headerlink" title="å…­ã€æ¨èå·¥å…·"></a>å…­ã€æ¨èå·¥å…·</h4><p><a href="https://www.zhihu.com/question/21861449" target="_blank" rel="noopener">å‹æµ‹å·¥å…·</a>æœ‰å¾ˆå¤šï¼Œ<code>JMeter</code>ï¼Œ<code>LoadRunner</code>ï¼Œ<code>WebLoad</code>ï¼Œ<code>NeoLoad</code>ï¼Œ<code>Loadster</code>ï¼Œ<code>TcpCopy</code>ï¼Œ<code>AB</code>ï¼Œ<code>WebBench</code> ç­‰ç­‰ï¼Œææ€•ä¸€æ—¶é—´æ— æ³•è¯´å®Œã€‚ä½†æ˜¯è®ºèµ·ä¸Šæ‰‹èƒ½åŠ›ï¼Œå°±è¦è¯´è¯´æˆ‘ä»¬çš„ä¸»è§’ <code>wrk</code> äº†ã€‚</p><p><a href="https://github.com/wg/wrk" target="_blank" rel="noopener"><code>wrk</code></a> æ˜¯ä¸€æ¬¾é’ˆå¯¹ <code>Http</code> åè®®çš„åŸºå‡†æµ‹è¯•å·¥å…·ï¼Œå®ƒèƒ½å¤Ÿåœ¨å•æœºå¤šæ ¸ <code>CPU</code> çš„æ¡ä»¶ä¸‹ï¼Œä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„é«˜æ€§èƒ½ <code>I/O</code> æœºåˆ¶ï¼Œå¦‚ <code>Epoll</code>ï¼Œ<code>Kqueue</code> ç­‰ï¼Œé€šè¿‡å¤šçº¿ç¨‹å’Œäº‹ä»¶æ¨¡å¼ï¼Œå¯¹ç›®æ ‡æœºå™¨äº§ç”Ÿå¤§é‡çš„è´Ÿè½½ã€‚</p><p>æœ‰å¤šå®¹æ˜“ï¼Œæˆ‘ä»¬ä¸å¦¨è¯•è¯•çœ‹ï¼Ÿ</p><p>1.å®‰è£…<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/wg/wrk.git  </span><br><span class="line">cd wrk  </span><br><span class="line">make</span><br></pre></td></tr></table></figure></p><p>æ³¨æ„ä½¿ç”¨ <code>./wrk</code> å‘½ä»¤å¯åŠ¨ã€‚</p><p>2.åŸºæœ¬ä½¿ç”¨<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wrk -t12 -c400 -d30s http://127.0.0.1:8080/jartto</span><br></pre></td></tr></table></figure></p><p>å‚æ•°è¯´æ˜ï¼š<br><code>-c</code>ï¼š<code>HTTP</code> è¿æ¥æ•°ï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹å¤„ç† <code>N</code> = è¿æ¥æ•°/çº¿ç¨‹æ•°<br><code>-d</code>ï¼šæŒç»­æ—¶é—´ï¼Œ<code>2s</code>ï¼Œ<code>2m</code>ï¼Œ<code>2h</code><br><code>-t</code>ï¼šæ€»çš„çº¿ç¨‹æ•°<br><code>-s</code>ï¼šè„šæœ¬ï¼Œå¯ä»¥æ˜¯ <code>Lua</code> è„šæœ¬<br><code>-H</code>ï¼šå¢åŠ  <code>HTTP header</code>ï¼Œä¾‹å¦‚ï¼š<code>User-Agent: jartto</code><br><code>--latency</code>ï¼šè¾“å‡ºæ—¶é—´ç»Ÿè®¡çš„ç»†èŠ‚<br><code>--timeout</code>ï¼šè¶…æ—¶æ—¶é—´</p><p>3.è¾“å‡º<br>ä¸Šé¢æˆ‘ä»¬ä½¿ç”¨ <code>12</code> çº¿ç¨‹ï¼Œä¿æŒæ‰“å¼€ <code>400</code> ä¸ª <code>Http</code> è¿æ¥ï¼Œæ‰§è¡Œ <code>30s</code>ã€‚è„šæœ¬è¿è¡Œå®Œæ¯•ä¼šè¾“å‡ºï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Running 30s <span class="built_in">test</span> @ http://127.0.0.1:8080/jartto</span><br><span class="line">  12 threads and 400 connections</span><br><span class="line">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br><span class="line">    Latency   635.91us    0.89ms  12.92ms   93.69%</span><br><span class="line">    Req/Sec    56.20k     8.07k   62.00k    86.54%</span><br><span class="line">  22464657 requests <span class="keyword">in</span> 30.00s, 17.76GB <span class="built_in">read</span></span><br><span class="line">Requests/sec: 748868.53</span><br><span class="line">Transfer/sec:    606.33MB</span><br></pre></td></tr></table></figure></p><p>è¾“å‡ºè¯´æ˜ï¼š<br><code>Latency</code>ï¼šå“åº”æ—¶é—´<br><code>Req/Sec</code>ï¼šæ¯ä¸ªçº¿ç¨‹æ¯ç§’é’Ÿçš„å®Œæˆçš„è¯·æ±‚æ•°<br><code>Avg</code>ï¼šå¹³å‡<br><code>Max</code>ï¼šæœ€å¤§<br><code>Stdev</code>ï¼šæ ‡å‡†å·®<br><code>+/- Stdev</code>ï¼š æ­£è´Ÿä¸€ä¸ªæ ‡å‡†å·®å æ¯”</p><div class="alert danger"><p>æ ‡å‡†å·®å¤§è¯´æ˜æ ·æœ¬ç¦»æ•£ç¨‹åº¦é«˜ï¼Œç³»ç»Ÿæ€§èƒ½æ³¢åŠ¨å¤§ã€‚</p></div><p>åœ¨å‹æµ‹è¿‡ç¨‹ä¸­ï¼Œä¸€èˆ¬çº¿ç¨‹æ•°ä¸å®œè¿‡å¤šï¼Œ<code>CPU</code> æ ¸æ•°çš„ <code>2-4</code> å€å°±å¯ä»¥äº†ã€‚ å¤ªå¤šåè€Œå› ä¸ºçº¿ç¨‹åˆ‡æ¢è¿‡å¤šé€ æˆæ•ˆç‡é™ä½ï¼Œ å› ä¸º <code>wrk</code> ä¸æ˜¯ä½¿ç”¨æ¯ä¸ªè¿æ¥ä¸€ä¸ªçº¿ç¨‹çš„æ¨¡å‹ï¼Œ è€Œæ˜¯é€šè¿‡å¼‚æ­¥ç½‘ç»œ <code>I/O</code> æå‡å¹¶å‘é‡ã€‚</p><p>æ‰€ä»¥ç½‘ç»œé€šä¿¡ä¸ä¼šé˜»å¡çº¿ç¨‹æ‰§è¡Œï¼Œè¿™ä¹Ÿæ˜¯ <code>wrk</code> å¯ä»¥ç”¨å¾ˆå°‘çš„çº¿ç¨‹æ¨¡æ‹Ÿå¤§é‡ç½‘è·¯è¿æ¥çš„åŸå› ã€‚</p><h4 id="ä¸ƒã€é«˜çº§å®šåˆ¶"><a href="#ä¸ƒã€é«˜çº§å®šåˆ¶" class="headerlink" title="ä¸ƒã€é«˜çº§å®šåˆ¶"></a>ä¸ƒã€é«˜çº§å®šåˆ¶</h4><p>åˆ°è¿™é‡Œï¼Œç›¸ä¿¡æ–‡ç« å¼€å¤´æå‡ºçš„é—®é¢˜ï¼Œä½ å·²ç»å¯ä»¥å¾ˆå¥½çš„å›ç­”äº†ã€‚æˆ‘ä»¬ä¸å¦¨ç»§ç»­å‡çº§ï¼Œæ¥ä¸€äº›é«˜çº§å®šåˆ¶ã€‚å¯èƒ½å¾ˆå¤šç«¥é‹æ³¨æ„åˆ°äº†ä¸Šé¢æ–‡æ¡£ä¸­æåˆ°çš„ <code>-s</code> å‚æ•°äº†ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹å®˜æ–¹æ–‡æ¡£ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">An optional LuaJIT script can perform HTTP request generation, response processing, </span><br><span class="line">and custom reporting.</span><br></pre></td></tr></table></figure></p><p><code>LuaJIT</code> è„šæœ¬å¯ä»¥æ‰§è¡Œ <code>HTTP</code> è¯·æ±‚ç”Ÿæˆï¼Œå“åº”å¤„ç†å’Œè‡ªå®šä¹‰æŠ¥å‘Šã€‚è¿™é‡Œæ˜¯ <code>Lua</code> çš„ä¸€äº›<a href="https://github.com/wg/wrk/tree/master/scripts" target="_blank" rel="noopener">æ¡ˆä¾‹</a>ã€‚é‰´äºç¯‡å¹…è¿‡é•¿ï¼Œæœ¬èŠ‚æˆ‘ä»¬å…ˆäº†è§£åˆ°è¿™é‡Œï¼Œç²¾å½©éƒ¨åˆ†æˆ‘ä»¬å°±ç•™åˆ°<a href="#">ä¸‹ä¸€ç¯‡</a>ç»§ç»­æ¢è®¨å§ï¼</p><p>æ–‡ç« æœ€åï¼Œæ‰“ä¸ªå°å¹¿å‘Šå§ã€‚å¦‚æœä½ æƒ³æ­ä¸Šåœ¨çº¿æ•™è‚²çš„å¿«è½¦ï¼Œå¿«é€Ÿæˆé•¿ï¼Œä¸å¦¨åŠ å…¥æˆ‘ä»¬ã€‚ä¸€èµ·æˆé•¿ï¼Œä¸€èµ·å­¦ä¹ ï¼Œä¸€èµ·æŒ‘æˆ˜æ›´å¤šæœ‰è¶£çš„äº‹æƒ…ï¼Œã€Œè·Ÿè°å­¦-é«˜é€”è¯¾å ‚ã€æ¬¢è¿ä½ ï¼Œè¯·å°†ç®€å†ç§æˆ‘ï½</p><!-- `wrk` ä¸­æ‰§è¡Œ `HTTP` è¯·æ±‚çš„æ—¶å€™ï¼Œè°ƒç”¨ `Lua` åˆ†ä¸º `3` ä¸ªé˜¶æ®µï¼Œ`setup`ï¼Œ`running`ï¼Œ`done`ï¼Œæ¯ä¸ª `wrk` çº¿ç¨‹ä¸­éƒ½æœ‰ç‹¬ç«‹çš„è„šæœ¬ç¯å¢ƒã€‚ -->]]></content>
    
    <summary type="html">
    
      &lt;p&gt;èº«ä¸ºå‰ç«¯çš„ä½ ï¼Œæ˜¯å¦ä¼šæœ‰è¿™æ ·çš„çƒ¦æ¼ï¼šéšç€è®¿é—®ç”¨æˆ·çš„æˆå€å¢åŠ ï¼Œç«™ç‚¹å˜å¾—è¶Šæ¥è¶Šè„†å¼±ã€‚ä»»ä½•çš„è®¿é—®è¿‡æ…¢æˆ–å´©æºƒéƒ½å°†æ˜¯ä¸€åœºç¾éš¾ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="æŠ€æœ¯åšæ–‡" scheme="http://jartto.wang/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E6%96%87/"/>
    
    
      <category term="web" scheme="http://jartto.wang/tags/web/"/>
    
      <category term="wrk" scheme="http://jartto.wang/tags/wrk/"/>
    
  </entry>
  
  <entry>
    <title>ç½‘ç«™æ€§èƒ½æŒ‡æ ‡ - FMP</title>
    <link href="http://jartto.wang/2020/03/30/about-web-fmp/"/>
    <id>http://jartto.wang/2020/03/30/about-web-fmp/</id>
    <published>2020-03-30T03:13:15.000Z</published>
    <updated>2020-03-30T03:13:15.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¯¹äºå‰ç«¯ç«¥é‹æ¥è¯´ï¼Œä¼˜åŒ–æ˜¯ä¸€ä¸ªæ°¸æ’çš„è¯é¢˜ã€‚ä¸Šçº¿å¹¶ä¸æ˜¯ç½‘ç«™å¼€å‘çš„ç»ˆç‚¹ï¼Œå¦‚ä½•å¸å¼•ç”¨æˆ·ã€æå‡ç”¨æˆ·ä½“éªŒï¼Œåº”è¯¥æˆä¸ºæˆ‘ä»¬ <code>F2E</code> çš„è¿½æ±‚ç›®æ ‡ã€‚<br><a id="more"></a><br>å¦‚æœä½ å¯¹ä¼˜åŒ–è¿˜ä¸äº†è§£ï¼Œå»ºè®®å…ˆé˜…è¯»å¦‚ä¸‹ä¸¤ç¯‡æ–‡ç« ï¼š</p><ol><li><a href="http://jartto.wang/2019/02/16/web-optimization/">ç½‘ç«™ä¼˜åŒ–å®æˆ˜</a></li><li><a href="http://jartto.wang/2019/09/08/web-optimization-tools/">ç½‘ç«™ä¼˜åŒ–ï¼Œè¿™äº›å·¥å…·ä½ ä¸€å®šç”¨å¾—ç€</a></li></ol><p>å½“ç„¶ï¼Œè¡¡é‡ç½‘ç«™æ€§èƒ½çš„æŒ‡æ ‡æœ‰å¾ˆå¤šï¼Œä»Šå¤©æˆ‘ä»¬å°±æ¥çœ‹ä¸€ä¸ªã€Œä»¤äººè´¹è§£è€Œåˆå¤´ç–¼ã€çš„æŒ‡æ ‡ - <code>FMP</code>ã€‚</p><div class="alert success"><p><code>First Meaningful Paint</code> æ˜¯æŒ‡é¡µé¢çš„é¦–è¦å†…å®¹å‡ºç°åœ¨å±å¹•ä¸Šçš„æ—¶é—´ã€‚</p></div><h4 id="ä¸€ã€FMP-ä¹‹æ€ªç°è±¡"><a href="#ä¸€ã€FMP-ä¹‹æ€ªç°è±¡" class="headerlink" title="ä¸€ã€FMP ä¹‹æ€ªç°è±¡"></a>ä¸€ã€FMP ä¹‹æ€ªç°è±¡</h4><p>ç›®å‰å°šæ— æ ‡å‡†åŒ–çš„ <code>FMP</code> å®šä¹‰ï¼Œå› æ­¤ä¹Ÿæ²¡æœ‰æ€§èƒ½æ¡ç›®ç±»å‹ã€‚ éƒ¨åˆ†åŸå› åœ¨äºå¾ˆéš¾ä»¥é€šç”¨çš„æ–¹å¼ç¡®å®šã€Œæœ‰æ•ˆã€å¯¹äºæ‰€æœ‰é¡µé¢æ„å‘³ç€ä»€ä¹ˆã€‚ä½†æ˜¯ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œåœ¨å•ä¸ªé¡µé¢æˆ–å•ä¸ªåº”ç”¨ä¸­ï¼Œæœ€å¥½æ˜¯å°† <code>FMP</code> è§†ä¸ºä¸»è§’å…ƒç´ å‘ˆç°åœ¨å±å¹•ä¸Šçš„æ—¶åˆ»ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé¢ä¸´è¿™æ ·çš„é—®é¢˜ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/fmp/lighthouse.png" alt="Lighthouse è¯„åˆ†"><br><code>FCP</code> åœ¨å¯æ¥å—èŒƒå›´ï¼Œä½†æ˜¯ <code>FMP</code> å´å®Œå…¨å¤±æ§ã€‚</p><p>ä¹Ÿå¯èƒ½æ˜¯è¿™æ ·çš„é—®é¢˜ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/fmp/fmp1.png" alt="Performance FMP"></p><p>æˆ–è®¸è¿˜æœ‰è¿™æ ·çš„é—®é¢˜ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/fmp/fmp2.png" alt="Performance FMP"></p><p>ä¸ºä»€ä¹ˆç»“æ„ç±»ä¼¼çš„ç«™ç‚¹ï¼Œ<code>FMP</code> åŠ è½½å´åƒå·®ä¸‡åˆ«ã€‚è¦äº†è§£ <code>FMP</code> æˆ‘ä»¬éœ€è¦çŸ¥é“å®ƒçš„è®¡ç®—è§„åˆ™ï¼Œä¸‹é¢è®©æˆ‘ä»¬ä¸€å±‚å±‚æŠ½ä¸å‰¥èŒ§ã€‚</p><h4 id="äºŒã€åˆ¨æ ¹é—®åº•"><a href="#äºŒã€åˆ¨æ ¹é—®åº•" class="headerlink" title="äºŒã€åˆ¨æ ¹é—®åº•"></a>äºŒã€åˆ¨æ ¹é—®åº•</h4><p>ç©¶ç«Ÿæ˜¯ä»€ä¹ˆå¯¼è‡´ <code>FMP</code> çš„æ—¶æœºå·®è·å¦‚æ­¤ä¹‹å¤§ï¼Ÿæˆ–è®¸æˆ‘ä»¬å¯ä»¥ä» <code>FMP</code> å®šä¹‰æ¥è¯´èµ·ã€‚</p><p><code>When FMP and FCP are the same time in seconds, they share the same identical score. If FMP is slower than FCP, say when there&#39;s iframe content loading, then the FMP score will be lower than the FCP score.</code></p><p>ä»€ä¹ˆæ„æ€å‘¢ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€å¼ å®˜æ–¹å›¾ç‰‡ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/fmp/fmp.png" alt="FMP è¯„åˆ†è§„åˆ™"></p><p>å¦‚æœ <code>FCP</code> æ˜¯ <code>1.5s</code>ï¼Œ<code>FMP</code> æ˜¯ <code>3s</code>ï¼Œé‚£ä¹ˆ <code>FCP</code> åˆ†æ•°å°†ä¼šæ˜¯ <code>99</code>ï¼Œä½†æ˜¯ <code>FMP</code> åˆ†æ•°å°†æ˜¯ <code>75</code>ã€‚</p><p>é™¤äº†ä¸Šè¿°å½±å“å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å…³æ³¨ <code>Lighthouse V3</code> çš„è®°åˆ†è§„åˆ™ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/fmp/score.png" alt="è®°åˆ†è§„åˆ™"></p><p>è™½ç„¶ <code>FMP</code> æƒé‡ä»…ä¸º <code>1</code> ï¼Œå¾ˆé—æ†¾ï¼Œå› ä¸ºå¦‚ä¸Šè§„åˆ™çš„å­˜åœ¨ï¼Œæˆ‘ä»¬ç«™ç‚¹æ— æ³•åˆ°è¾¾æ»¡åˆ†ğŸ’¯ã€‚</p><div class="alert info"><p>ç¡®å®šé¡µé¢ä¸Šæœ€å…³é”®çš„ä¸»è§’å…ƒç´ ä¹‹åï¼Œæˆ‘ä»¬åº”ç¡®ä¿åˆå§‹è„šæœ¬åŠ è½½ä»…åŒ…å«æ¸²æŸ“è¿™äº›å…ƒç´ å¹¶ä½¿å…¶å¯äº¤äº’æ‰€éœ€çš„ä»£ç ã€‚</p></div><p>ç›¸å…³æºç ï¼š<br><a href="https://github.com/GoogleChrome/lighthouse/blob/master/lighthouse-core/audits/metrics/first-meaningful-paint.js" target="_blank" rel="noopener">Lighthouse FMP æºç </a><br><a href="https://medium.com/@aswin_s/score-a-perfect-100-in-lighthouse-audits-part-1-3199163037" target="_blank" rel="noopener">Score a perfect 100 in Lighthouse audits</a></p><h4 id="ä¸‰ã€é‡è¦ç»“è®º"><a href="#ä¸‰ã€é‡è¦ç»“è®º" class="headerlink" title="ä¸‰ã€é‡è¦ç»“è®º"></a>ä¸‰ã€é‡è¦ç»“è®º</h4><p>äº†è§£äº†ç›¸å…³è®¡ç®—è§„åˆ™ä¹‹åï¼Œæˆ‘ä»¬ç»§ç»­æ¥å‰–æ <code>FMP</code>ã€‚å¯¹äºä¸åŒçš„ç«™ç‚¹ï¼Œé¦–è¦å†…å®¹æ˜¯ä¸åŒçš„ï¼Œä¾‹å¦‚ï¼š</p><ul><li>å¯¹äºåšå®¢æ–‡ç« ï¼šã€Œå¤§æ ‡é¢˜ã€ + ã€Œé¦–å±æ–‡å­—ã€æ˜¯é¦–è¦å†…å®¹ï¼›</li><li>å¯¹äºç™¾åº¦æˆ–è€… <code>Google</code> çš„æœç´¢ç»“æœé¡µï¼šã€Œé¦–å±çš„ç»“æœã€å°±æ˜¯é¦–è¦å†…å®¹ï¼›</li><li>å¯¹äºæ·˜å®ç­‰è´­ç‰©ç½‘ç«™æ¥è¯´ï¼Œå›¾ç‰‡ä¼šæä¸ºé‡è¦ï¼Œå› æ­¤å®ƒæ˜¯é¦–è¦å†…å®¹ï¼›</li></ul><div class="alert danger"><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé€šå¸¸é¦–è¦å†…å®¹æ˜¯ä¸åŒ…æ‹¬ Headers å’Œå¯¼èˆªæ¡çš„ã€‚</p></div><p>ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•çš„å…¬å¼è¡¨ç¤ºï¼šã€Œé¦–æ¬¡æœ‰æ•ˆç»˜åˆ¶ = å…·æœ‰æœ€å¤§å¸ƒå±€å˜åŒ–çš„ç»˜åˆ¶ã€ã€‚</p><p>å¾ˆå¥½ï¼Œæ­¤åˆ»æˆ‘ä»¬ä¸ç”¨çº ç»“ã€Œé¦–æ¬¡æœ‰æ•ˆæ¸²æŸ“ã€äº†ï¼Œè½¬è€Œå»äº†è§£ã€Œæœ€å¤§å¸ƒå±€å˜åŒ–çš„ç»˜åˆ¶ã€ã€‚åŸºäº <code>Chromium</code> çš„å®ç°ï¼Œè¿™ä¸ªç»˜åˆ¶æ˜¯ä½¿ç”¨ <code>LayoutAnalyzer</code> è¿›è¡Œè®¡ç®—çš„ï¼Œå®ƒä¼šæ”¶é›†æ‰€æœ‰çš„å¸ƒå±€å˜åŒ–ï¼Œå½“å¸ƒå±€å‘ç”Ÿæœ€å¤§å˜åŒ–æ—¶å¾—å‡ºæ—¶é—´ã€‚</p><p>å…·æœ‰æœ€å¤§å¸ƒå±€å˜åŒ–çš„ç»˜åˆ¶å¦‚ä½•è®¡ç®—å‘¢ï¼Ÿ<br>1.ä¾¦å¬é¡µé¢å…ƒç´ çš„å˜åŒ–ï¼›<br>2.éå†æ¯æ¬¡æ–°å¢çš„å…ƒç´ ï¼Œå¹¶è®¡ç®—è¿™äº›å…ƒç´ çš„å¾—åˆ†æ€»ï¼›<br>3.å¦‚æœå…ƒç´ å¯è§ï¼Œå¾—åˆ†ä¸º <code>1 * weight</code>ï¼Œå¦‚æœå…ƒç´ ä¸å¯è§ï¼Œå¾—åˆ†ä¸º <code>0</code>ï¼›</p><p>è¿˜æ˜¯å¾ˆæŠ½è±¡ï¼Œæˆ‘ä»¬ç»§ç»­æ¢ç´¢ <code>LayoutAnalyzer</code>ï¼Œåœ¨æºç ä¸­å¾—åˆ°å¦‚ä¸‹å…¬å¼ï¼š<br><div class="alert info"><p>å¸ƒå±€æ˜¾è‘—æ€§ = æ·»åŠ çš„å¯¹è±¡æ•°ç›® / max(1, é¡µé¢é«˜åº¦ / å±å¹•é«˜åº¦)</p></div></p><p>è¿™ä¸‹æ¸…æ™°äº†ï¼Œæ—¢ç„¶å¯ä»¥ç®—å‡ºæ¥ï¼Œé‚£ä¹ˆä¼˜åŒ– <code>FMP</code> æŒ‡æ—¥å¯å¾…ã€‚ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºæ¥ã€Œå¸ƒå±€æ˜¾è‘—æ€§ã€æ˜¯é€šè¿‡æ·»åŠ å¯¹è±¡æ•°ç›®ä¸é¡µé¢é«˜åº¦æ¥è®¡ç®—çš„ã€‚ä¼¼ä¹å¯¹è±¡æ•°ç›®æˆäº†è§£å†³é—®é¢˜çš„å…³é”®èŠ‚ç‚¹ã€‚</p><p>æˆ‘ä»¬ç»§ç»­æ¢ç´¢ï¼Œå¦‚ä½•å»æ‰¾åˆ°å¯¹è±¡æ•°ç›®å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œæ‰“å¼€ <code>Chrome DevTool</code>ï¼Œåˆ‡åˆ° <code>Layout</code> é¢æ¿ã€‚å¦‚æœä½ è¿˜ä¸ä¼šä½¿ç”¨ <code>Layout</code> é¢æ¿ï¼Œå¯ä»¥å…ˆçœ‹çœ‹<a href="http://jartto.wang/2019/09/08/web-optimization-tools/">ç½‘ç«™ä¼˜åŒ–å·¥å…·</a>ã€‚</p><p>è¿™é‡Œå°±ä¸å±•å¼€äº†ï¼Œç›´æ¥ä¸Šå›¾ï¼Œçœ‹çœ‹çº¢æ¡†éƒ¨åˆ†ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/fmp/layout.png" alt="Layout Objects"></p><p>æƒŠä¸æƒŠå–œï¼Œæˆ‘ä»¬ç²¾ç®€ <code>DOM</code> ä¼¼ä¹å¯ä»¥å°†å…¬å¼ä¸­åˆ†å­å˜å°ï¼Œæˆ–è€…è®©é¡µé¢é«˜åº¦å¤§äºå±å¹•é«˜åº¦ã€‚åˆ°è¿™é‡Œï¼Œæ‰€æœ‰è°œå›¢éƒ½è§£å¼€äº†ï¼Œä¼˜åŒ– <code>FMP</code> ä¹Ÿå°±å˜å¾—æ¯«æ— æŒ‘æˆ˜äº†ã€‚</p><p>ç›¸å…³æºç ï¼š<br><a href="https://cs.chromium.org/chromium/src/third_party/blink/renderer/core/layout/layout_analyzer.h?type=cs&amp;q=LayoutAnalyzer&amp;sq=package:chromium&amp;g=0&amp;l=76" target="_blank" rel="noopener">LayoutAnalyzer æºç </a><br><a href="https://www.chromium.org/developers/how-tos/trace-event-profiling-tool/trace-event-reading" target="_blank" rel="noopener">Tracing Results</a><br><a href="https://www.chromium.org/developers/how-tos/trace-event-profiling-tool/trace-event-reading" target="_blank" rel="noopener">Understanding about:tracing results</a></p><h4 id="äº”ã€æ€»ç»“"><a href="#äº”ã€æ€»ç»“" class="headerlink" title="äº”ã€æ€»ç»“"></a>äº”ã€æ€»ç»“</h4><p>æˆ‘ä»¬ä»æ‰‘ç°Œè¿·ç¦»çš„ <code>FMP</code> è¡¨è±¡ä¸€å±‚å±‚æ‰¾åˆ°äº† <code>Lighthouse</code> çš„è®°åˆ†è§„åˆ™ï¼Œåˆä» <code>Tracing Results</code> ä¸­å¾—çŸ¥æœ€å¤§å¸ƒå±€å˜åŒ–çš„è®¡ç®—è§„åˆ™ï¼Œå› æ­¤è½¬å‘ <code>LayoutAnalyzer</code> æºç ç ”ç©¶ï¼Œæœ€ç»ˆæ‰¾åˆ° <code>Layout Objects</code>ï¼Œä»è€Œè§£å†³äº†é—®é¢˜ã€‚è™½ç„¶æ³¢æŠ˜ï¼Œä½†ç»“å±€ä»¤äººèˆ’é€‚ã€‚</p><p>æœ€åï¼Œå†å•°å—¦ä¸€ä¸‹ï¼Œä»¥ä¸‹ç»“è®ºå¯¹ç†è§£ <code>FMP</code> å¾ˆé‡è¦ï¼š</p><ul><li>å¯¹äºåšå®¢æ–‡ç« ï¼šã€Œå¤§æ ‡é¢˜ã€ + ã€Œé¦–å±æ–‡å­—ã€æ˜¯é¦–è¦å†…å®¹ï¼›</li><li>å¯¹äºç™¾åº¦æˆ–è€… <code>Google</code> çš„æœç´¢ç»“æœé¡µï¼šã€Œé¦–å±çš„ç»“æœã€å°±æ˜¯é¦–è¦å†…å®¹ï¼›</li><li>å¯¹äºæ·˜å®ç­‰è´­ç‰©ç½‘ç«™æ¥è¯´ï¼Œå›¾ç‰‡ä¼šæä¸ºé‡è¦ï¼Œå› æ­¤å®ƒæ˜¯é¦–è¦å†…å®¹ï¼›</li></ul><p>å¦‚æœä½ è§‰å¾—è¿˜æ˜¯è¿‡äºå¤æ‚ï¼Œä¸å¦¨å»è¯•è¯• <code>SSR</code> å§ï¼Œ<code>FMP</code> å°†ä¸å†æ˜¯çƒ¦æ¼ã€‚</p><p>æ–‡ç« æœ€åï¼Œæ‰“ä¸ªå°å¹¿å‘Šå§ã€‚å¦‚æœä½ æƒ³æ­ä¸Šåœ¨çº¿æ•™è‚²çš„å¿«è½¦ï¼Œå¿«é€Ÿæˆé•¿ï¼Œä¸å¦¨åŠ å…¥æˆ‘ä»¬ã€‚ä¸€èµ·æˆé•¿ï¼Œä¸€èµ·å­¦ä¹ ï¼Œä¸€èµ·æŒ‘æˆ˜æ›´å¤šæœ‰è¶£çš„äº‹æƒ…ï¼Œã€Œè·Ÿè°å­¦-é«˜é€”è¯¾å ‚ã€æ¬¢è¿ä½ ï¼Œè¯·å°†ç®€å†ç§æˆ‘ï½</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¯¹äºå‰ç«¯ç«¥é‹æ¥è¯´ï¼Œä¼˜åŒ–æ˜¯ä¸€ä¸ªæ°¸æ’çš„è¯é¢˜ã€‚ä¸Šçº¿å¹¶ä¸æ˜¯ç½‘ç«™å¼€å‘çš„ç»ˆç‚¹ï¼Œå¦‚ä½•å¸å¼•ç”¨æˆ·ã€æå‡ç”¨æˆ·ä½“éªŒï¼Œåº”è¯¥æˆä¸ºæˆ‘ä»¬ &lt;code&gt;F2E&lt;/code&gt; çš„è¿½æ±‚ç›®æ ‡ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="æŠ€æœ¯åšæ–‡" scheme="http://jartto.wang/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E6%96%87/"/>
    
    
      <category term="web" scheme="http://jartto.wang/tags/web/"/>
    
      <category term="lighthouse" scheme="http://jartto.wang/tags/lighthouse/"/>
    
      <category term="fmp" scheme="http://jartto.wang/tags/fmp/"/>
    
      <category term="optimization" scheme="http://jartto.wang/tags/optimization/"/>
    
  </entry>
  
  <entry>
    <title>èšç„¦ Web æ€§èƒ½æŒ‡æ ‡ TTI</title>
    <link href="http://jartto.wang/2020/03/29/web-tti/"/>
    <id>http://jartto.wang/2020/03/29/web-tti/</id>
    <published>2020-03-29T14:23:53.000Z</published>
    <updated>2020-03-30T03:12:56.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¦‚æœä½ ç»å¸¸åšç½‘ç«™ä¼˜åŒ–ï¼Œå¯èƒ½ä¼šé™·å…¥ä¸€ä¸ªæ€§èƒ½æŒ‡æ ‡çš„æ³¥æ½­å³ã€Œé¢å‘æŒ‡æ ‡ä¼˜åŒ–ã€ã€‚çœŸæ­£çš„ç”¨æˆ·ä½“éªŒä»æ¥ä¸æ˜¯æŒ‡æ ‡å†³å®šï¼Œç›¸åå®ƒåº”è¯¥æœ€çœŸå®çš„åæ˜ ç”¨æˆ·è¡Œä¸ºã€‚<br><a id="more"></a><br>æ‰€ä»¥æœ¬èŠ‚æˆ‘ä»¬å°±æ¥ç ”ç©¶ <code>TTI(Time to Interactive)</code>ï¼Œè¯é¢˜å±•å¼€ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€äº›èƒŒæ™¯çŸ¥è¯†ã€‚</p><h4 id="ä¸€ã€RAIL-æ¨¡å‹"><a href="#ä¸€ã€RAIL-æ¨¡å‹" class="headerlink" title="ä¸€ã€RAIL æ¨¡å‹"></a>ä¸€ã€RAIL æ¨¡å‹</h4><p><code>RAIL</code> æ˜¯ä¸€ç§ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„æ€§èƒ½æ¨¡å‹ã€‚æ¯ä¸ªç½‘ç»œåº”ç”¨å‡å…·æœ‰ä¸å…¶ç”Ÿå‘½å‘¨æœŸæœ‰å…³çš„å››ä¸ªä¸åŒæ–¹é¢ï¼Œä¸”è¿™äº›æ–¹é¢ä»¥ä¸åŒçš„æ–¹å¼å½±å“ç€æ€§èƒ½ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/tti/rail.png" alt="RAIL æ€§èƒ½æ¨¡å‹"></p><p>1.å“åº”ï¼šè¾“å…¥å»¶è¿Ÿæ—¶é—´ï¼ˆä»ç‚¹æŒ‰åˆ°ç»˜åˆ¶ï¼‰å°äº 100 æ¯«ç§’ã€‚<br>ç”¨æˆ·ç‚¹æŒ‰æŒ‰é’®ï¼ˆä¾‹å¦‚æ‰“å¼€å¯¼èˆªï¼‰ã€‚</p><p>2.åŠ¨ç”»ï¼šæ¯ä¸ªå¸§çš„å·¥ä½œï¼ˆä» JS åˆ°ç»˜åˆ¶ï¼‰å®Œæˆæ—¶é—´å°äº 16 æ¯«ç§’ã€‚<br>ç”¨æˆ·æ»šåŠ¨é¡µé¢ï¼Œæ‹–åŠ¨æ‰‹æŒ‡ï¼ˆä¾‹å¦‚ï¼Œæ‰“å¼€èœå•ï¼‰æˆ–çœ‹åˆ°åŠ¨ç”»ã€‚ æ‹–åŠ¨æ—¶ï¼Œåº”ç”¨çš„å“åº”ä¸æ‰‹æŒ‡ä½ç½®æœ‰å…³ï¼ˆä¾‹å¦‚ï¼Œæ‹‰åŠ¨åˆ·æ–°ã€æ»‘åŠ¨è½®æ’­ï¼‰ã€‚ æ­¤æŒ‡æ ‡ä»…é€‚ç”¨äºæ‹–åŠ¨çš„æŒç»­é˜¶æ®µï¼Œä¸é€‚ç”¨äºå¼€å§‹é˜¶æ®µã€‚</p><p>3.ç©ºé—²ï¼šä¸»çº¿ç¨‹ JS å·¥ä½œåˆ†æˆä¸å¤§äº 50 æ¯«ç§’çš„å—ã€‚<br>ç”¨æˆ·æ²¡æœ‰ä¸é¡µé¢äº¤äº’ï¼Œä½†ä¸»çº¿ç¨‹åº”è¶³å¤Ÿç”¨äºå¤„ç†ä¸‹ä¸€ä¸ªç”¨æˆ·è¾“å…¥ã€‚</p><p>4.åŠ è½½ï¼šé¡µé¢å¯ä»¥åœ¨ 1000 æ¯«ç§’å†…å°±ç»ªã€‚<br>ç”¨æˆ·åŠ è½½é¡µé¢å¹¶çœ‹åˆ°å…³é”®è·¯å¾„å†…å®¹ã€‚</p><div class="alert info"><p>å¦‚æœè¦æå‡ç½‘ç«™ç”¨æˆ·ä½“éªŒï¼ŒRAIL æ˜¯ä¸ªä¸é”™çš„è¯„ä¼°æ¨¡å‹ã€‚</p></div><h4 id="äºŒã€è§£è¯»-TTIï¼ˆé¡µé¢å¯äº¤äº’æ—¶é—´ï¼‰"><a href="#äºŒã€è§£è¯»-TTIï¼ˆé¡µé¢å¯äº¤äº’æ—¶é—´ï¼‰" class="headerlink" title="äºŒã€è§£è¯» TTIï¼ˆé¡µé¢å¯äº¤äº’æ—¶é—´ï¼‰"></a>äºŒã€è§£è¯» TTIï¼ˆé¡µé¢å¯äº¤äº’æ—¶é—´ï¼‰</h4><p><code>TTI</code> æŒ‡çš„æ˜¯åº”ç”¨æ—¢åœ¨è§†è§‰ä¸Šéƒ½å·²æ¸²æŸ“å‡ºäº†ï¼Œå¯ä»¥å“åº”ç”¨æˆ·çš„è¾“å…¥äº†ã€‚è¦äº†è§£ <code>TTI</code>ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“å®ƒçš„è®¡ç®—è§„åˆ™ï¼Œå…ˆæ¥çœ‹ä¸‹é¢è¿™å¼ å›¾ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/tti/tti.png" alt="TTI"></p><p>åœ¨<a href="https://docs.google.com/document/d/1GGiI9-7KeY3TPqS3YT271upUVimo-XiL5mwWorDUD4c/preview#" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a>ä¸­æ‰¾åˆ°äº†å¦‚ä¸‹æè¿°ï¼š<br><code>First Idle is the first early sign of time where the main thread has come at rest and the browser has completed a First Meaningful Paint.</code></p><p><code>Time to Interactive is after First Meaningful Paint. The browserâ€™s main thread has been at rest for at least 5 seconds and there are no long tasks that will prevent immediate response to user input.</code></p><p>æˆ‘ä»¬å¯ä»¥ç®€å•çš„ç†è§£ä¸€ä¸‹ï¼š<br>1.<code>First Idle</code> æ˜¯ä¸»çº¿ç¨‹å¤„äºé™æ­¢çŠ¶æ€ä¸”æµè§ˆå™¨å·²å®Œæˆ <code>First Meanfulful Paint</code> çš„ç¬¬ä¸€ä¸ªæ—©æœŸè¿¹è±¡ï¼›<br>2.<code>TTI</code> åœ¨ <code>FMP</code> ä¹‹åï¼Œæµè§ˆå™¨ä¸»çº¿ç¨‹é™æ­¢è‡³å°‘ <code>5s</code>ï¼Œå¹¶ä¸”æ²¡æœ‰å¯ä»¥é˜»æ–­ç”¨æˆ·äº¤äº’å“åº”çš„ã€Œé•¿ä»»åŠ¡ã€ã€‚</p><p>å¦‚æœä½ å¯¹ <code>FMP</code> è¿˜ä¸äº†è§£ï¼Œä¸å¦¨å…ˆçœ‹çœ‹è¿™ç¯‡æ–‡ç« ï¼š<a href="http://jartto.wang/2020/03/15/about-web-fmp/">ç½‘ç«™æ€§èƒ½æŒ‡æ ‡ - <code>FMP</code></a>ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œç¬¬äºŒæ¡ä¸­æåˆ°çš„ã€Œé•¿ä»»åŠ¡ã€åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><h4 id="ä¸‰ã€Long-Taskï¼ˆé•¿ä»»åŠ¡ï¼‰"><a href="#ä¸‰ã€Long-Taskï¼ˆé•¿ä»»åŠ¡ï¼‰" class="headerlink" title="ä¸‰ã€Long Taskï¼ˆé•¿ä»»åŠ¡ï¼‰"></a>ä¸‰ã€Long Taskï¼ˆé•¿ä»»åŠ¡ï¼‰</h4><p>å¯¹äºã€Œé•¿ä»»åŠ¡ã€ï¼Œæˆ‘ä»¬é€šè¿‡å¦‚ä¸‹å›¾ç¤ºè¯´æ˜ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/tti/longtask.png" alt="é•¿ä»»åŠ¡"></p><div class="alert info"><p>å¯¹äºç”¨æˆ·è€Œè¨€ï¼Œä»»åŠ¡è€—æ—¶è¾ƒé•¿è¡¨ç°ä¸ºæ»åæˆ–å¡é¡¿ï¼Œè€Œè¿™ä¹Ÿæ˜¯ç›®å‰ç½‘é¡µä¸è‰¯ä½“éªŒçš„ä¸»è¦æ ¹æºã€‚</p></div><p>å¦‚ä½•æµ‹é‡ <code>Long Task</code>ï¼Ÿ<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Jartto's Demo</span></span><br><span class="line"><span class="keyword">const</span> observer = <span class="keyword">new</span> PerformanceObserver(<span class="function">(<span class="params">list</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> entry <span class="keyword">of</span> list.getEntries()) &#123;</span><br><span class="line">    <span class="comment">// TODO...</span></span><br><span class="line">    <span class="built_in">console</span>.log(entry);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">observer.observe(&#123;<span class="attr">entryTypes</span>: [<span class="string">'longtask'</span>]&#125;);</span><br></pre></td></tr></table></figure></p><p>æ§åˆ¶å°è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"self"</span>,</span><br><span class="line">  <span class="string">"entryType"</span>: <span class="string">"longtask"</span>,</span><br><span class="line">  <span class="string">"startTime"</span>: <span class="number">315009.59500001045</span>,</span><br><span class="line">  <span class="string">"duration"</span>: <span class="number">99.9899999878835</span>,</span><br><span class="line">  <span class="string">"attribution"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"name"</span>: <span class="string">"unknown"</span>,</span><br><span class="line">      <span class="string">"entryType"</span>: <span class="string">"taskattribution"</span>,</span><br><span class="line">      <span class="string">"startTime"</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="string">"duration"</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="string">"containerType"</span>: <span class="string">"window"</span>,</span><br><span class="line">      <span class="string">"containerSrc"</span>: <span class="string">""</span>,</span><br><span class="line">      <span class="string">"containerId"</span>: <span class="string">""</span>,</span><br><span class="line">      <span class="string">"containerName"</span>: <span class="string">""</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><code>Long Tasks API</code> å¯ä»¥å°†ä»»ä½•è€—æ—¶è¶…è¿‡ <code>50</code> æ¯«ç§’çš„ä»»åŠ¡æ ‡ç¤ºä¸ºå¯èƒ½å­˜åœ¨é—®é¢˜ï¼Œå¹¶å‘åº”ç”¨å¼€å‘è€…æ˜¾ç¤ºè¿™äº›ä»»åŠ¡ã€‚ é€‰æ‹© <code>50</code> æ¯«ç§’çš„æ—¶é—´æ˜¯ä¸ºäº†è®©åº”ç”¨æ»¡è¶³åœ¨ <code>100</code> æ¯«ç§’å†…å“åº”ç”¨æˆ·è¾“å…¥çš„ <code>RAIL</code> æŒ‡å¯¼åŸåˆ™ã€‚</p><p>å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ª <code>hack</code> æ¥æ£€æŸ¥é¡µé¢ä¸­ã€Œé•¿ä»»åŠ¡ã€çš„ä»£ç ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// detect long tasks hack</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">detectLongFrame</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> lastFrameTime = <span class="built_in">Date</span>.now();</span><br><span class="line">    requestAnimationFrame(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> currentFrameTime = <span class="built_in">Date</span>.now();</span><br><span class="line">        <span class="keyword">if</span> (currentFrameTime - lastFrameTime &gt; <span class="number">50</span>) &#123;</span><br><span class="line">        <span class="comment">// Report long frame here...</span></span><br><span class="line">        &#125;</span><br><span class="line">        detectLongFrame(currentFrameTime);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure></p><h4 id="å››ã€å¦‚ä½•è®¡ç®—-TTIï¼Ÿ"><a href="#å››ã€å¦‚ä½•è®¡ç®—-TTIï¼Ÿ" class="headerlink" title="å››ã€å¦‚ä½•è®¡ç®— TTIï¼Ÿ"></a>å››ã€å¦‚ä½•è®¡ç®— TTIï¼Ÿ</h4><p>åœ¨è®¡ç®—ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ <code>Timing API</code>ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/tti/timing.png" alt="Timing API"></p><p><code>Google</code> å®˜æ–¹æ–‡æ¡£ä¸­æœ‰ä¸€æ®µæè¿°ï¼š<br><code>Note: Lower Bounding FirstInteractive at DOMContentLoadedEndDOMContentLoadedEnd is the point where all the DOMContentLoaded listeners finish executing. It is very rare for critical event listeners of a webpage to be installed before this point. Some of the firstInteractive definitions we experimented with fired too early for a small number of sites, because the definitions only looked at long tasks and network activity (and not at, say, how many event listeners are installed), and sometimes when there are no long tasks in the first 5-10 seconds of loading we fire FirstInteractive at FMP, when the sites are often not ready yet to handle user inputs. We found that if we take max(DOMContentLoadedEnd, firstInteractive) as the final firstInteractive value, the values returned to reasonable region. Waiting for DOMContentLoadedEnd to declare FirstInteractive is sensible, so all the definitions introduced below lower bound firstInteractive at DOMContentLoadedEnd.</code></p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>domContentLoadedEventEnd</code> æ¥ç²—ç•¥çš„è¿›è¡Œä¼°ç®—ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é¡µé¢å¯äº¤äº’æ—¶é—´ </span></span><br><span class="line">TTI: domContentLoadedEventEnd - navigationStart,</span><br></pre></td></tr></table></figure></p><div class="alert info"><p><a href="https://w3c.github.io/navigation-timing/#dom-performancenavigationtiming-domcontentloadedeventend" target="_blank" rel="noopener">domContentLoadedEventEnd</a>ï¼šæ–‡æ¡£çš„ DOMContentLoaded äº‹ä»¶çš„ç»“æŸæ—¶é—´ã€‚</p></div><p><code>The domContentLoadedEventEnd attribute MUST return a DOMHighResTimeStamp with a time value equal to the time immediately after the current document&#39;s DOMContentLoaded event completes.</code></p><p>å¦‚æœä½ è§‰å¾—ä¸Šè¿°è®¡ç®—è¿‡äºå¤æ‚ï¼Œå¯ä»¥é€šè¿‡ <code>Google</code> å®éªŒå®¤æä¾›çš„ <code>Polyfill</code> æ¥è·å–ã€‚</p><h4 id="äº”ã€TTI-æŒ‡æ ‡ç›‘æ§"><a href="#äº”ã€TTI-æŒ‡æ ‡ç›‘æ§" class="headerlink" title="äº”ã€TTI æŒ‡æ ‡ç›‘æ§"></a>äº”ã€TTI æŒ‡æ ‡ç›‘æ§</h4><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ <a href="https://github.com/GoogleChromeLabs/tti-polyfill" target="_blank" rel="noopener"><code>Google TTI Polyfill</code></a>æ¥å¯¹ <code>TTI</code> è¿›è¡Œç›‘æµ‹ã€‚<br>1.å®‰è£…<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install tti-polyfill</span><br></pre></td></tr></table></figure></p><p>2.ä½¿ç”¨<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ttiPolyfill <span class="keyword">from</span> <span class="string">'./path/to/tti-polyfill.js'</span>;</span><br><span class="line">ttiPolyfill.getFirstConsistentlyInteractive(opts).then(<span class="function">(<span class="params">tti</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// Use `tti` value in some way.</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>å¾ˆç®€å•ï¼Œå°±ä¸ç»†è¯´äº†ã€‚æ¨èå‡ ç¯‡ <code>TTI</code> ç›¸å…³æ–‡ç« ï¼š<br><a href="https://docs.google.com/document/d/1GGiI9-7KeY3TPqS3YT271upUVimo-XiL5mwWorDUD4c/preview#" target="_blank" rel="noopener">First Interactive and Consistently Interactive</a><br><a href="https://web.dev/user-centric-performance-metrics/#tracking_tti" target="_blank" rel="noopener">User-centric performance metrics</a><br><a href="https://calibreapp.com/blog/time-to-interactive" target="_blank" rel="noopener">Focusing on the Human-Centric Metrics</a></p><p>æ–‡ç« æœ€åï¼Œæ‰“ä¸ªå°å¹¿å‘Šå§ã€‚å¦‚æœä½ æƒ³æ­ä¸Šåœ¨çº¿æ•™è‚²çš„å¿«è½¦ï¼Œå¿«é€Ÿæˆé•¿ï¼Œä¸å¦¨åŠ å…¥æˆ‘ä»¬ã€‚ä¸€èµ·æˆé•¿ï¼Œä¸€èµ·å­¦ä¹ ï¼Œä¸€èµ·æŒ‘æˆ˜æ›´å¤šæœ‰è¶£çš„äº‹æƒ…ï¼Œã€Œè·Ÿè°å­¦-é«˜é€”è¯¾å ‚ã€æ¬¢è¿ä½ ï¼Œè¯·å°†ç®€å†ç§æˆ‘ï½</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¦‚æœä½ ç»å¸¸åšç½‘ç«™ä¼˜åŒ–ï¼Œå¯èƒ½ä¼šé™·å…¥ä¸€ä¸ªæ€§èƒ½æŒ‡æ ‡çš„æ³¥æ½­å³ã€Œé¢å‘æŒ‡æ ‡ä¼˜åŒ–ã€ã€‚çœŸæ­£çš„ç”¨æˆ·ä½“éªŒä»æ¥ä¸æ˜¯æŒ‡æ ‡å†³å®šï¼Œç›¸åå®ƒåº”è¯¥æœ€çœŸå®çš„åæ˜ ç”¨æˆ·è¡Œä¸ºã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="æŠ€æœ¯åšæ–‡" scheme="http://jartto.wang/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E6%96%87/"/>
    
    
      <category term="web" scheme="http://jartto.wang/tags/web/"/>
    
      <category term="optimization" scheme="http://jartto.wang/tags/optimization/"/>
    
      <category term="tti" scheme="http://jartto.wang/tags/tti/"/>
    
  </entry>
  
  <entry>
    <title>ç ´å±€ï¼šæŠ€æœ¯è§†é‡ä¸è§„åˆ’</title>
    <link href="http://jartto.wang/2020/03/08/breaking-the-game/"/>
    <id>http://jartto.wang/2020/03/08/breaking-the-game/</id>
    <published>2020-03-08T10:32:43.000Z</published>
    <updated>2020-03-09T15:22:29.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ‰å¹¸å‚åŠ äº† <code>51CTO</code> çš„æŠ€æœ¯å³°ä¼šï¼Œä¸€å¤©æ»¡æ»¡çš„å¹²è´§ï¼Œæ„Ÿè§‰æ”¶ç›Šé¢‡å¤šã€‚äºæ˜¯å°†é‡ç‚¹å†…å®¹æ•´ç†æ€»ç»“ï¼Œåˆ†äº«ç»™å¤§å®¶ã€‚<br><a id="more"></a><br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/break/title.png" alt="PPT"><br>åˆ†äº«æ ‡é¢˜ä¸º<strong>ã€Šç ´å±€ï¼šæŠ€æœ¯è§†é‡ä¸è§„åˆ’ã€‹</strong>ï¼Œä¸»è¦å›´ç»•å³°ä¼šå†…å®¹å±•å¼€ï¼Œä¸­é—´å¤¹æ‚ä¸€äº›ä¸ªäººè§è§£ä¸æ€è€ƒã€‚</p><div class="alert warning"><p>ä¸‹æ–‡å¤šå›¾é¢„è­¦ï¼Œå»ºè®®å°ä¼™ä¼´ä»¬ Wi-Fi é˜…è¯»ã€‚</p></div><h4 id="ä¸€ã€ç›®å½•"><a href="#ä¸€ã€ç›®å½•" class="headerlink" title="ä¸€ã€ç›®å½•"></a>ä¸€ã€ç›®å½•</h4><p><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/break/contents.png" alt="ç›®å½•"></p><p>æˆ‘ä»¬å°†ä»ä»¥ä¸‹å››æ–¹é¢æ¥å±•å¼€è¯´æ˜ï¼š<br>1.<code>2019 CTO</code> å‘å±•æŠ¥å‘Š<br>2.æŠ€æœ¯å›¢é˜Ÿæ¨¡å‹<br>3.æŠ€æœ¯è§†é‡<br>4.æŠ€èƒ½å‘å±•ä¸è§„åˆ’</p><h4 id="äºŒã€2019-CTO-å‘å±•æŠ¥å‘Š-2019-CTO-Development-Report"><a href="#äºŒã€2019-CTO-å‘å±•æŠ¥å‘Š-2019-CTO-Development-Report" class="headerlink" title="äºŒã€2019 CTO å‘å±•æŠ¥å‘Š - 2019 CTO Development Report"></a>äºŒã€2019 CTO å‘å±•æŠ¥å‘Š - 2019 CTO Development Report</h4><p>å³°ä¼šå¼€åœºå°±æ‹¿å‡ºäº†ä¸€ä»½è°ƒæŸ¥æŠ¥å‘Šï¼Œä¸»è¦å›´ç»•å››æ–¹é¢ï¼š<br>1.<strong>å®è§‚ç¯å¢ƒ</strong><br>2017-2019 å¹´ï¼Œä¸‹è¡Œç»æµç¯å¢ƒå¸‚åœºç¼ºå£åœ¨æ”¶ç¼©ã€‚å‘ã€Œå…¬å¸ç®¡ç†é©±åŠ¨ã€å’Œã€Œç§‘æŠ€åˆ›æ–°é©±åŠ¨ã€è½¬å˜ã€‚<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/break/macro.png" alt="å®è§‚ç»æµ"></p><p>ä»å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥ï¼Œä¸‹è¡Œç»æµç¯å¢ƒä¸‹å¸‚åœºç¼ºå£æ­£åœ¨æ”¶ç¼©ã€‚éš¾é“ <code>CTO</code> è¦é¢ä¸´å¤±ä¸šå—ï¼Ÿä¸ç€æ€¥ï¼Œæˆ‘ä»¬æ¥ç€å¾€ä¸‹çœ‹ã€‚</p><p>2.<strong>æœºé‡ä¸æŒ‘æˆ˜</strong><br>ä»¥ã€Œä¸šåŠ¡ä¸ºä¸­å¿ƒã€çš„å»¶ä¼¸ï¼Œå‘ä¸Šæ˜¯å¯¹å•†ä¸šæˆ˜ç•¥çš„æ€è€ƒï¼Œå‘ä¸‹æ˜¯å¯¹æŠ€æœ¯ç®¡ç†ã€æŠ€æœ¯äº¤ä»˜çš„è½å®ã€‚<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/break/opportunities.png" alt="æœºé‡ä¸æŒ‘æˆ˜"></p><p>3.<strong>èƒœä»»åŠ›</strong><br>æ—¢æ‡‚å¾—æˆ˜ç•¥ã€åˆæ‡‚å¾—ç»„ç»‡ç®¡ç†ã€åˆæ‡‚å¾—ä¼ä¸šå†…éƒ¨è¿è¥æœºåˆ¶çš„æŠ€æœ¯è´Ÿè´£äººã€‚<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/break/capability.png" alt="èƒœä»»åŠ›"></p><p>æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼šå¯¹ <code>CTO</code> çš„èƒœä»»åŠ›è¦æ±‚ï¼Œè¶Šæ¥è¶Šè¶‹å‘äºä¸€ä¸ªæ—¢æ‡‚å¾—æˆ˜ç•¥ã€åˆæ‡‚å¾—ç»„ç»‡ç®¡ç†ã€åˆæ‡‚å¾—ä¼ä¸šå†…éƒ¨è¿è¥æœºåˆ¶çš„æŠ€æœ¯è´Ÿè´£äººã€‚</p><div class="alert info"><p>æ‰€ä»¥ï¼Œå¹¶ä¸æ˜¯éœ€æ±‚å˜å°‘ï¼Œè€Œæ˜¯å¯¹é«˜ç²¾å°–äººæ‰çš„è¦æ±‚è¶Šæ¥è¶Šé«˜ã€‚</p></div><p>4.<strong>æŠ•èµ„äººè§†è§’</strong><br>äº§ä¸šé©å‘½é€ å°±äº†å¸å›½çš„å´›èµ·ï¼Œå‰ä¸‰æ¬¡å·¥ä¸šé©å‘½å¤§å®¶è€³ç†Ÿèƒ½è¯¦ï¼Œé‚£ä¹ˆç¬¬å››æ¬¡å·¥ä¸šé©å‘½åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿå¸Œæœ›æˆ‘ä»¬ä¸­æœ‰äººå¯ä»¥æ¥å®šä¹‰ç¬¬å››æ¬¡å·¥ä¸šé©å‘½ï½<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/break/investor.png" alt="æŠ•èµ„äººè§†è§’"></p><p>ä¸‹å›¾åˆ—ä¸¾äº†ä¸€äº›æœªæ¥ 10 å¹´æŠ•èµ„çš„ä¸€äº›æ–¹å‘ï¼ŒæŠ“ä½æœºä¼šï¼Œç†è´¢ä»ç°åœ¨å¼€å§‹ã€‚<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/break/investor2.png" alt="æŠ•èµ„é¢†åŸŸ"></p><h4 id="ä¸‰ã€æŠ€æœ¯å›¢é˜Ÿæ¨¡å‹-Technical-team-model"><a href="#ä¸‰ã€æŠ€æœ¯å›¢é˜Ÿæ¨¡å‹-Technical-team-model" class="headerlink" title="ä¸‰ã€æŠ€æœ¯å›¢é˜Ÿæ¨¡å‹ - Technical team model"></a>ä¸‰ã€æŠ€æœ¯å›¢é˜Ÿæ¨¡å‹ - Technical team model</h4><p>æœ¬èŠ‚ï¼Œæˆ‘ä»¬å°†ä»æŠ€æœ¯å›¢é˜Ÿæ¨¡å‹æ¥è¯´ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/break/team.png" alt="æŠ€æœ¯å›¢é˜Ÿ"></p><div class="alert info"><p>å†…å®¹æ¥è‡ª 4 ä½ CTO çš„æ€»ç»“ï¼Œæˆ‘ä»¬é›†ç™¾å®¶ä¹‹é•¿ã€‚</p></div><p>1.<strong>æŠ€æœ¯å›¢é˜Ÿ <code>ROI</code>ï¼šé¢†å¯¼çš„è§’åº¦</strong><br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/break/team-roi.png" alt="é¢†å¯¼çš„è§’åº¦"></p><p>ä¸ç®¡é—®é¢˜å¦‚ä½•å›ç­”ï¼Œæˆ‘ä»¬åªæœ‰ä¸€ä¸ªæ ¸å¿ƒè§‚ç‚¹ï¼š<strong>å¯¹äºå…¬å¸æ¥è¯´ï¼Œæ‰€æœ‰çš„äº‹æƒ…éƒ½æ˜¯èµšé’±ç›¸å…³çš„</strong>ã€‚</p><p>2.<strong>æŠ€æœ¯å›¢é˜Ÿ <code>ROI</code>ï¼šä¸‹å±çš„è§’åº¦</strong><br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/break/team2.png" alt="ä¸‹å±çš„è§’åº¦"></p><p>ä¸‹å±æƒ³æ³•å¾ˆæ·³æœ´ï¼Œç”šè‡³å¾ˆæ— è¾œã€‚</p><p>3.<strong>æŠ€æœ¯å›¢é˜Ÿ <code>ROI</code></strong><br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/break/team3.png" alt="æŠ€æœ¯å›¢é˜Ÿ ROI"></p><p>4.<strong>BSC æ¨¡å‹</strong><br>æ€»ç»“æ¥è¯´å°±æ˜¯ï¼šä»¥å‰ç»æ€§å’Œæˆ˜ç•¥æ€§ä¸ºåŸºç¡€çš„å¹³è¡¡è®¡åˆ†å¡ã€‚<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/break/team4.png" alt="BSC æ¨¡å‹"></p><p>æˆ‘ä»¬ç®€å•è¡¥å……ä¸€ä¸‹ï¼š<br>å¹³è¡¡è®¡åˆ†å¡(<code>The Balanced ScoreCard</code>ï¼Œç®€ç§° <code>BSC</code>ï¼‰ï¼Œå°±æ˜¯æ ¹æ®ä¼ä¸šç»„ç»‡çš„æˆ˜ç•¥è¦æ±‚è€Œç²¾å¿ƒè®¾è®¡çš„æŒ‡æ ‡ä½“ç³»ã€‚å¹³è¡¡è®¡åˆ†å¡æ˜¯ä¸€ç§ç»©æ•ˆç®¡ç†çš„å·¥å…·ã€‚</p><p>å®ƒå°†ä¼ä¸šæˆ˜ç•¥ç›®æ ‡é€å±‚åˆ†è§£è½¬åŒ–ä¸ºå„ç§å…·ä½“çš„ç›¸äº’å¹³è¡¡çš„ç»©æ•ˆè€ƒæ ¸æŒ‡æ ‡ä½“ç³»ï¼Œå¹¶å¯¹è¿™äº›æŒ‡æ ‡çš„å®ç°çŠ¶å†µè¿›è¡Œä¸åŒæ—¶æ®µçš„è€ƒæ ¸ï¼Œä»è€Œä¸ºä¼ä¸šæˆ˜ç•¥ç›®æ ‡çš„å®Œæˆå»ºç«‹èµ·å¯é çš„æ‰§è¡ŒåŸºç¡€ã€‚</p><p><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/break/team5.png" alt="BSC æ¨¡å‹"></p><p>å¹³è¡¡è®¡åˆ†å¡ä¸­æœ‰ä¸€äº›æ¡ç›®æ˜¯å¾ˆéš¾è§£é‡Šæ¸…æ¥šæˆ–è€…æ˜¯è¡¡é‡å‡ºæ¥çš„ã€‚è´¢åŠ¡æŒ‡æ ‡å½“ç„¶ä¸æ˜¯é—®é¢˜ï¼Œè€Œéè´¢åŠ¡æŒ‡æ ‡å¾€å¾€å¾ˆéš¾å»å»ºç«‹èµ·æ¥ã€‚ç¡®å®šç»©æ•ˆçš„è¡¡é‡æŒ‡æ ‡å¾€å¾€æ¯”æƒ³è±¡çš„æ›´éš¾ã€‚</p><p>æˆ‘ä»¬æ¥æ¦‚æ‹¬ä¸€ä¸‹é‡ç‚¹ï¼š</p><ul><li>å…¨å±€æˆ˜ç•¥æ€ç»´(åƒ CEO ä¸€æ ·æ€è€ƒ)</li><li>æŒç»­æå‡æŠ€æœ¯é©±åŠ¨ä¸šåŠ¡åˆ›æ–°ä¸å¢é•¿ï¼Œèµ‹èƒ½ä¼ä¸šå¯æŒç»­å‘å±•</li><li>å–„ç”¨ç®¡ç†ã€æ•ˆèƒ½ä¸æŠ€æœ¯å·¥å…·</li></ul><p>5.<strong>å¤§å‹ç§‘æŠ€å›¢é˜Ÿçš„ç®¡ç†</strong><br><div class="alert success"><p>å¤§å‹ç§‘æŠ€å›¢é˜Ÿä¸­æœ€é‡è¦çš„äº”éƒ¨åˆ†ï¼šä½¿å‘½å’Œå®šä½ï¼Œç»©æ•ˆç®¡ç†ï¼Œå›¢é˜Ÿæ–‡åŒ–ï¼ŒæŠ€æœ¯å†³ç­–ï¼Œæ‰§è¡ŒåŠ›ã€‚</p></div></p><p>è¿™é‡Œæ”¶é›†äº†å¤§å‹ç§‘æŠ€å…¬å¸çš„ç»„ç»‡æ¶æ„ï¼Œå¾ˆæœ‰æ„æ€ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/break/management.png" alt="å¤§å‹ç§‘æŠ€å›¢é˜Ÿçš„ç®¡ç†"></p><p>å¤§æ¦‚è§£é‡Šä¸€ä¸‹ï¼š</p><ul><li>äºšé©¬é€Šç­‰çº§æ£®ä¸¥ä¸”æœ‰åºï¼›</li><li>è°·æ­Œç»“æ„æ¸…æ™°ï¼Œäº§å“å’Œéƒ¨é—¨ä¹‹é—´å´ç›¸äº’äº¤é”™ä¸”æ··ä¹±ï¼›</li><li><code>Facebook</code> æ¶æ„åˆ†æ•£ï¼Œå°±åƒä¸€å¼ æ•£å¼€çš„ç½‘ç»œï¼›</li><li>å¾®è½¯å†…éƒ¨å„è‡ªå å±±ä¸ºç‹ï¼Œå†›é˜€ä½œé£æ·±å…¥éª¨é«“ï¼›</li><li>è‹¹æœä¸€ä¸ªäººè¯´äº†ç®—ï¼Œè€Œé‚£ä¸ªäººè·¯äººçš†çŸ¥ï¼›</li><li>åºå¤§çš„ç”²éª¨æ–‡ï¼Œè‡ƒè‚¿çš„æ³•åŠ¡éƒ¨æ˜¾ç„¶è¦æ¯”å·¥ç¨‹éƒ¨é—¨æ›´åŠ é‡è¦ï¼›</li></ul><p>è¿™é‡Œæ¨èä¸€æœ¬ä¹¦ï¼Œã€Šä¿¡ä»»äº”å±‚æ³¢æµªã€‹ï¼šè‡ªæˆ‘ä¿¡ä»»ï¼Œå…³ç³»ä¿¡ä»»ï¼Œç»„ç»‡ä¿¡ä»»ï¼Œå¸‚åœºä¿¡ä»»ï¼Œç¤¾ä¼šä¿¡ä»»ã€‚</p><p>6.<strong><code>ToB</code> å½¢æ€ä¸‹çš„æŠ€æœ¯æŒ‘æˆ˜</strong><br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/break/2b.png" alt="ToB"></p><p>åŒæ´»æ¶æ„ä½“ç³»ï¼š<br>ä¸¤ä¸ªæ•°æ®ä¸­å¿ƒæ˜¯å¯¹ç­‰çš„ã€ä¸åˆ†ä¸»ä»ã€å¹¶å¯åŒæ—¶éƒ¨ç½²ä¸šåŠ¡ï¼Œå¯æå¤§çš„æé«˜èµ„æºçš„åˆ©ç”¨ç‡å’Œç³»ç»Ÿçš„å·¥ä½œæ•ˆç‡ã€æ€§èƒ½ï¼ŒåŒæ´»æ˜¯è§‰å¾—å¤‡ç”¨æ•°æ®ä¸­å¿ƒåªåšå¤‡ä»½å¤ªæµªè´¹äº†ï¼Œæ‰€ä»¥è®©ä¸»å¤‡ä¸¤ä¸ªæ•°æ®ä¸­å¿ƒéƒ½åŒæ—¶æ‰¿æ‹…ç”¨æˆ·çš„ä¸šåŠ¡ï¼Œæ­¤æ—¶ï¼Œä¸»å¤‡ä¸¤ä¸ªæ•°æ®ä¸­å¿ƒäº’ä¸ºå¤‡ä»½ï¼Œå¹¶ä¸”è¿›è¡Œå®æ—¶å¤‡ä»½ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œä¸»æ•°æ®ä¸­å¿ƒçš„è´Ÿè½½å¯èƒ½ä¼šå¤šä¸€äº›ï¼Œæ¯”å¦‚åˆ†æ‹… 60~70% çš„ä¸šåŠ¡ï¼Œå¤‡æ•°æ®ä¸­å¿ƒåªåˆ†æ‹… 40%~30% çš„ä¸šåŠ¡ã€‚</p><h4 id="å››ã€æŠ€æœ¯è§†é‡-Technical-perspective"><a href="#å››ã€æŠ€æœ¯è§†é‡-Technical-perspective" class="headerlink" title="å››ã€æŠ€æœ¯è§†é‡ - Technical perspective"></a>å››ã€æŠ€æœ¯è§†é‡ - Technical perspective</h4><p>å…³äºæŠ€æœ¯è§†é‡ï¼Œå³°ä¼šä¸Šæåˆ°äº†å‡ ä¸ªæ¦‚å¿µï¼Œä¸‹é¢æˆ‘ä»¬æ¥é€ä¸€è§£é‡Šã€‚<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/break/perspective.png" alt="æŠ€æœ¯è§†é‡"></p><p>1.<strong><code>5G</code> æ—¶ä»£</strong><br><code>5G</code> æ—¶ä»£ï¼Œæ ¸å¿ƒç½‘é‡‡ç”¨å¾®æœåŠ¡æ¶æ„ï¼Œä¹Ÿæ˜¯å’Œå®¹å™¨å®Œç¾æ­é…â€”â€”å•ä½“å¼æ¶æ„ <code>Monolithic</code> å˜æˆå¾®æœåŠ¡æ¶æ„<code>Microservices</code>ï¼Œç›¸å½“äºä¸€ä¸ªå…¨èƒ½å‹å˜æˆNä¸ªä¸“èƒ½å‹ã€‚</p><div class="alert success"><p>æ¯ä¸ªä¸“èƒ½å‹ï¼Œåˆ†é…ç»™ä¸€ä¸ªéš”ç¦»çš„å®¹å™¨ï¼Œèµ‹äºˆäº†æœ€å¤§ç¨‹åº¦çš„çµæ´»ã€‚</p></div><p><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/break/5g.png" alt="5G"></p><p><code>5G</code> çš„ç‰¹ç‚¹æ¦‚æ‹¬æ¥è¯´ï¼šé«˜æ•°æ®é€Ÿç‡ã€å‡å°‘å»¶è¿Ÿã€èŠ‚çœèƒ½æºã€é™ä½æˆæœ¬ã€æé«˜ç³»ç»Ÿå®¹é‡å’Œå¤§è§„æ¨¡è®¾å¤‡è¿æ¥ã€‚</p><p>2.<strong>å·¥ç¨‹æ•ˆèƒ½</strong><br>å¾ˆå¤šå¤§å‚éƒ½ä¸“é—¨è®¾ç«‹äº†è¿™ä¸ªéƒ¨é—¨ï¼Œä¸»è¦èŒè´£åŒ…æ‹¬ï¼šéœ€æ±‚æ²»ç†ã€è´¨é‡åˆ†æï¼Œé‡åŒ–ç®¡ç†ï¼Œä»£ç æ„å»ºã€ä»£ç æœç´¢ï¼Œå¼€å‘æµ‹è¯•ã€è‡ªåŠ¨åŒ–ã€å‘å¸ƒã€èˆ†æƒ…ç›‘æ§ç­‰ã€‚</p><p><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/break/effective.png" alt="å·¥ç¨‹æ•ˆèƒ½"></p><p>3.<strong>çº¢è“å†›å¯¹æŠ—</strong><br>ç±»ä¼¼äºå†›äº‹é¢†åŸŸçš„çº¢è“å†›å¯¹æŠ—ï¼Œç½‘ç»œå®‰å…¨ä¸­ï¼Œçº¢è“å†›å¯¹æŠ—åˆ™æ˜¯ä¸€æ–¹æ‰®æ¼”é»‘å®¢ã€Œè“å†›ã€ï¼Œä¸€æ–¹æ‰®æ¼”é˜²å¾¡è€…ã€Œçº¢å†›ã€ã€‚çº¢è“å†›å¯¹æŠ—çš„ç›®çš„å°±æ˜¯ç”¨æ¥è¯„ä¼°ä¼ä¸šå®‰å…¨æ€§ï¼Œæœ‰åŠ©äºæ‰¾å‡ºä¼ä¸šå®‰å…¨ä¸­æœ€è„†å¼±çš„ç¯èŠ‚ï¼Œæå‡ä¼ä¸šå®‰å…¨èƒ½åŠ›çš„å»ºè®¾ã€‚<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/break/confrontation.png" alt="çº¢è“å†›å¯¹æŠ—"></p><p>4.<strong>æ•°å­—åŒ–è½¬å‹</strong><br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/break/digital.png" alt="æ•°å­—åŒ–è½¬å‹"></p><p>è¿™é‡Œä¸å¾—ä¸è¯´è¯´ä»€ä¹ˆæ˜¯ã€Œæ•°å­—é¢†å¯¼åŠ›ã€ï¼Œåœ¨æˆ‘ä»¬æ­£åœ¨ç»å†çš„è¿™åœºæ•°å­—é©å‘½ä¸­ï¼Œé€æ˜åŒ–ã€ç½‘ç»œåŒ–ã€å…¬å¼€åŒ–å’Œåˆ†äº«æˆä¸ºé¢†å¯¼åŠ›æ–‡åŒ–çš„æ ¸å¿ƒã€‚</p><p>æ•°å­—ç»æµæ—¶ä»£ï¼Œæ•°å­—åŒ–é¢†å¯¼åŠ›æ˜¯ä¼ä¸šæˆ˜ç•¥åœ°ä½¿ç”¨æ•°å­—èµ„äº§è¾¾æˆå•†ä¸šç›®çš„çš„èƒ½åŠ›ã€‚å¯¹ä¼ä¸šè€Œè¨€ï¼Œæ¸…æ™°çš„æ•°å­—åŒ–æˆ˜ç•¥å’Œå¼ºæœ‰åŠ›çš„æ•°å­—åŒ–é¢†å¯¼è€…å°†å¯¹è¯¥ç›®æ ‡çš„å®ç°èµ·åˆ°å…³é”®ä½œç”¨ã€‚</p><h4 id="äº”ã€æŠ€èƒ½å‘å±•ä¸è§„åˆ’-Skill-development-and-planning"><a href="#äº”ã€æŠ€èƒ½å‘å±•ä¸è§„åˆ’-Skill-development-and-planning" class="headerlink" title="äº”ã€æŠ€èƒ½å‘å±•ä¸è§„åˆ’ - Skill development and planning"></a>äº”ã€æŠ€èƒ½å‘å±•ä¸è§„åˆ’ - Skill development and planning</h4><p>1.<strong>è¿›åŒ–è·¯å¾„</strong><br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/break/plan.png" alt="è¿›åŒ–è·¯å¾„"></p><p>2.<strong>å…·å¤‡èƒ½åŠ›</strong><br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/break/ability.png" alt="æ•°å­—åŒ–è½¬å‹"></p><p>3.<strong>æå‡é€”å¾„</strong><br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/break/ascent.png" alt="æ•°å­—åŒ–è½¬å‹"></p><h4 id="å…­ã€æ€»ç»“"><a href="#å…­ã€æ€»ç»“" class="headerlink" title="å…­ã€æ€»ç»“"></a>å…­ã€æ€»ç»“</h4><p>å¥½äº†ï¼Œä»¥ä¸Šå°±æ˜¯æˆ‘åˆ†äº«çš„ä¸»è¦å†…å®¹ï¼Œæ„Ÿå…´è¶£çš„ç«¥é‹æ¬¢è¿æ·±å…¥äº¤æµã€‚å¦‚æœä½ éœ€è¦ <code>PPT</code> ï¼Œå¯ä»¥å»è¿™é‡Œ<a href="https://pan.baidu.com/s/1nNha7JtZCOo1GfxuOx_aeg" target="_blank" rel="noopener">ä¸‹è½½</a>ï¼ˆæå–ç : <code>i6ud</code>ï¼‰ã€‚</p><p>æ–‡ç« æœ€åï¼Œæ‰“ä¸ªå°å¹¿å‘Šå§ã€‚å¦‚æœä½ æƒ³æ­ä¸Šåœ¨çº¿æ•™è‚²çš„å¿«è½¦ï¼Œå¿«é€Ÿæˆé•¿ï¼Œä¸å¦¨åŠ å…¥æˆ‘ä»¬ã€‚ä¸€èµ·æˆé•¿ï¼Œä¸€èµ·å­¦ä¹ ï¼Œä¸€èµ·æŒ‘æˆ˜æ›´å¤šæœ‰è¶£çš„äº‹æƒ…ï¼Œã€Œè·Ÿè°å­¦-é«˜é€”è¯¾å ‚ã€æ¬¢è¿ä½ ï¼Œè¯·å°†ç®€å†ç§æˆ‘ï½</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ‰å¹¸å‚åŠ äº† &lt;code&gt;51CTO&lt;/code&gt; çš„æŠ€æœ¯å³°ä¼šï¼Œä¸€å¤©æ»¡æ»¡çš„å¹²è´§ï¼Œæ„Ÿè§‰æ”¶ç›Šé¢‡å¤šã€‚äºæ˜¯å°†é‡ç‚¹å†…å®¹æ•´ç†æ€»ç»“ï¼Œåˆ†äº«ç»™å¤§å®¶ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="æŠ€æœ¯åšæ–‡" scheme="http://jartto.wang/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E6%96%87/"/>
    
    
      <category term="æŠ€æœ¯è§†é‡" scheme="http://jartto.wang/tags/%E6%8A%80%E6%9C%AF%E8%A7%86%E9%87%8E/"/>
    
      <category term="è§„åˆ’" scheme="http://jartto.wang/tags/%E8%A7%84%E5%88%92/"/>
    
  </entry>
  
  <entry>
    <title>æç®€å¼¹å¹•æ–¹æ¡ˆ</title>
    <link href="http://jartto.wang/2020/02/16/web-barrager/"/>
    <id>http://jartto.wang/2020/02/16/web-barrager/</id>
    <published>2020-02-16T15:58:47.000Z</published>
    <updated>2020-02-22T14:05:12.000Z</updated>
    
    <content type="html"><![CDATA[<p>é‡å¤§çš„æ´»åŠ¨ç°åœºä¸€èˆ¬ç¦»ä¸å¼€ <code>PPT</code> æ¼”ç¤ºï¼Œå¯æ˜¯å¦‚ä½•æœ‰æ•ˆå’Œç°åœºäº’åŠ¨å‘¢ï¼Ÿè¿™æ—¶å€™å¼¹å¹•å¿…ä¸å¯å°‘ï¼Œé™æ€çš„ <code>PPT</code> å°±ç•¥æ˜¾ä¹åŠ›ã€‚æœ‰æ²¡æœ‰ä¸€ç§å¥½çš„æ–¹æ¡ˆå¯ä»¥äºŒè€…å…¼å¾—å‘¢ï¼Ÿ<br><a id="more"></a><br><div class="alert info"><p>å¦‚ä½•æ‰èƒ½ä½¿ <code>PPT</code> å…·æœ‰äº¤äº’æ€§ï¼Œè¿™æ˜¯ä¸€ä¸ªå€¼å¾—æ€è€ƒçš„é—®é¢˜ï¼</p></div></p><p>å¯èƒ½å¾ˆå¤šç«¥é‹æƒ³åˆ°äº†ï¼Œå¦‚æœä½¿ç”¨ã€Œç½‘é¡µ <code>PPT</code>ã€ ï¼Œå²‚ä¸æ˜¯å®Œç¾è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚æœ¬èŠ‚æˆ‘ä»¬å°±æ¥æä¾›ä¸€ç§æ€è·¯ï¼Œç”¨ã€Œ<code>PPT</code> + å‘å°„å™¨ + <code>Socket</code>ã€ å®ç°ã€Œæç®€å¼¹å¹•æ–¹æ¡ˆã€ã€‚</p><p><strong>å…³äºã€Œç½‘é¡µ <code>PPT</code>ã€ï¼Œå¯ä»¥æŸ¥çœ‹æˆ‘ä¹‹å‰çš„æ–‡ç« ã€Œ<a href="http://jartto.wang/2019/04/15/amusing-ppt/">é…·ç‚«çš„ <code>HTML5</code> ç½‘é¡µ <code>PPT</code></a>ã€ä¸€æ¢ç©¶ç«Ÿã€‚</strong></p><h4 id="ä¸€ã€æ•ˆæœæ¼”ç¤º"><a href="#ä¸€ã€æ•ˆæœæ¼”ç¤º" class="headerlink" title="ä¸€ã€æ•ˆæœæ¼”ç¤º"></a>ä¸€ã€æ•ˆæœæ¼”ç¤º</h4><p>æˆ‘ä»¬å…ˆé€šè¿‡ä¸€ä¸ªç®€å•çš„è§†å±æ¼”ç¤ºä¸€ä¸‹æ•ˆæœï¼š</p><video src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/barrager/demo.mp4" controls="controls" width="100%" height>æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒæ’­æ”¾è¯¥è§†é¢‘ï¼</video><p>ç›¸å…³ä»£ç ï¼š<a href="#">Demo åœ°å€</a></p><h4 id="äºŒã€æ–¹æ¡ˆæ¦‚æ‹¬"><a href="#äºŒã€æ–¹æ¡ˆæ¦‚æ‹¬" class="headerlink" title="äºŒã€æ–¹æ¡ˆæ¦‚æ‹¬"></a>äºŒã€æ–¹æ¡ˆæ¦‚æ‹¬</h4><div class="alert info"><p>çœ‹å®Œä¸Šé¢çš„æ¼”ç¤ºï¼Œæ˜¯ä¸æ˜¯è¿«ä¸åŠå¾…æƒ³çŸ¥é“ç­”æ¡ˆï¼Œä¸‹é¢æˆ‘ä»¬æ¥é€æ­¥æ‹†åˆ†ã€‚</p></div><p>å…ˆæ¥çœ‹çœ‹ä»£ç ç»“æ„<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ mobile</span><br><span class="line">â”‚   â”œâ”€â”€ README.md</span><br><span class="line">â”‚   â”œâ”€â”€ node_modules</span><br><span class="line">â”‚   â”œâ”€â”€ package.json</span><br><span class="line">â”‚   â”œâ”€â”€ public</span><br><span class="line">â”‚   â”œâ”€â”€ src</span><br><span class="line">â”‚   â””â”€â”€ yarn.lock</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ ppt</span><br><span class="line">â”‚   â”œâ”€â”€ css</span><br><span class="line">â”‚   â”œâ”€â”€ extras</span><br><span class="line">â”‚   â”œâ”€â”€ images</span><br><span class="line">â”‚   â”œâ”€â”€ index.html</span><br><span class="line">â”‚   â”œâ”€â”€ js</span><br><span class="line">â”‚   â””â”€â”€ temp</span><br><span class="line">â”œâ”€â”€ server</span><br><span class="line">â”‚   â”œâ”€â”€ app.js</span><br><span class="line">â”‚   â”œâ”€â”€ data</span><br><span class="line">â”‚   â”œâ”€â”€ node_modules</span><br><span class="line">â”‚   â”œâ”€â”€ package-lock.json</span><br><span class="line">â”‚   â””â”€â”€ package.json</span><br><span class="line">â””â”€â”€ yarn.lock</span><br></pre></td></tr></table></figure></p><div class="alert success"><p>æˆ‘ä»¬ä¸»è¦å…³æ³¨ä»¥ä¸‹ä¸‰ä¸ªç›®å½•ï¼š</p></div><p>1.<code>ppt</code><br>ä½¿ç”¨ <code>impressjs</code> æ„å»ºçš„é¡¹ç›®ï¼Œ<code>PPT</code> æ¼”è®²ã€Œä¸»å±ã€ï¼Œä¸»è¦æ¼”ç¤ºå†…å®¹åŒºåŸŸï¼ŒåŒæ—¶æ¥æ”¶ã€ŒæœåŠ¡ç«¯ã€æ¨é€å¼¹å¹•ä¿¡æ¯ã€‚</p><p>2.<code>mobile</code><br>ç§»åŠ¨ç«¯ï¼Œä¸‹æ–‡ç§°ä½œã€Œå‘å°„å™¨ã€ï¼Œä¸»è¦ç”¨ä½œç°åœºç”¨æˆ·äº’åŠ¨å‘ä¸»å±å‘é€å¼¹å¹•æ¶ˆæ¯ã€‚é€šè¿‡ <code>Create React App</code> ç”Ÿæˆï¼ŒæŠ€æœ¯æ ˆæ˜¯ï¼š<code>React + Antd</code>ã€‚</p><p>3.<code>server</code><br>æœåŠ¡ç«¯ï¼Œä¸»è¦æ¥å—ç”¨æˆ·å¼¹å¹•ï¼ŒåŒæ—¶å¹¿æŠ¥åˆ°ä¸»å±ï¼Œä½¿ç”¨ <code>Socket</code> å®ç°ã€‚</p><div class="alert success"><p>å¯åŠ¨æ–¹å¼ï¼š</p></div><p>1.è¿›å…¥ server ç›®å½•ï¼Œå¯åŠ¨æœåŠ¡ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node app.js</span><br></pre></td></tr></table></figure></p><p>æ­¤æ—¶ä¼šå¯åŠ¨ä¸€ä¸ªæœ¬æœº IP åœ°å€çš„æœåŠ¡ã€‚</p><p>2.è¿›å…¥ ppt ç›®å½•ï¼Œä½¿ç”¨ http-server å¯åŠ¨ç«™ç‚¹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http-server</span><br></pre></td></tr></table></figure></p><p>æ³¨æ„ï¼šæ¥å£åœ°å€éœ€è¦æ›¿æ¢æˆæœ¬æœº IP åœ°å€ã€‚</p><p>3.è¿›å…¥ mobile ç›®å½•ï¼Œå¯åŠ¨å‘å°„å™¨ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn start</span><br></pre></td></tr></table></figure></p><p>æ³¨æ„ï¼šè¯·æ±‚æ¥å£éœ€è¦ä½¿ç”¨æœ¬æœº IP åœ°å€ã€‚</p><p><a href="https://github.com/chenfengyanyu/barrager-ppt-demo" target="_blank" rel="noopener">Demo</a> æ¯”è¾ƒç®€å•ï¼Œä¸»è¦å±•ç¤ºä¸»æµç¨‹ï¼Œå¦‚æœç»†èŠ‚è¿‡ç¨‹æœ‰é—®é¢˜ï¼Œæ¬¢è¿ä¸€èµ·æ¢è®¨ã€‚</p><h4 id="ä¸‰ã€ä¸»å±ç»†èŠ‚ï¼ˆæ ¸å¿ƒä»£ç ï¼‰"><a href="#ä¸‰ã€ä¸»å±ç»†èŠ‚ï¼ˆæ ¸å¿ƒä»£ç ï¼‰" class="headerlink" title="ä¸‰ã€ä¸»å±ç»†èŠ‚ï¼ˆæ ¸å¿ƒä»£ç ï¼‰"></a>ä¸‰ã€ä¸»å±ç»†èŠ‚ï¼ˆæ ¸å¿ƒä»£ç ï¼‰</h4><p>ä¸»å±æ˜¯ä¸»è¦æ¼”ç¤ºç‰ˆé¢ï¼Œæˆ‘ä»¬éœ€è¦åƒä¸‹é¢è¿™æ ·ä½œå‡º <code>PPT</code>ï¼Œè¿™é‡Œæˆ‘ä»¬åšäº†ä¸‰ä¸ªé¡µé¢ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"impress"</span> <span class="attr">class</span>=<span class="string">"jartto"</span> <span class="attr">data-transition-duration</span>=<span class="string">"1000"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"cover"</span> <span class="attr">class</span>=<span class="string">"step slide title"</span> <span class="attr">data-x</span>=<span class="string">"1000"</span> <span class="attr">data-y</span>=<span class="string">"1000"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"temp/img/qrcode.png"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"award"</span> <span class="attr">class</span>=<span class="string">"step slide"</span> <span class="attr">data-x</span>=<span class="string">"2000"</span> <span class="attr">data-y</span>=<span class="string">"3000"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>è¯·å¼€å§‹ä½ çš„è¡¨æ¼”ï½<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"change"</span> <span class="attr">class</span>=<span class="string">"step slide"</span> <span class="attr">data-x</span>=<span class="string">"2000"</span> <span class="attr">data-y</span>=<span class="string">"3000"</span> <span class="attr">data-scale</span>=<span class="string">"5"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>åˆ‡æ¢ PPT<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"thank"</span> <span class="attr">class</span>=<span class="string">"step slide"</span>  <span class="attr">data-rel-x</span>=<span class="string">"0"</span> <span class="attr">data-rel-y</span>=<span class="string">"3000"</span> <span class="attr">data-rotate</span>=<span class="string">"90"</span> <span class="attr">data-scale</span>=<span class="string">"2"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/thanks.png"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><div class="alert warning"><p>æ¯ä¸ª div å°±æ˜¯ä¸€é¡µ pptï¼Œé‡Œé¢å¯ä»¥éšæ„æ’ç‰ˆï¼Œdata-x æ§åˆ¶ä½ç½®ï¼Œdata-scale æ§åˆ¶ç¼©æ”¾ï¼Œdata-rotate æ§åˆ¶æ—‹è½¬ã€‚</p></div><p>æ›´å¤š <code>API</code> æ–‡æ¡£ï¼Œè¯·å‚è€ƒå¦‚ä¸‹æ–‡æ¡£ï¼š<br>1.<a href="http://jartto.wang/2019/04/15/amusing-ppt/">é…·ç‚«çš„ <code>HTML5</code> ç½‘é¡µ <code>PPT</code></a><br>2.<a href="https://github.com/impress/impress.js" target="_blank" rel="noopener">æ–‡æ¡£åœ°å€</a></p><h4 id="å››ã€å®ç°å¼¹å¹•"><a href="#å››ã€å®ç°å¼¹å¹•" class="headerlink" title="å››ã€å®ç°å¼¹å¹•"></a>å››ã€å®ç°å¼¹å¹•</h4><p>ä¸ºäº†æ›´å¥½çš„ç†è§£å¼¹å¹•ï¼Œæˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªç®€ç‰ˆï¼š<br>1.å®šä¹‰å¼¹å¹•ç»“æ„<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"jartto_demo"</span>&gt;</span>æˆ‘æ˜¯å¼¹å¹•<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>2.å®šä¹‰ç§»åŠ¨åŠ¨ç”»<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">keyframes</span> barrager&#123;</span><br><span class="line">   <span class="selector-tag">from</span>&#123;</span><br><span class="line">     <span class="attribute">left</span>:<span class="number">100%</span>;</span><br><span class="line">     <span class="attribute">transform</span>:<span class="built_in">translateX</span>(0);</span><br><span class="line">     <span class="attribute">transform</span>:<span class="built_in">translate3d</span>(0, 0, 0);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="selector-tag">to</span>&#123;</span><br><span class="line">     <span class="attribute">left</span>:<span class="number">0</span>;</span><br><span class="line">     <span class="attribute">transform</span>:<span class="built_in">translate3d</span>(-100%, 0, 0);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><div class="alert danger"><p>æ³¨æ„ï¼Œä½¿ç”¨ translate3d å¯ä»¥å¼€å¯ GPU ç¡¬ä»¶åŠ é€Ÿï¼Œä¼šæ¯” translateX æ›´æµç•…ä¸€äº›ã€‚</p></div><p>å…³äºç¡¬ä»¶åŠ é€Ÿï¼Œå¯ä»¥å…³æ³¨æˆ‘ä¹‹å‰å†™çš„ä¸€ç¯‡æ–‡ç« ï¼š<a href="http://jartto.wang/2017/09/29/expand-on-performance-composite/">è¯¦è°ˆå±‚åˆæˆï¼ˆcompositeï¼‰</a></p><p>3.ä½¿ç”¨åŠ¨ç”»<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.jartto_demo</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>:absolute;</span><br><span class="line">  <span class="attribute">animation</span>: barrager <span class="number">5s</span> linear <span class="number">0s</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>OKï¼Œæˆ‘ä»¬é€šè¿‡ä¸‰æ­¥å®ç°äº†ä¸€ä¸ªç®€å•çš„å¼¹å¹•åŠ¨ç”»ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¼¹å¹•éƒ½æ˜¯éšæœºä½ç½®ï¼Œéšæœºé€Ÿåº¦ï¼Œéšæœºé¢œè‰²å‡ºç°åœ¨å±å¹•ä¸Šçš„ï¼Œè¿™ä¸ªè¯¥å¦‚ä½•å®ç°å‘¢ï¼Ÿ</p><p>4.éšæœºå¼¹å¹•å‡ºç°ä½ç½®<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> window_height = $(<span class="built_in">window</span>).height() - <span class="number">150</span>;</span><br><span class="line">bottom = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * window_height + <span class="number">40</span>);</span><br><span class="line">code = code.replace(<span class="string">"   bottom:&#123;bottom&#125;, //è·ç¦»åº•éƒ¨é«˜åº¦,å•ä½px,é»˜è®¤éšæœº \n"</span>, <span class="string">''</span>);</span><br></pre></td></tr></table></figure></p><p>5.éšæœºå¼¹å¹•é¢œè‰²<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> color = <span class="string">`#<span class="subst">$&#123;<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * (<span class="number">2</span> &lt;&lt; <span class="number">23</span>)).toString(<span class="number">16</span>)&#125;</span>`</span>; </span><br><span class="line"><span class="built_in">console</span>.log(color); <span class="comment">// #6e8360</span></span><br></pre></td></tr></table></figure></p><div class="alert info"><p>å¥½äº†ï¼Œå¤§åŠŸå‘Šæˆï¼Œæˆ‘ä»¬é¡ºæ‰‹åŠ ä¸Š Socket äº‹ä»¶ç›‘å¬ã€‚</p></div><p>6.äº‹ä»¶ç›‘å¬<br>ä¸ºäº†æ‹¿åˆ°ç”¨æˆ·å‘é€è¿‡æ¥çš„å¼¹å¹•ï¼Œæˆ‘ä»¬éœ€è¦åšä¸€ä¸ªäº‹ä»¶ç›‘å¬ï¼ˆæ¥æ”¶æœåŠ¡ç«¯æ•°æ®ï¼‰ï¼š<br>é¦–å…ˆï¼Œå¼•å…¥ <code>socket.io.js</code> æ–‡ä»¶ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"http://&#123;jartto.ip&#125;/socket.io/socket.io.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> socket = io(<span class="string">'http://&#123;jartto.ip&#125;'</span>);</span><br><span class="line">socket.on(<span class="string">'server-push'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'news message &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;'</span>, data.message);</span><br><span class="line">    run(data.message); </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬ç›‘å¬åˆ° <code>server-push</code> äº‹ä»¶çš„æ—¶å€™ï¼Œ<code>run</code> å‡½æ•°å°±ä¼šåˆå§‹åŒ–å¼¹å¹•æ–¹æ³•ï¼Œéšæœºç”Ÿæˆä¸€æ¡å¼¹å¹•ï¼Œåœ¨å±å¹•æ»‘è¿‡ã€‚</p><h4 id="äº”ã€å‘å°„å™¨ç»†èŠ‚ï¼ˆæ ¸å¿ƒä»£ç ï¼‰"><a href="#äº”ã€å‘å°„å™¨ç»†èŠ‚ï¼ˆæ ¸å¿ƒä»£ç ï¼‰" class="headerlink" title="äº”ã€å‘å°„å™¨ç»†èŠ‚ï¼ˆæ ¸å¿ƒä»£ç ï¼‰"></a>äº”ã€å‘å°„å™¨ç»†èŠ‚ï¼ˆæ ¸å¿ƒä»£ç ï¼‰</h4><p>å‘å°„å™¨å°±éå¸¸ç®€å•äº†ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>Create React App</code> åˆå§‹åŒ–é¡¹ç›®ï¼Œåœ¨ <code>src/app.js</code> ä¸­å†™å…¥ä¸€ä¸ªè¡¨å•(è¿™é‡Œä»¥ <code>React</code> ä¸ºä¾‹ï¼Œ<code>Vue</code> ä¹Ÿæ˜¯å¤§åŒå°å¼‚ï¼‰ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;div className=<span class="string">"app-box"</span>&gt;</span><br><span class="line">    &lt;div className=<span class="string">"form-box"</span>&gt;</span><br><span class="line">        &lt;Form.Item &#123;...formItemLayout&#125; label=<span class="string">""</span>&gt;</span><br><span class="line">        &#123;getFieldDecorator(<span class="string">'msg'</span>, &#123;</span><br><span class="line">            rules: [</span><br><span class="line">            &#123;</span><br><span class="line">                required: <span class="literal">true</span>,</span><br><span class="line">                message: <span class="string">'è¯·è¾“å…¥å†…å®¹'</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            ],</span><br><span class="line">        &#125;)(<span class="xml"><span class="tag">&lt;<span class="name">Input</span> <span class="attr">size</span>=<span class="string">"large"</span> <span class="attr">placeholder</span>=<span class="string">"å‘é€æ¶ˆæ¯ï¼Œå—¨èµ·æ¥ï½"</span> /&gt;</span>)&#125;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">Form.Item</span>&gt;</span></span></span><br><span class="line">        &lt;Form.Item &#123;...formTailLayout&#125; &gt;</span><br><span class="line">        &lt;Button className="btns"  shape="round" icon="close" size="large" onClick=&#123;this.cancle&#125;&gt;å–æ¶ˆ&lt;/Button&gt;</span><br><span class="line">        &lt;Button   type="primary" shape="round" icon="check" size="large" onClick=&#123;this.check&#125;&gt;å‘é€&lt;/Button&gt;</span><br><span class="line">        &lt;/Form.Item&gt;</span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p><p>ç”¨æˆ·åœ¨è¾“å…¥æ¡†è¾“å…¥æ¶ˆæ¯ï¼Œå‘æˆ‘ä»¬çš„æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œå¾ˆç®€å•ï¼Œå°±ä¸èµ˜è¿°äº†ã€‚æ•ˆæœå›¾å¯ä»¥å‚è€ƒä¸‹é¢ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/barrager/show.png" alt="Demo æ•ˆæœå›¾"></p><div class="alert warning"><p>è¯·æ³¨æ„ï¼Œæ­¤å¤„ä¸ºäº†æ¼”ç¤ºæ•ˆæœï¼Œæˆ‘å°†ä¸‰ç«¯åŒæ¡†äº†ã€‚</p></div><h4 id="å…­ã€æœåŠ¡ç«¯ç»†èŠ‚ï¼ˆæ ¸å¿ƒä»£ç ï¼‰"><a href="#å…­ã€æœåŠ¡ç«¯ç»†èŠ‚ï¼ˆæ ¸å¿ƒä»£ç ï¼‰" class="headerlink" title="å…­ã€æœåŠ¡ç«¯ç»†èŠ‚ï¼ˆæ ¸å¿ƒä»£ç ï¼‰"></a>å…­ã€æœåŠ¡ç«¯ç»†èŠ‚ï¼ˆæ ¸å¿ƒä»£ç ï¼‰</h4><p>æœåŠ¡ç«¯æ¯”è¾ƒç®€å•ï¼Œä½¿ç”¨ <code>Express</code> åˆå§‹åŒ–ä¸€ä¸ª <code>Node</code> é¡¹ç›®ï¼Œå‘ <code>app.js</code> å†™å…¥å¦‚ä¸‹å†…å®¹ï¼š<br>1.å¯åŠ¨ <code>Socket</code> æœåŠ¡ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>),</span><br><span class="line">  bodyParser = <span class="built_in">require</span>(<span class="string">'body-parser'</span>),</span><br><span class="line">  socket = <span class="built_in">require</span>(<span class="string">'socket.io'</span>),</span><br><span class="line">  fs = <span class="built_in">require</span>(<span class="string">'fs'</span>); </span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"><span class="keyword">const</span> PORT = <span class="number">4000</span>;</span><br><span class="line"><span class="keyword">const</span> io = socket(app.listen(PORT, () =&gt; <span class="built_in">console</span>.log(<span class="string">`start on port <span class="subst">$&#123;PORT&#125;</span>`</span>)));</span><br></pre></td></tr></table></figure></p><p>2.ç›‘å¬ <code>Socket</code> è¿æ¥ï¼Œæ¥æ”¶ç”¨æˆ·å‘é€æ•°æ®ï¼Œå°†æ•°æ®å†™å…¥æœ¬åœ° <code>JSON</code> æ–‡ä»¶ï¼Œå¹¶å¹¿æ’­åˆ° <code>server-push</code> äº‹ä»¶ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">io.on(<span class="string">'connection'</span>, sockets =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'è¿æ¥æˆåŠŸï¼'</span>);</span><br><span class="line">  app.post(<span class="string">'/api/send'</span>, (req, res, next) =&gt; &#123;</span><br><span class="line">    <span class="comment">// console.log(req.body);</span></span><br><span class="line">    <span class="keyword">let</span> info = <span class="built_in">JSON</span>.stringify(req.body.msg);</span><br><span class="line"></span><br><span class="line">    fs.writeFile(<span class="string">'./data/jartto.json'</span>, <span class="string">`<span class="subst">$&#123;info&#125;</span>,\n`</span>,</span><br><span class="line">    &#123;<span class="attr">flag</span>:<span class="string">'a'</span>,<span class="attr">encoding</span>:<span class="string">'utf-8'</span>,<span class="attr">mode</span>:<span class="string">'0666'</span>&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'æ–‡ä»¶å†™å…¥å¤±è´¥'</span>);</span><br><span class="line">        res.status(<span class="number">500</span>).send(<span class="string">'Error'</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        sockets.broadcast.emit(<span class="string">'server-push'</span>, &#123; <span class="attr">message</span>: req.body.msg &#125;);</span><br><span class="line">        res.status(<span class="number">200</span>).send(<span class="string">'Done'</span>);</span><br><span class="line">      &#125;  </span><br><span class="line">     &#125;) </span><br><span class="line"></span><br><span class="line">  &#125;)</span><br><span class="line">  </span><br><span class="line">  sockets.on(<span class="string">'disconnect'</span>, () =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'User Disconnected'</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>3.å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å­˜å…¥æ•°æ®åº“åšæŒä¹…åŒ–ï¼Œä»¥ä¸‹æ¼”ç¤ºå­˜å…¥ <code>MySQL</code> æ ¸å¿ƒä»£ç ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">io.on(<span class="string">'connection'</span>, sockets =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'è¿æ¥æˆåŠŸï¼'</span>);</span><br><span class="line">  app.post(<span class="string">'/api/send'</span>, (req, res, next) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123;ua, msg&#125; = req.body.msg;</span><br><span class="line">    req.getConnection(<span class="function"><span class="keyword">function</span>(<span class="params">err, cnt</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> query = cnt.add(<span class="string">'INSERT INTO (ua, msg)'</span>, &#123;ua, msg&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err, rows</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">"Error inserting : %s "</span>,err );</span><br><span class="line">          <span class="keyword">return</span> next(err);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        sockets.broadcast.emit(<span class="string">'server-push'</span>, &#123; <span class="attr">message</span>: req.body.msg &#125;);</span><br><span class="line">        res.status(<span class="number">200</span>).send(<span class="string">'Done'</span>);</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  sockets.on(<span class="string">'disconnect'</span>, () =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'User Disconnected'</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>4.å¯åŠ¨æœåŠ¡<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node app.js</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬çš„æœåŠ¡ç«¯å°±å¯åŠ¨èµ·æ¥äº†ï¼Œè®¿é—®åœ°å€æ˜¯ä½ çš„ä¸»æœº <code>IP</code> å’Œ <code>4000</code> ç«¯å£ã€‚</p><h4 id="ä¸ƒã€æ€»ç»“"><a href="#ä¸ƒã€æ€»ç»“" class="headerlink" title="ä¸ƒã€æ€»ç»“"></a>ä¸ƒã€æ€»ç»“</h4><p><a href="http://jartto.wang/2020/02/16/web-barrager/">æœ¬æ–‡</a>æˆ‘ä»¬ä»é›¶åˆ°ä¸€æ­å»ºäº†ä¸€ä¸ªå®Œæ•´çš„å¼¹å¹•æ–¹æ¡ˆï¼Œæ¶‰åŠåˆ°ä¸‰éƒ¨åˆ†ï¼šä¸»å±ï¼Œå‘å°„å™¨å’ŒæœåŠ¡ç«¯ï¼Œæ—¨åœ¨ä¸ºå°ä¼™ä¼´ä»¬æä¾›ä¸€å¥—æç®€çš„è®¾è®¡æ€è·¯ã€‚é€šè¿‡ <code>Demo</code> æˆ‘ä»¬å¯ä»¥ç®€å•çš„ä¸²è”ä¸€ä¸ªå…¨æ ˆé¡¹ç›®ï¼Œåšæ›´å¤šæœ‰è¶£çš„äº‹æƒ…ã€‚</p><p>æ–‡ç« æœ€åï¼Œæ‰“ä¸ªå°å¹¿å‘Šå§ã€‚å¦‚æœä½ æƒ³æ­ä¸Šåœ¨çº¿æ•™è‚²çš„å¿«è½¦ï¼Œå¿«é€Ÿæˆé•¿ï¼Œä¸å¦¨åŠ å…¥æˆ‘ä»¬ã€‚ä¸€èµ·æˆé•¿ï¼Œä¸€èµ·å­¦ä¹ ï¼Œä¸€èµ·æŒ‘æˆ˜æ›´å¤šæœ‰è¶£çš„äº‹æƒ…ï¼Œã€Œè·Ÿè°å­¦-é«˜é€”è¯¾å ‚ã€æ¬¢è¿ä½ ï¼Œè¯·å°†ç®€å†ç§æˆ‘ï½</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é‡å¤§çš„æ´»åŠ¨ç°åœºä¸€èˆ¬ç¦»ä¸å¼€ &lt;code&gt;PPT&lt;/code&gt; æ¼”ç¤ºï¼Œå¯æ˜¯å¦‚ä½•æœ‰æ•ˆå’Œç°åœºäº’åŠ¨å‘¢ï¼Ÿè¿™æ—¶å€™å¼¹å¹•å¿…ä¸å¯å°‘ï¼Œé™æ€çš„ &lt;code&gt;PPT&lt;/code&gt; å°±ç•¥æ˜¾ä¹åŠ›ã€‚æœ‰æ²¡æœ‰ä¸€ç§å¥½çš„æ–¹æ¡ˆå¯ä»¥äºŒè€…å…¼å¾—å‘¢ï¼Ÿ&lt;br&gt;
    
    </summary>
    
    
      <category term="æŠ€æœ¯åšæ–‡" scheme="http://jartto.wang/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E6%96%87/"/>
    
    
      <category term="web" scheme="http://jartto.wang/tags/web/"/>
    
      <category term="ppt" scheme="http://jartto.wang/tags/ppt/"/>
    
      <category term="barrager" scheme="http://jartto.wang/tags/barrager/"/>
    
  </entry>
  
  <entry>
    <title>GitBook å’Œå®ƒæœ‰è¶£çš„æ’ä»¶</title>
    <link href="http://jartto.wang/2020/02/02/about-gitbook/"/>
    <id>http://jartto.wang/2020/02/02/about-gitbook/</id>
    <published>2020-02-02T07:20:03.000Z</published>
    <updated>2020-02-02T12:45:20.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç›¸ä¿¡å¾ˆå¤šç«¥é‹åœ¨æ—¥å¸¸å¼€å‘ä¸­éƒ½ä¼šæœ‰ã€Œè¯´æ˜æ–‡æ¡£ã€ã€ã€Œå­¦ä¹ ç¬”è®°ã€å’Œã€Œä¸ªäººåšå®¢ã€çš„éœ€æ±‚ï¼Œé‚£ä¹ˆæœ€ç»æµç®€æ´çš„æ–¹å¼è«è¿‡äº <code>GitBook</code> æ–¹æ¡ˆäº†ï¼Œ<code>10</code> åˆ†é’Ÿå­¦ä¹ ï¼Œæ°¸ä¹…ä½¿ç”¨ã€‚<br><a id="more"></a><br>æœ¬æ–‡å°†ç®€å•ä»‹ç» <code>GitBook</code> çš„ä½¿ç”¨æ–¹å¼ä»¥åŠæœ€ä½³æ’ä»¶æ­é…æ–¹æ¡ˆï¼Œå¿«æ¥è¿è¡Œä¸€ä¸ªä¸ä¼—ä¸åŒè€Œä¸”å…è´¹æ‰˜ç®¡çš„ä¸ªäººç«™ç‚¹å§ï¼</p><h4 id="ä¸€ã€å®‰è£…ä¸ä½¿ç”¨"><a href="#ä¸€ã€å®‰è£…ä¸ä½¿ç”¨" class="headerlink" title="ä¸€ã€å®‰è£…ä¸ä½¿ç”¨"></a>ä¸€ã€å®‰è£…ä¸ä½¿ç”¨</h4><p>1.<strong>å®‰è£… <code>GitBook</code> æ’ä»¶</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install gitbook-cli -g</span><br></pre></td></tr></table></figure></p><p>2.<strong>æŸ¥çœ‹å®‰è£…ç‰ˆæœ¬</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitbook -V</span><br></pre></td></tr></table></figure></p><p>æ§åˆ¶å°ä¼šè¾“å‡ºå¦‚ä¸‹ä¿¡æ¯ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Jartto</span></span><br><span class="line">CLI version: 2.3.2</span><br><span class="line">GitBook version: 3.2.3</span><br></pre></td></tr></table></figure></p><p>3.<strong>åˆå§‹åŒ–</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å»ºç«‹é¡¹ç›®ï¼š</span></span><br><span class="line">mkdir jartto-gitbook-demo</span><br><span class="line"><span class="comment"># è¿›å…¥ç›®å½•ï¼š</span></span><br><span class="line"><span class="built_in">cd</span> jartto-gitbook-demo</span><br><span class="line"><span class="comment"># åˆå§‹åŒ–ï¼š</span></span><br><span class="line">gitbook init</span><br></pre></td></tr></table></figure></p><p>æ­¤æ—¶ï¼Œ<code>jartto-gitbook-demo</code> ç›®å½•ä¸‹ä¼šè‡ªåŠ¨ç”Ÿæˆå¦‚ä¸‹æ–‡ä»¶ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â””â”€â”€ SUMMARY.md</span><br><span class="line"></span><br><span class="line">0 directories, 2 files</span><br></pre></td></tr></table></figure></p><p>4.<strong>å¯åŠ¨</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitbook serve</span><br></pre></td></tr></table></figure></p><p>5.<strong>è®¿é—®ç«™ç‚¹</strong>ï¼š<a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a><br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/gitbook/demo.png" alt="ç½‘ç«™é¢„è§ˆ"></p><div class="alert success"><p>æ­å–œä½ ï¼Œåˆ°è¿™ä¸€æ­¥æˆ‘ä»¬å·²ç»å®Œæˆäº†åŸºæœ¬ç‰ˆæœ¬ã€‚</p></div><p>æ›´è¯¦ç»†çš„æ“ä½œï¼Œè¯·æŸ¥çœ‹å¦‚ä¸‹æ–‡æ¡£ï¼š</p><ul><li><a href="https://www.gitbook.com/" target="_blank" rel="noopener">å®˜ç½‘åœ°å€</a></li><li><a href="https://github.com/GitbookIO/gitbook" target="_blank" rel="noopener">Github åœ°å€</a></li><li><a href="https://docs.gitbook.com/resources/gitbook-legacy/v2-differences#plugins" target="_blank" rel="noopener">å¸®åŠ©æ–‡æ¡£</a></li></ul><h4 id="äºŒã€é‡ç‚¹è¯´æ˜"><a href="#äºŒã€é‡ç‚¹è¯´æ˜" class="headerlink" title="äºŒã€é‡ç‚¹è¯´æ˜"></a>äºŒã€é‡ç‚¹è¯´æ˜</h4><p>1.<strong>ç›®å½•ç»“æ„</strong><br>å½“æˆ‘ä»¬è¿è¡Œ <code>gitbook serve</code> åï¼Œ<code>jartto-gitbook-demo</code> ç›®å½•ä¸‹ä¼šç”Ÿæˆä¸€ä¸ª <code>_book</code> æ–‡ä»¶å¤¹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ SUMMARY.md</span><br><span class="line">â””â”€â”€ _book</span><br><span class="line">    â”œâ”€â”€ gitbook</span><br><span class="line">    â”œâ”€â”€ index.html</span><br><span class="line">    â””â”€â”€ search_index.json</span><br><span class="line"></span><br><span class="line">2 directories, 4 files</span><br></pre></td></tr></table></figure></p><p>2.<strong>å…³äº <code>README.md</code></strong><br><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># Introduction</span></span><br></pre></td></tr></table></figure></p><p>è¯´æ˜æ–‡æ¡£ï¼Œå¤§å®¶åº”è¯¥éƒ½ä¸é™Œç”Ÿï¼Œå°±ä¸èµ˜è¿°äº†ã€‚</p><p>3.<strong>å…³äº <code>SUMMARY.md</code></strong><br><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># Summary</span></span><br><span class="line"><span class="bullet">* </span>[<span class="string">Introduction</span>](<span class="link">README.md</span>)</span><br></pre></td></tr></table></figure></p><p><code>SUMMARY.md</code> å…¶å®å°±æ˜¯ä¹¦çš„ç« èŠ‚ç›®å½•ï¼Œæˆ‘ä»¬ä¸å¦¨ç¨ä½œä¿®æ”¹ï¼š<br><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># Jartto-GitBook-Demo</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>[<span class="string">ä¸€ã€æ¦‚è¦</span>](<span class="link">README.md</span>)</span><br><span class="line"><span class="code">    * [1.ç¤ºä¾‹](README.md)</span></span><br><span class="line"><span class="code">    * [2.è¯´æ˜](README.md)</span></span><br><span class="line"><span class="code">    * [3.æ–‡æ¡£](README.md)</span></span><br><span class="line"><span class="bullet">* </span>[<span class="string">äºŒã€é«˜çº§</span>](<span class="link">README.md</span>)</span><br><span class="line"><span class="code">    * [1.é…ç½®](README.md)</span></span><br><span class="line"><span class="code">    * [2.æ’ä»¶](README.md)</span></span><br></pre></td></tr></table></figure></p><p>æ•ˆæœå¦‚ä¸‹ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/gitbook/demo0.png" alt="æ¼”ç¤ºç›®å½•"></p><h4 id="ä¸‰ã€è¡¥å……æ–‡æ¡£"><a href="#ä¸‰ã€è¡¥å……æ–‡æ¡£" class="headerlink" title="ä¸‰ã€è¡¥å……æ–‡æ¡£"></a>ä¸‰ã€è¡¥å……æ–‡æ¡£</h4><p>å½“ç„¶ï¼Œ<code>GitBook</code> çš„è¿œæ¯”æˆ‘ä»¬æƒ³è±¡çš„å¼ºå¤§ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ <code>gitbook help</code> æ¥æŸ¥çœ‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">build [book] [output]       build a book</span><br><span class="line">        --<span class="built_in">log</span>                   Minimum <span class="built_in">log</span> level to display (Default is info; Values are debug, info, warn, error, disabled)</span><br><span class="line">        --format                Format to build to (Default is website; Values are website, json, ebook)</span><br><span class="line">        --[no-]timing           Print timing debug information (Default is <span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line">serve [book] [output]       serve the book as a website <span class="keyword">for</span> testing</span><br><span class="line">    --port                  Port <span class="keyword">for</span> server to listen on (Default is 4000)</span><br><span class="line">    --lrport                Port <span class="keyword">for</span> livereload server to listen on (Default is 35729)</span><br><span class="line">    --[no-]watch            Enable file watcher and live reloading (Default is <span class="literal">true</span>)</span><br><span class="line">    --[no-]live             Enable live reloading (Default is <span class="literal">true</span>)</span><br><span class="line">    --[no-]open             Enable opening book <span class="keyword">in</span> browser (Default is <span class="literal">false</span>)</span><br><span class="line">    --browser               Specify browser <span class="keyword">for</span> opening book (Default is )</span><br><span class="line">    --<span class="built_in">log</span>                   Minimum <span class="built_in">log</span> level to display (Default is info; Values are debug, info, warn, error, disabled)</span><br><span class="line">    --format                Format to build to (Default is website; Values are website, json, ebook)</span><br><span class="line"></span><br><span class="line">install [book]              install all plugins dependencies</span><br><span class="line">    --<span class="built_in">log</span>                   Minimum <span class="built_in">log</span> level to display (Default is info; Values are debug, info, warn, error, disabled)</span><br><span class="line"></span><br><span class="line">parse [book]                parse and <span class="built_in">print</span> debug information about a book</span><br><span class="line">    --<span class="built_in">log</span>                   Minimum <span class="built_in">log</span> level to display (Default is info; Values are debug, info, warn, error, disabled)</span><br><span class="line"></span><br><span class="line">init [book]                 setup and create files <span class="keyword">for</span> chapters</span><br><span class="line">    --<span class="built_in">log</span>                   Minimum <span class="built_in">log</span> level to display (Default is info; Values are debug, info, warn, error, disabled)</span><br><span class="line"></span><br><span class="line">pdf [book] [output]         build a book into an ebook file</span><br><span class="line">    --<span class="built_in">log</span>                   Minimum <span class="built_in">log</span> level to display (Default is info; Values are debug, info, warn, error, disabled)</span><br><span class="line"></span><br><span class="line">epub [book] [output]        build a book into an ebook file</span><br><span class="line">    --<span class="built_in">log</span>                   Minimum <span class="built_in">log</span> level to display (Default is info; Values are debug, info, warn, error, disabled)</span><br><span class="line"></span><br><span class="line">mobi [book] [output]        build a book into an ebook file</span><br><span class="line">    --<span class="built_in">log</span>                   Minimum <span class="built_in">log</span> level to display (Default is info; Values are debug, info, warn, error, disabled)</span><br></pre></td></tr></table></figure></p><h4 id="å››ã€æœ‰è¶£æ’ä»¶"><a href="#å››ã€æœ‰è¶£æ’ä»¶" class="headerlink" title="å››ã€æœ‰è¶£æ’ä»¶"></a>å››ã€æœ‰è¶£æ’ä»¶</h4><p>äº†è§£ä¸Šé¢çš„æ“ä½œï¼Œä½¿ç”¨ <code>GitBook</code> å·²ç»æ²¡æœ‰ä»»ä½•éšœç¢äº†ã€‚</p><div class="alert info"><p>å¦‚æœä½ è¿˜æƒ³åšä¸€äº›ä¸ªæ€§åŒ–çš„æ“ä½œï¼Œä¸å¦¨ç»§ç»­æ·±å…¥ã€‚</p></div><p>è¦å®‰è£…æ’æ¶ï¼Œéœ€è¦æˆ‘ä»¬æœ‰é…ç½®æ–‡ä»¶ <code>book.json</code>ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch book.json</span><br></pre></td></tr></table></figure></p><p>å†™å…¥åŸºæœ¬é…ç½®ï¼š<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"title"</span>: <span class="string">"Jartto-GitBook-Demo"</span>,</span><br><span class="line">    <span class="attr">"description"</span>: <span class="string">"Jartto-GitBook-Demo"</span>,</span><br><span class="line">    <span class="attr">"author"</span>: <span class="string">"sphard"</span>,</span><br><span class="line">    <span class="attr">"language"</span>: <span class="string">"zh-hans"</span>,</span><br><span class="line">    <span class="attr">"root"</span>: <span class="string">"."</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">"plugins"</span>: [</span><br><span class="line">        <span class="string">"donate"</span>,</span><br><span class="line">        <span class="string">"github-buttons@2.1.0"</span>,</span><br><span class="line">        <span class="string">"edit-link"</span></span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">    <span class="attr">"pluginsConfig"</span>: &#123;</span><br><span class="line">        <span class="attr">"donate"</span>: &#123;</span><br><span class="line">            <span class="attr">"wechat"</span>: <span class="string">"http://jartto.wang/images/wechatpay.jpg"</span>,</span><br><span class="line">            <span class="attr">"alipay"</span>: <span class="string">"http://jartto.wang/images/alipay.jpg"</span>,</span><br><span class="line">            <span class="attr">"title"</span>: <span class="string">""</span>,</span><br><span class="line">            <span class="attr">"button"</span>: <span class="string">"æ‰“èµ"</span>,</span><br><span class="line">            <span class="attr">"alipayText"</span>: <span class="string">"æ”¯ä»˜å®æ‰“èµ"</span>,</span><br><span class="line">            <span class="attr">"wechatText"</span>: <span class="string">"å¾®ä¿¡æ‰“èµ"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"github-buttons"</span>: &#123;</span><br><span class="line">            <span class="attr">"repo"</span>: <span class="string">"jartto/gitbook"</span>,</span><br><span class="line">            <span class="attr">"types"</span>: [</span><br><span class="line">                <span class="string">"star"</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">"size"</span>: <span class="string">"small"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"edit-link"</span>: &#123;</span><br><span class="line">            <span class="attr">"base"</span>: <span class="string">"https://github.com/jartto/gitbook/master"</span>,</span><br><span class="line">            <span class="attr">"label"</span>: <span class="string">"Edit This Page"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ’ä»¶å®‰è£…é€šç”¨å‘½ä»¤ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install gitbook-plugin-[æ’ä»¶å]</span><br></pre></td></tr></table></figure></p><p>ä¾‹å¦‚ï¼šæˆ‘ä»¬è¦å®‰è£… <code>flexible-alerts</code> ä¿¡æ¯æ¡†æ’ä»¶ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install gitbook-plugin-flexible-alerts</span><br></pre></td></tr></table></figure></p><p>æ•ˆæœå¦‚ä¸‹ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/gitbook/plugin.png" alt="ä¿¡æ¯æ¡†æ’ä»¶"></p><p>è¿˜æœ‰å¾ˆå¤šå¯ç”¨æ’ä»¶ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><ol><li>ä¿¡æ¯æ¡†(<code>flexible-alerts</code>)</li><li>é˜…è¯»ç»Ÿè®¡ï¼ˆ<code>pageview-count</code>ï¼‰</li><li>ä¾§è¾¹æ å®½åº¦å¯è°ƒèŠ‚ï¼ˆ<code>splitter</code>ï¼‰</li><li>é¡µè„šç‰ˆæƒï¼ˆ<code>page-copyright</code>ï¼‰</li><li>æ‰“èµåŠŸèƒ½ï¼ˆ<code>donate</code>ï¼‰</li><li>åˆ†äº«å½“å‰é¡µé¢ï¼ˆ<code>sharing-plus</code>ï¼‰</li><li>ä¿®æ”¹æ ‡é¢˜æ å›¾æ ‡ï¼ˆ<code>custom-favicon</code>ï¼‰</li><li>å¤é€‰æ¡†ï¼ˆ<code>todo</code>ï¼‰</li><li>æ˜¾ç¤ºå›¾ç‰‡åç§°ï¼ˆ<code>image-captions</code>ï¼‰</li><li>ç›®å½•æŠ˜å ï¼ˆ<code>toggle-chapters</code>ï¼‰</li><li>åˆ†ç« èŠ‚å±•ç¤ºï¼ˆ<code>multipart</code>ï¼‰</li><li>æ’å…¥ <code>Logo</code>ï¼ˆ<code>insert-logo</code>ï¼‰</li><li><code>Google</code> åˆ†æï¼ˆ<code>ga</code>ï¼‰</li><li>è¿”å›é¡¶éƒ¨ï¼ˆ<code>back-to-top-button</code>ï¼‰</li><li>ä»£ç æ·»åŠ è¡Œå·å’Œå¤åˆ¶æŒ‰é’®ï¼ˆ<code>code</code>ï¼‰</li><li>é«˜çº§æœç´¢ï¼Œæ”¯æŒä¸­æ–‡ï¼ˆ<code>search-pro</code>ï¼‰</li><li>æ·»åŠ  <code>Github</code> å›¾æ ‡ï¼ˆ<code>github</code>ï¼‰<br>â€¦</li></ol><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š<br><code>GitBook</code> é»˜è®¤å¸¦æœ‰ <code>5</code> ä¸ªæ’ä»¶ï¼š</p><ul><li><code>highlight</code></li><li><code>search</code></li><li><code>sharing</code></li><li><code>fontsettings</code></li><li><code>livereload</code></li></ul><p>å¦‚æœè¦å»é™¤è‡ªå¸¦çš„æ’ä»¶ï¼Œå¯ä»¥åœ¨æ’ä»¶åç§°å‰é¢åŠ  <code>-</code>ï¼Œä¾‹å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;plugins&quot;:[</span><br><span class="line">    &quot;-search&quot;</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p><p>å°æŠ€å·§ï¼š<code>NPM</code> ä¸­æœç´¢å…³é”®å­— <a href="https://www.npmjs.com/search?q=gitbook-plugin" target="_blank" rel="noopener"><code>GitBook-Plugin</code></a>ï¼Œå‘ç°æ›´å¤šæ’ä»¶ã€‚</p><h4 id="äº”ã€æ•ˆæœå±•ç¤º"><a href="#äº”ã€æ•ˆæœå±•ç¤º" class="headerlink" title="äº”ã€æ•ˆæœå±•ç¤º"></a>äº”ã€æ•ˆæœå±•ç¤º</h4><p>1.<code>GitBook</code> æ‰©å±•ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/gitbook/gitbook1.png" alt="æ‰©å±• GitBook"></p><p>2.ç¤ºä¾‹ä¸€ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/gitbook/demo1.png" alt="ç¤ºä¾‹ä¸€"></p><p>3.ç¤ºä¾‹äºŒï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/gitbook/demo2.png" alt="ç¤ºä¾‹äºŒ"></p><p>4.ç¤ºä¾‹ä¸‰ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/gitbook/demo3.png" alt="ç¤ºä¾‹ä¸‰"></p><h4 id="å…­ã€æ€»ç»“"><a href="#å…­ã€æ€»ç»“" class="headerlink" title="å…­ã€æ€»ç»“"></a>å…­ã€æ€»ç»“</h4><p><a href="http://jartto.wang/2020/02/02/about-gitbook/">ä¸Šæ–‡</a>ä»‹ç»äº† <code>GitBook</code> çš„åŸºæœ¬ä½¿ç”¨å’Œä¸€äº›å®ç”¨æ’ä»¶ï¼Œæ„å»ºåœ¨çº¿æ–‡æ¡£å˜å¾—è½»è€Œæ˜“ä¸¾ã€‚åŠ ä¸Š <code>Github</code> å…è´¹çš„æ‰˜ç®¡å¹³å°ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¹²æ›´å¤šæœ‰è¶£çš„äº‹æƒ…äº†ã€‚å¿«è¾“å‡ºä½ çš„ <code>HTML</code>ã€<code>PDF</code>ã€<code>eBook</code> æŠ€æœ¯æ–‡æ¡£å§ï½</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç›¸ä¿¡å¾ˆå¤šç«¥é‹åœ¨æ—¥å¸¸å¼€å‘ä¸­éƒ½ä¼šæœ‰ã€Œè¯´æ˜æ–‡æ¡£ã€ã€ã€Œå­¦ä¹ ç¬”è®°ã€å’Œã€Œä¸ªäººåšå®¢ã€çš„éœ€æ±‚ï¼Œé‚£ä¹ˆæœ€ç»æµç®€æ´çš„æ–¹å¼è«è¿‡äº &lt;code&gt;GitBook&lt;/code&gt; æ–¹æ¡ˆäº†ï¼Œ&lt;code&gt;10&lt;/code&gt; åˆ†é’Ÿå­¦ä¹ ï¼Œæ°¸ä¹…ä½¿ç”¨ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="æŠ€æœ¯åšæ–‡" scheme="http://jartto.wang/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E6%96%87/"/>
    
    
      <category term="gitbook" scheme="http://jartto.wang/tags/gitbook/"/>
    
      <category term="plugin" scheme="http://jartto.wang/tags/plugin/"/>
    
  </entry>
  
  <entry>
    <title>ç³»ç»Ÿè´Ÿè½½çœ‹ä¸æ‡‚ï¼Ÿ</title>
    <link href="http://jartto.wang/2020/01/20/system-load/"/>
    <id>http://jartto.wang/2020/01/20/system-load/</id>
    <published>2020-01-20T02:54:40.000Z</published>
    <updated>2020-01-20T08:43:27.000Z</updated>
    
    <content type="html"><![CDATA[<p>Web å¼€å‘ä¼šç»å†ã€Œå¼€å‘-ä¸Šçº¿-éƒ¨ç½²ã€ä¸‰ä¸ªè¿‡ç¨‹ï¼Œéƒ¨ç½²ä¹‹åç«™ç‚¹çš„è¿è¡ŒçŠ¶æ€å¦‚ä½•å´é²œæœ‰å…³æ³¨ã€‚å¦‚æœæˆ‘ä»¬è¦ä¼°ç®—ç½‘ç«™èƒ½æ‰¿å—å¤šå¤§çš„å¹¶å‘ï¼Œä½ å¯èƒ½éœ€è¦çœŸæ­£äº†è§£ç³»ç»Ÿè´Ÿè½½ã€‚<br><a id="more"></a></p><h4 id="ä¸€ã€å…ˆçœ‹åœºæ™¯"><a href="#ä¸€ã€å…ˆçœ‹åœºæ™¯" class="headerlink" title="ä¸€ã€å…ˆçœ‹åœºæ™¯"></a>ä¸€ã€å…ˆçœ‹åœºæ™¯</h4><p>1.æœåŠ¡å™¨çŠ¶æ€ï¼ˆ<code>Linux</code> æœåŠ¡å™¨é€šè¿‡ <code>Top</code> å‘½ä»¤æŸ¥çœ‹ï¼‰<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/linux/system-load.png" alt="æœåŠ¡å™¨çŠ¶æ€"></p><p>2.æ•°æ®ç›‘æ§<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/linux/load-avg.png" alt="å¹³å‡è´Ÿè½½"></p><p>ä¸Šé¢æ˜¯ä¸¤ä¸ªå…¸å‹åº”ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨æœåŠ¡å™¨æŸ¥çœ‹ç³»ç»Ÿè´Ÿè½½ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥è·å–æ•°æ®æœ¬åœ°å¯è§†åŒ–æ˜¾ç¤ºã€‚å¬èµ·æ¥ä¸é”™ï¼Œå¯æ˜¯é—®é¢˜æ¥äº†ï¼š</p><p>Q1ï¼š<code>load average</code>: 0.03, 0.12, 0.07 æ˜¯ä»€ä¹ˆï¼Ÿ<br>Q2ï¼šä¸ºä»€ä¹ˆåŒæ—¶ç›‘æ§ 1 åˆ†é’Ÿï¼Œ5 åˆ†é’Ÿï¼Œ15 åˆ†é’Ÿï¼Ÿ</p><p>å¦‚æœä½ å¯¹æ­¤æœ‰ç–‘é—®ï¼Œä¸å¦¨ç»§ç»­é˜…è¯»ã€‚</p><h4 id="äºŒã€å‚æ•°è¯´æ˜"><a href="#äºŒã€å‚æ•°è¯´æ˜" class="headerlink" title="äºŒã€å‚æ•°è¯´æ˜"></a>äºŒã€å‚æ•°è¯´æ˜</h4><div class="alert info"><p>ä¸ºäº†ä¾¿äºç†è§£ï¼Œæˆ‘ä»¬ä»ã€Œä¸€ä¸ªæ¯”å–»ã€ï¼Œã€Œä¸¤ä¸ªæ¦‚å¿µã€å’Œã€Œä¸‰ä¸ªè¾¹ç•Œã€æ¥è¯´æ˜ã€‚</p></div><p>1.<strong>ä¸€ä¸ªæ¯”å–»</strong><br>æˆ‘ä»¬å¯ä»¥æŠŠ <code>CPU</code> æ¯”å–»æˆä¸€æ¡é©¬è·¯ï¼Œè¿›ç¨‹ä»»åŠ¡å°±æ˜¯é©¬è·¯ä¸Šé£é©°çš„æ±½è½¦ï¼Œ<code>Load</code> åˆ™è¡¨ç¤ºé©¬è·¯çš„æ‹¥æŒ¤ç¨‹åº¦ã€‚</p><p>2.<strong>ä¸¤ä¸ªæ¦‚å¿µ</strong><br>ç³»ç»Ÿè´Ÿè½½ï¼ˆSystem Loadï¼‰ï¼š<br>ç³»ç»Ÿ <code>CPU</code> ç¹å¿™ç¨‹åº¦çš„åº¦é‡ï¼Œå³æœ‰å¤šå°‘è¿›ç¨‹åœ¨ç­‰å¾…è¢« <code>CPU</code> è°ƒåº¦ï¼ˆè¿›ç¨‹ç­‰å¾…é˜Ÿåˆ—çš„é•¿åº¦ï¼‰ã€‚</p><p>å¹³å‡è´Ÿè½½ï¼ˆLoad Averageï¼‰ï¼š<br>ä¸€æ®µæ—¶é—´å†…ç³»ç»Ÿçš„å¹³å‡è´Ÿè½½ï¼Œè¿™ä¸ªä¸€æ®µæ—¶é—´ä¸€èˆ¬å– 1 åˆ†é’Ÿã€5 åˆ†é’Ÿã€15 åˆ†é’Ÿã€‚</p><p>3.<strong>ä¸‰ä¸ªè¾¹ç•Œ</strong><br>Load = 0ï¼Œè·¯ä¸Šä¸€è¾†è½¦ä¹Ÿæ²¡æœ‰ï¼›<br>Load = 0.7ï¼Œä¸€å¤§åŠè·¯ä¸Šæœ‰è½¦ï¼›<br>Load = 1ï¼Œæ‰€æœ‰è·¯æ®µéƒ½æœ‰è½¦ï¼ŒåŸºæœ¬é¥±å’ŒçŠ¶æ€ï¼Œä½†æ˜¯é“è·¯ä»ç„¶èƒ½å¤Ÿé€šè¡Œï¼›</p><p>é˜®ä¸€å³°è€å¸ˆ<a href="https://www.ruanyifeng.com/blog/2011/07/linux_load_average_explained.html" target="_blank" rel="noopener">ç†è§£ Linux ç³»ç»Ÿè´Ÿè·</a>ä¸­ä¸¾çš„è¿™ä¸ªä¾‹å­å¾ˆå½¢è±¡ï¼š</p><ul><li>ç³»ç»Ÿè´Ÿè·ä¸º 1.7ï¼Œæ„å‘³ç€è½¦è¾†å¤ªå¤šäº†ï¼Œæ¡¥å·²ç»è¢«å æ»¡äº†ï¼ˆ100%ï¼‰ï¼Œåé¢ç­‰ç€ä¸Šæ¡¥çš„è½¦è¾†ä¸ºè·¯é¢è½¦è¾†çš„ 70%ã€‚</li><li>ç³»ç»Ÿè´Ÿè· 2.0ï¼Œæ„å‘³ç€ç­‰å¾…ä¸Šæ¡¥çš„è½¦è¾†ä¸æ¡¥é¢çš„è½¦è¾†ä¸€æ ·å¤šï¼›</li><li>ç³»ç»Ÿè´Ÿè· 3.0ï¼Œæ„å‘³ç€ç­‰å¾…ä¸Šæ¡¥çš„è½¦è¾†æ˜¯æ¡¥é¢è½¦è¾†çš„ 2 å€ã€‚</li></ul><p>æ€»ä¹‹ï¼Œå½“ç³»ç»Ÿè´Ÿè·å¤§äº1ï¼Œåé¢çš„è½¦è¾†å°±å¿…é¡»ç­‰å¾…äº†ï¼›ç³»ç»Ÿè´Ÿè·è¶Šå¤§ï¼Œè¿‡æ¡¥å°±å¿…é¡»ç­‰å¾—è¶Šä¹…ã€‚</p><div class="alert success"><p>é“è·¯çš„é€šè¡Œèƒ½åŠ›ï¼Œå°±æ˜¯ <code>CPU</code> çš„æœ€å¤§å·¥ä½œé‡ï¼›é“è·¯ä¸Šçš„è½¦è¾†ï¼Œå°±æ˜¯ä¸€ä¸ªä¸ªç­‰å¾… <code>CPU</code> å¤„ç†çš„è¿›ç¨‹ï¼ˆ<code>Process</code>ï¼‰ã€‚</p></div><h4 id="ä¸‰ã€å¤šæ ¸è´Ÿè½½å¦‚ä½•è®¡ç®—ï¼Ÿ"><a href="#ä¸‰ã€å¤šæ ¸è´Ÿè½½å¦‚ä½•è®¡ç®—ï¼Ÿ" class="headerlink" title="ä¸‰ã€å¤šæ ¸è´Ÿè½½å¦‚ä½•è®¡ç®—ï¼Ÿ"></a>ä¸‰ã€å¤šæ ¸è´Ÿè½½å¦‚ä½•è®¡ç®—ï¼Ÿ</h4><p>ä¸Šæ–‡æˆ‘ä»¬ä¸ç®¡æ˜¯è·¯è¿˜æ˜¯æ¡¥çš„ä¾‹å­ï¼Œéƒ½æ˜¯é»˜è®¤ç”µè„‘åªæœ‰ä¸€ä¸ª <code>CPU</code>ï¼Œé‚£å¦‚æœå¤š <code>CPU</code>ï¼Œæƒ…å†µåˆæ˜¯å¦‚ä½•å‘¢ï¼Ÿ</p><div class="alert success"><p>å¾ˆç®€å•ï¼Œ<code>2</code> ä¸ª <code>CPU</code>ï¼Œæ„å‘³ç€ç”µè„‘çš„å¤„ç†èƒ½åŠ›ç¿»äº†ä¸€å€ï¼Œèƒ½å¤ŸåŒæ—¶å¤„ç†çš„è¿›ç¨‹æ•°é‡ä¹Ÿç¿»äº†ä¸€å€ã€‚</p></div><p><code>2</code> ä¸ª <code>CPU</code> è¡¨æ˜ç³»ç»Ÿè´Ÿè½½å¯ä»¥è¾¾åˆ° <code>2.0</code>ï¼Œæ­¤æ—¶æ¯ä¸ª <code>CPU</code> éƒ½è¾¾åˆ° <code>100%</code> çš„å·¥ä½œé‡ã€‚å¦‚æœä½ çš„æœåŠ¡å™¨æ˜¯ <code>4</code> æ ¸ <code>CPU</code>ï¼Œé‚£ä¹ˆç³»ç»Ÿè´Ÿè½½æé™å°±æ˜¯ <code>4.0</code>ã€‚</p><h4 id="å››ã€ç­”é¢˜æ—¶é—´"><a href="#å››ã€ç­”é¢˜æ—¶é—´" class="headerlink" title="å››ã€ç­”é¢˜æ—¶é—´"></a>å››ã€ç­”é¢˜æ—¶é—´</h4><p>åˆ°è¿™é‡Œï¼Œç›¸ä¿¡æˆ‘ä»¬çš„ <code>Q1</code> é—®é¢˜å·²ç»è§£å†³äº†ã€‚æˆ‘ä»¬é‡ç‚¹æ¥çœ‹ <code>Q2</code>ï¼šä¸ºä»€ä¹ˆåŒæ—¶ç›‘æ§ <code>1</code> åˆ†é’Ÿï¼Œ<code>5</code> åˆ†é’Ÿï¼Œ<code>15</code> åˆ†é’Ÿï¼Ÿ</p><p><a href="https://www.w3cschool.cn/architectroad/architectroad-loadaverage.html" target="_blank" rel="noopener">ä¸€åˆ†é’Ÿç†è§£è´Ÿè½½ LoadAverage </a> ä¸­æœ‰å¾ˆå¥½çš„è§£é‡Šï¼š</p><ul><li>Load &lt; 0.7æ—¶ï¼šç³»ç»Ÿå¾ˆé—²ï¼Œé©¬è·¯ä¸Šæ²¡ä»€ä¹ˆè½¦ï¼Œè¦è€ƒè™‘å¤šéƒ¨ç½²ä¸€äº›æœåŠ¡</li><li>0.7 &lt; Load &lt; 1æ—¶ï¼šç³»ç»ŸçŠ¶æ€ä¸é”™ï¼Œé©¬è·¯å¯ä»¥è½»æ¾åº”å¯¹</li><li>Load == 1æ—¶ï¼šç³»ç»Ÿé©¬ä¸Šè¦å¤„ç†ä¸å¤šæ¥äº†ï¼Œèµ¶ç´§æ‰¾ä¸€ä¸‹åŸå› </li><li>Load &gt; 5æ—¶ï¼šé©¬è·¯å·²ç»éå¸¸ç¹å¿™äº†ï¼Œè¿›å…¥é©¬è·¯çš„æ¯è¾†æ±½è½¦éƒ½è¦æ— æ³•å¾ˆå¿«çš„è¿è¡Œ</li></ul><p>é‚£ä¹ˆå¦‚æœæŒ‰ç…§ 1 åˆ†é’Ÿæ¥è¯„ä¼°ç³»ç»Ÿè´Ÿè½½ï¼Œä¼šè¢«ç³»ç»ŸçŸ­æš‚çš„æŠ–åŠ¨æ‰€å½±å“ã€‚</p><div class="alert success"><p>æ‰€ä»¥ 1 åˆ†é’Ÿæ›´å¤šæ˜¯ä½œä¸ºä¸€ä¸ªå‚è€ƒåº¦é‡ï¼Œç»¼åˆ 5 åˆ†é’Ÿå’Œ 10 åˆ†é’Ÿä½¿ç›‘æ§æŒ‡æ ‡æ›´åŠ å‡†ç¡®ã€‚</p></div><p>1 åˆ†é’Ÿ Load &gt; 5ï¼Œ5 åˆ†é’Ÿ Load &lt; 1ï¼Œ15 åˆ†é’Ÿ Load &lt; 1<br>çŸ­æœŸå†…ç¹å¿™ï¼Œä¸­é•¿æœŸç©ºé—²ï¼Œåˆæ­¥åˆ¤æ–­æ˜¯ä¸€ä¸ªã€ŒæŠ–åŠ¨ã€æˆ–è€…æ˜¯ã€Œæ‹¥å¡å‰å…†ã€</p><p>1 åˆ†é’Ÿ Load &gt; 5ï¼Œ5 åˆ†é’Ÿ Load &gt; 1ï¼Œ15 åˆ†é’Ÿ Load &lt; 1<br>çŸ­æœŸå†…ç¹å¿™ï¼Œä¸­æœŸå†…ç´§å¼ ï¼Œå¾ˆå¯èƒ½æ˜¯ä¸€ä¸ªã€Œæ‹¥å¡çš„å¼€å§‹ã€</p><p>1 åˆ†é’Ÿ Load &gt; 5ï¼Œ5 åˆ†é’Ÿ Load &gt; 5ï¼Œ15 åˆ†é’Ÿ Load &gt; 5<br>çŸ­ä¸­é•¿æœŸéƒ½ç¹å¿™ï¼Œç³»ç»Ÿã€Œæ­£åœ¨æ‹¥å¡ã€</p><p>1 åˆ†é’Ÿ Load &lt; 1ï¼Œ5 åˆ†é’Ÿ Load &gt; 1ï¼Œ15 åˆ†é’Ÿ Load &gt; 5ï¼š<br>çŸ­æœŸå†…ç©ºé—²ï¼Œä¸­é•¿æœŸç¹å¿™ï¼Œä¸ç”¨ç´§å¼ ï¼Œç³»ç»Ÿã€Œæ‹¥å¡æ­£åœ¨å¥½è½¬ã€</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Web å¼€å‘ä¼šç»å†ã€Œå¼€å‘-ä¸Šçº¿-éƒ¨ç½²ã€ä¸‰ä¸ªè¿‡ç¨‹ï¼Œéƒ¨ç½²ä¹‹åç«™ç‚¹çš„è¿è¡ŒçŠ¶æ€å¦‚ä½•å´é²œæœ‰å…³æ³¨ã€‚å¦‚æœæˆ‘ä»¬è¦ä¼°ç®—ç½‘ç«™èƒ½æ‰¿å—å¤šå¤§çš„å¹¶å‘ï¼Œä½ å¯èƒ½éœ€è¦çœŸæ­£äº†è§£ç³»ç»Ÿè´Ÿè½½ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="æŠ€æœ¯åšæ–‡" scheme="http://jartto.wang/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E6%96%87/"/>
    
    
      <category term="linux" scheme="http://jartto.wang/tags/linux/"/>
    
      <category term="load" scheme="http://jartto.wang/tags/load/"/>
    
      <category term="system" scheme="http://jartto.wang/tags/system/"/>
    
  </entry>
  
  <entry>
    <title>äººå·¥æ™ºèƒ½æ—¶ä»£ï¼ŒWeb å‰ç«¯èƒ½åšä»€ä¹ˆï¼Ÿ</title>
    <link href="http://jartto.wang/2020/01/01/web-ai/"/>
    <id>http://jartto.wang/2020/01/01/web-ai/</id>
    <published>2020-01-01T14:07:24.000Z</published>
    <updated>2020-01-05T15:42:42.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åšäº†ä¸€ä¸ªé¡¹ç›®ï¼Œé€šè¿‡çˆ¬è™«å»æŠ“å–é¡µé¢å¿«ç…§ï¼Œç„¶åå¯¹é¡µé¢å…¼å®¹æ€§è¿›è¡Œå…¨é¢æµ‹è¯•ã€‚ä½†æ˜¯é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼ŒæŠ“å–åˆ°æµ·é‡é¡µé¢ä¹‹åï¼Œéš¾é“è¿˜è¦äººå·¥å»åˆ†æå—ï¼Ÿ<br><a id="more"></a><br>ç±»ä¼¼çš„åœºæ™¯å¹¶ä¸ä¼šå°‘ï¼Œæ˜¯å¦å¯ä»¥è®©æœºå™¨å»å¸®æˆ‘ä»¬å®ç°ï¼Œæœ€ç»ˆè¾“å‡ºä¸€ä¸ªå¯é æŠ¥å‘Šï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œå¿«ç…§ç”Ÿæˆåï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å¤§é‡å¿«ç…§è¿›è¡Œåˆ†æï¼Œç»“åˆ OpenCV è·¨å¹³å°è®¡ç®—æœºè§†è§‰åº“ï¼Œå®ç°å›¾åƒå¤„ç†å’Œè®¡ç®—æœºè§†è§‰æ–¹é¢çš„æ•°æ®åˆ†æï¼Œæœ€ç»ˆè¾“å‡ºç»“æœã€‚</p><div class="alert success"><p>æˆ‘ä»¬æ€»ä¼šæ‰¾åˆ°ä¸€äº›åˆé€‚çš„åœºæ™¯ç”¨æœºå™¨æ¥ä»£æ›¿äººï¼Œè€Œ AI æ­£æ˜¯è¿™ä¸ªæ”¯ç‚¹ã€‚</p></div><p>AI å¦‚æœæ˜¯è¿™ä¸ªæ—¶ä»£çš„å¥‘æœºï¼Œé‚£ä¹ˆä½œä¸º Web å‰ç«¯ï¼Œåœ¨è¿™äººå·¥æ™ºèƒ½æ—¶ä»£ï¼Œæˆ‘ä»¬èƒ½åšä»€ä¹ˆï¼Ÿ</p><h4 id="ä¸€ã€ä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½ï¼Ÿ"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½ï¼Ÿ" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½ï¼Ÿ"></a>ä¸€ã€ä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½ï¼Ÿ</h4><p>äººå·¥æ™ºèƒ½ï¼ˆArtificial Intelligenceï¼‰ï¼Œè‹±æ–‡ç¼©å†™ä¸º AIã€‚å®ƒæ˜¯ç ”ç©¶ã€å¼€å‘ç”¨äºæ¨¡æ‹Ÿã€å»¶ä¼¸å’Œæ‰©å±•äººçš„æ™ºèƒ½çš„ç†è®ºã€æ–¹æ³•ã€æŠ€æœ¯åŠåº”ç”¨ç³»ç»Ÿçš„ä¸€é—¨æ–°çš„æŠ€æœ¯ç§‘å­¦ã€‚</p><p>1.è®¡ç®—æœºç§‘å­¦<br>äººå·¥æ™ºèƒ½æ˜¯è®¡ç®—æœºç§‘å­¦çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œå®ƒä¼å›¾äº†è§£æ™ºèƒ½çš„å®è´¨ï¼Œå¹¶ç”Ÿäº§å‡ºä¸€ç§æ–°çš„èƒ½ä»¥äººç±»æ™ºèƒ½ç›¸ä¼¼çš„æ–¹å¼åšå‡ºååº”çš„æ™ºèƒ½æœºå™¨ï¼Œè¯¥é¢†åŸŸçš„ç ”ç©¶åŒ…æ‹¬æœºå™¨äººã€è¯­è¨€è¯†åˆ«ã€å›¾åƒè¯†åˆ«ã€è‡ªç„¶è¯­è¨€å¤„ç†å’Œä¸“å®¶ç³»ç»Ÿç­‰ã€‚</p><p>2.æ™ºæ…§ã€Œå®¹å™¨ã€<br>äººå·¥æ™ºèƒ½ä»è¯ç”Ÿä»¥æ¥ï¼Œç†è®ºå’ŒæŠ€æœ¯æ—¥ç›Šæˆç†Ÿï¼Œåº”ç”¨é¢†åŸŸä¹Ÿä¸æ–­æ‰©å¤§ï¼Œå¯ä»¥è®¾æƒ³ï¼Œæœªæ¥äººå·¥æ™ºèƒ½å¸¦æ¥çš„ç§‘æŠ€äº§å“ï¼Œå°†ä¼šæ˜¯äººç±»æ™ºæ…§çš„ã€Œå®¹å™¨ã€ã€‚</p><p>3.ä¿¡æ¯åŠ å·¥<br>äººå·¥æ™ºèƒ½å¯ä»¥å¯¹äººçš„æ„è¯†ã€æ€ç»´çš„ä¿¡æ¯è¿‡ç¨‹çš„æ¨¡æ‹Ÿã€‚äººå·¥æ™ºèƒ½ä¸æ˜¯äººçš„æ™ºèƒ½ï¼Œä½†èƒ½åƒäººé‚£æ ·æ€è€ƒã€ä¹Ÿå¯èƒ½è¶…è¿‡äººçš„æ™ºèƒ½ã€‚</p><p>4.ç ”ç©¶ç›®æ ‡<br>äººå·¥æ™ºèƒ½æ˜¯åŒ…æ‹¬ååˆ†å¹¿æ³›çš„ç§‘å­¦ï¼Œå®ƒç”±ä¸åŒçš„é¢†åŸŸç»„æˆï¼Œå¦‚æœºå™¨å­¦ä¹ ï¼Œè®¡ç®—æœºè§†è§‰ç­‰ç­‰ï¼Œæ€»çš„è¯´æ¥ï¼Œäººå·¥æ™ºèƒ½ç ”ç©¶çš„ä¸€ä¸ªä¸»è¦ç›®æ ‡æ˜¯ä½¿æœºå™¨èƒ½å¤Ÿèƒœä»»ä¸€äº›é€šå¸¸éœ€è¦äººç±»æ™ºèƒ½æ‰èƒ½å®Œæˆçš„å¤æ‚å·¥ä½œã€‚</p><h4 id="äºŒã€æœ‰å“ªäº›åœºæ™¯ä¼šæ¶‰åŠåˆ°-AIï¼Ÿ"><a href="#äºŒã€æœ‰å“ªäº›åœºæ™¯ä¼šæ¶‰åŠåˆ°-AIï¼Ÿ" class="headerlink" title="äºŒã€æœ‰å“ªäº›åœºæ™¯ä¼šæ¶‰åŠåˆ° AIï¼Ÿ"></a>äºŒã€æœ‰å“ªäº›åœºæ™¯ä¼šæ¶‰åŠåˆ° AIï¼Ÿ</h4><p>å¦‚æœè¦åˆ—ä¸¾ä¸€ä¸‹æœ‰å“ªäº›åœºæ™¯ä¼šç”¨åˆ° AIï¼Œæˆ‘æƒ³å¯èƒ½ä¸ä»…ä»…æ˜¯å¦‚ä¸‹è¿™äº›ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/ai/ai.png" alt="ai"></p><p>æœºå™¨è§†è§‰ï¼ŒæŒ‡çº¹è¯†åˆ«ï¼Œäººè„¸è¯†åˆ«ï¼Œäººè„¸å¯¹æ¯”ï¼Œæ‰‹åŠ¿æ£€æµ‹ï¼Œè§†ç½‘è†œè¯†åˆ«ï¼Œè™¹è†œè¯†åˆ«ï¼ŒæŒçº¹è¯†åˆ«ï¼Œä¸“å®¶ç³»ç»Ÿï¼Œè‡ªåŠ¨è§„åˆ’ï¼Œæ™ºèƒ½æœç´¢ï¼Œå®šç†è¯æ˜ï¼Œåšå¼ˆï¼Œè‡ªåŠ¨ç¨‹åºè®¾è®¡ï¼Œæ™ºèƒ½æ§åˆ¶ï¼Œæœºå™¨äººå­¦ï¼Œè¯­è¨€å’Œå›¾åƒç†è§£ï¼Œé—ä¼ ç¼–ç¨‹ï¼Œç‰©ä½“æ£€æµ‹ï¼Œè§†é¢‘è·Ÿè¸ªç­‰ã€‚</p><div class="alert info"><p>äººå·¥æ™ºèƒ½å°±å…¶æœ¬è´¨è€Œè¨€ï¼Œæ˜¯å¯¹äººçš„æ€ç»´çš„ä¿¡æ¯è¿‡ç¨‹çš„æ¨¡æ‹Ÿã€‚</p></div><p>å¯¹äºäººçš„æ€ç»´æ¨¡æ‹Ÿå¯ä»¥ä»ä¸¤æ¡é“è·¯è¿›è¡Œï¼Œ<br>1.ç»“æ„æ¨¡æ‹Ÿï¼Œä»¿ç…§äººè„‘çš„ç»“æ„æœºåˆ¶ï¼Œåˆ¶é€ å‡ºã€Œç±»äººè„‘ã€çš„æœºå™¨ï¼›<br>2.æ˜¯åŠŸèƒ½æ¨¡æ‹Ÿï¼Œæš‚æ—¶æ’‡å¼€äººè„‘çš„å†…éƒ¨ç»“æ„ï¼Œè€Œä»å…¶åŠŸèƒ½è¿‡ç¨‹è¿›è¡Œæ¨¡æ‹Ÿã€‚<br>ç°ä»£ç”µå­è®¡ç®—æœºçš„äº§ç”Ÿä¾¿æ˜¯å¯¹äººè„‘æ€ç»´åŠŸèƒ½çš„æ¨¡æ‹Ÿï¼Œæ˜¯å¯¹äººè„‘æ€ç»´çš„ä¿¡æ¯è¿‡ç¨‹çš„æ¨¡æ‹Ÿã€‚</p><h4 id="ä¸‰ã€å¼±äººå·¥æ™ºèƒ½ï¼Œå¼ºäººå·¥æ™ºèƒ½"><a href="#ä¸‰ã€å¼±äººå·¥æ™ºèƒ½ï¼Œå¼ºäººå·¥æ™ºèƒ½" class="headerlink" title="ä¸‰ã€å¼±äººå·¥æ™ºèƒ½ï¼Œå¼ºäººå·¥æ™ºèƒ½"></a>ä¸‰ã€å¼±äººå·¥æ™ºèƒ½ï¼Œå¼ºäººå·¥æ™ºèƒ½</h4><p>å¼±äººå·¥æ™ºèƒ½å¦‚ä»Šä¸æ–­åœ°è¿…çŒ›å‘å±•ï¼Œå°¤å…¶æ˜¯ 2008 å¹´ç»æµå±æœºåï¼Œç¾æ—¥æ¬§å¸Œæœ›å€Ÿæœºå™¨äººç­‰å®ç°å†å·¥ä¸šåŒ–ï¼Œå·¥ä¸šæœºå™¨äººä»¥æ¯”ä»¥å¾€ä»»ä½•æ—¶å€™æ›´å¿«çš„é€Ÿåº¦å‘å±•ï¼Œæ›´åŠ å¸¦åŠ¨äº†å¼±äººå·¥æ™ºèƒ½å’Œç›¸å…³é¢†åŸŸäº§ä¸šçš„ä¸æ–­çªç ´ï¼Œå¾ˆå¤šå¿…é¡»ç”¨äººæ¥åšçš„å·¥ä½œå¦‚ä»Šå·²ç»èƒ½ç”¨æœºå™¨äººå®ç°ã€‚</p><div class="alert danger"><p>å¼ºäººå·¥æ™ºèƒ½åˆ™æš‚æ—¶å¤„äºç“¶é¢ˆï¼Œè¿˜éœ€è¦ç§‘å­¦å®¶ä»¬å’Œäººç±»çš„åŠªåŠ›ã€‚</p></div><p>äººå·¥æ™ºèƒ½æ˜¯ä¾èµ–æœºå™¨å­¦ä¹ çš„ï¼Œ<strong>æ•°æ®å’Œç®—æ³•æ˜¯æœºå™¨å­¦ä¹ çš„æ ¸å¿ƒ</strong>ï¼Œè€Œæ•°æ®æ›´ä¸ºé‡è¦ã€‚æŒ‰ç…§è§£å†³é—®é¢˜çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠäººå·¥æ™ºèƒ½ï¼Œåˆ†æˆä¸¤ç±»ï¼š</p><ul><li>å¼ºäººå·¥æ™ºèƒ½ï¼šæ‹¥æœ‰è‡ªæˆ‘æ„è¯†ï¼Œå…·å¤‡è§£å†³é€šç”¨é—®é¢˜çš„èƒ½åŠ›</li><li>å¼±äººå·¥æ™ºèƒ½ï¼šæ²¡æœ‰è‡ªæˆ‘æ„è¯†ï¼Œå…·å¤‡è§£å†³ç‰¹å®šé—®é¢˜çš„èƒ½åŠ›</li></ul><p>ç›®å‰ï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°çš„äººå·¥æ™ºèƒ½ï¼Œå‡ ä¹éƒ½æ˜¯å¼±äººå·¥æ™ºèƒ½ï¼Œåœ¨è§£å†³ç‰¹å®šé—®é¢˜çš„èƒ½åŠ›ä¸Šï¼Œè¶…è¶Šäº†äººç±»ã€‚</p><h4 id="å››ã€AI-å¦‚ä½•å½±å“å‰ç«¯"><a href="#å››ã€AI-å¦‚ä½•å½±å“å‰ç«¯" class="headerlink" title="å››ã€AI å¦‚ä½•å½±å“å‰ç«¯"></a>å››ã€AI å¦‚ä½•å½±å“å‰ç«¯</h4><p>1.æ•°æ®å¯è§†åŒ–ï¼Œä¾èµ– <code>D3.js</code>ï¼Œ<code>ECharts</code>ï¼Œ<code>WebGL</code><br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/ai/kael.png" alt="kael"></p><p>2.æ¨¡å‹å¯è§†åŒ–<br>ç”¨å¯è§†åŒ–çš„æ‰‹æ®µå»è§£é‡Šæ¨¡å‹ï¼Œè¾…åŠ©ç®—æ³•åŒå­¦è°ƒå‚ã€‚æœ€ç®€å•çš„ä¸€ä¸ªåº”ç”¨å‰ç«¯åŒå­¦è‚¯å®šéå¸¸ç†Ÿæ‚‰ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å›¾ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/ai/dev.png" alt="chrome-dev"></p><p>æ˜¯çš„ï¼Œæ›²çº¿å‡½æ•°å’Œæ›²ç‡æˆ‘ä»¬å¾ˆéš¾è®°ä½ï¼Œä½†æ˜¯æœ‰ç›¸åº”çš„å·¥å…·ï¼Œä¼šè®©ä¸€äº›<strong>æ•°æ®å’Œè®¡ç®—å˜å¾—ç®€å•æ˜“æ‡‚</strong>ã€‚</p><p>3.ç›¸å…³æŠ€æœ¯<br>æåˆ°äººå·¥æ™ºèƒ½ï¼Œå’Œå‰ç«¯å¯†åˆ‡ç›¸å…³çš„å‡ ä¸ª <code>JS</code> ç±»åº“æœ‰ï¼š</p><ul><li>tensorflow.js<br>åŸºäº <code>tensorflow.js Node</code> çš„ <code>tvnet</code> ç®—æ³•ï¼Œå¯ä»¥æå–è§†é¢‘ä¸­çš„ç¨ å¯†å…‰æµã€‚</li><li>deeplearning.js</li><li>kera.js</li></ul><p>é«˜æ€§èƒ½è®¡ç®—ï¼š</p><ul><li>asm.js</li><li>WebAssembly</li><li>GPU</li><li>Opencvï¼Œå‰ç«¯åš CV ç®—æ³•ï¼Œç‰©ä½“è·Ÿè¸ªã€å›¾åƒå¤„ç†ã€ç‰¹å¾æ£€æµ‹ç­‰ç­‰</li></ul><p>å¤§å®¶å¯èƒ½å‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œä¸€èˆ¬çš„ <code>tensorflow</code> æ¨¡å‹åŠ¨è¾„å‡ ç™¾å…†ï¼Œåœ¨å‰ç«¯æ€ä¹ˆè·‘å‘¢ï¼Ÿè¿™å°±ä¸å¾—ä¸æåˆ° <code>MobileNet</code>ï¼Œè¿™æ˜¯é’ˆå¯¹äºç§»åŠ¨ç«¯æ¨¡å‹æå‡ºçš„ç¥ç»ç½‘ç»œæ¶æ„ï¼Œèƒ½æå¤§åœ°å‡å°‘æ¨¡å‹å‚æ•°é‡ï¼ŒåŒç†ä¹Ÿèƒ½ç”¨åˆ°æµè§ˆå™¨ç«¯ä¸Šã€‚</p><p>æ›´å¤šç»†èŠ‚å¯ä»¥æŸ¥çœ‹è¯¥æ–‡ç« ï¼š<a href="https://www.jianshu.com/p/e5f997713a4b" target="_blank" rel="noopener">å‰ç«¯ä¸äººå·¥æ™ºèƒ½</a>ï¼Œä»‹ç»éå¸¸åˆ°ä½ã€‚</p><h4 id="äº”ã€å¦‚ä½•åšï¼Ÿ"><a href="#äº”ã€å¦‚ä½•åšï¼Ÿ" class="headerlink" title="äº”ã€å¦‚ä½•åšï¼Ÿ"></a>äº”ã€å¦‚ä½•åšï¼Ÿ</h4><p>æ—¢ç„¶å‰ç«¯å’Œäººå·¥æ™ºèƒ½æœ‰å¦‚æ­¤å¤šçš„äº¤é›†ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¯¥ä»ä½•åšèµ·å‘¢ï¼Ÿä¸è¦ç€æ€¥ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªå®Œæ•´çš„äººå·¥æ™ºèƒ½é¡¹ç›®åŒ…å«å“ªäº›å†…å®¹ã€‚<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/ai/aiweb.png" alt="aiweb"></p><p>ä¸Šå›¾ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ªå®Œæ•´çš„äººå·¥æ™ºèƒ½é¡¹ç›®æ˜¯ç”±ï¼šç®—æ³•ï¼Œæ•°æ®ï¼Œå·¥ç¨‹ä¸‰éƒ¨åˆ†æ„æˆã€‚</p><p>å·¥ç¨‹éƒ¨åˆ†æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºã€Œå¤§å‰ç«¯ã€ï¼Œä¸»è¦åŒ…å« 5 éƒ¨åˆ†ï¼š</p><ol><li>äººæœºäº¤äº’</li><li>æ•°æ®å¯è§†åŒ–</li><li>äº§å“ Web</li><li>ç®—æ³•æ‰§è¡Œ</li><li>æ¨¡å‹è®­ç»ƒ</li></ol><h4 id="å…­ã€ç®€å•åº”ç”¨"><a href="#å…­ã€ç®€å•åº”ç”¨" class="headerlink" title="å…­ã€ç®€å•åº”ç”¨"></a>å…­ã€ç®€å•åº”ç”¨</h4><p><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/ai/face.png" alt="pic"><br>1.<code>Tranck.js</code><br>å°±æ˜¯çº¯æµè§ˆå™¨çš„å›¾åƒç®—æ³•åº“ï¼Œé€šè¿‡ <code>JS</code> è®¡ç®—æ¥æ‰§è¡Œç®—æ³•é€»è¾‘</p><p>2.<code>regl-cnn</code><br>æµè§ˆå™¨ç«¯çš„æ•°å­—è¯†åˆ«ç±»åº“ï¼Œä¸ <code>track.js</code> ä¸åŒçš„æ˜¯ï¼Œå®ƒåˆ©ç”¨æµè§ˆå™¨çš„ <code>WebGL</code> æ‰æ“ä½œ <code>GPU</code>ï¼Œå®ç°äº† <code>CNN</code>ã€‚</p><p><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/ai/cnn.gif" alt="cnn"></p><p>3.<code>ConvNetJS</code><br>æµè§ˆå™¨ç«¯åšæ·±åº¦å­¦ä¹ ç®—æ³•è®­ç»ƒçš„å·¥å…·ï¼Œ<a href="https://cs.stanford.edu/people/karpathy/convnetjs/" target="_blank" rel="noopener">å®˜ç½‘åœ°å€</a></p><p>4.<code>Amazon Rekognition</code><br>åŸºäºåŒæ ·ç”± <code>Amazon</code> è®¡ç®—æœºè§†è§‰ç§‘å­¦å®¶å¼€å‘çš„æˆç†Ÿä¸”é«˜åº¦å¯æ‰©å±•çš„æ·±åº¦å­¦ä¹ æŠ€æœ¯ï¼Œæ¯å¤©èƒ½å¤Ÿåˆ†ææ•°åäº¿å¼  <code>Prime Photos</code> å›¾åƒã€‚</p><p>5.å¯¹æ¯”å­¦ä¹ ï¼š<code>Keras</code> æ­å»º <code>CNN</code>ï¼Œ<code>RNN</code> ç­‰å¸¸ç”¨ç¥ç»ç½‘ç»œ</p><p>6.æœºå™¨å­¦ä¹ ï¼š<a href="https://github.com/wepe/MachineLearning" target="_blank" rel="noopener">MachineLearning</a></p><p>æ›´å¤šå†…å®¹å¯ä»¥æŸ¥çœ‹ï¼š<br>1.<a href="http://www.bslxx.com/m/view.php?aid=1922" target="_blank" rel="noopener">æµè§ˆå™¨é‡Œè¿è¡Œçš„äººå·¥æ™ºèƒ½</a><br>2.<a href="https://yq.aliyun.com/articles/153198?t=t1" target="_blank" rel="noopener">å‰ç«¯åœ¨äººå·¥æ™ºèƒ½æ—¶ä»£èƒ½åšäº›ä»€ä¹ˆ</a></p><h4 id="ä¸ƒã€æ·±åº¦å­¦ä¹ "><a href="#ä¸ƒã€æ·±åº¦å­¦ä¹ " class="headerlink" title="ä¸ƒã€æ·±åº¦å­¦ä¹ "></a>ä¸ƒã€æ·±åº¦å­¦ä¹ </h4><p>æ·±åº¦å­¦ä¹ ï¼Œæ˜¯è‹±æ–‡ <code>Deep Learning</code> çš„ç›´è¯‘ã€‚å®ƒæ˜¯å®ç°æœºå™¨å­¦ä¹ çš„å…¶ä¸­ä¸€ç§æ–¹å¼ã€‚æœºå™¨å­¦ä¹ è¿˜åŒ…å«å…¶å®ƒå®ç°æ–¹æ¡ˆã€‚</p><p>æ·±åº¦å­¦ä¹ é‡Œï¼Œç”¨åˆ°äº†äººå·¥ç¥ç»ç½‘ç»œï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨è®¡ç®—æœºæ¨¡æ‹Ÿå¤§è„‘ç¥ç»å…ƒè¿ä½œæ¨¡å¼çš„ç®—æ³•ã€‚åŒæ—¶ï¼Œè¿™ä¸ªäººå·¥ç¥ç»ç½‘ç»œçš„éšè—å±‚æ•°é‡è¿˜å¿…é¡»è¶³å¤Ÿå¤šï¼Œæ‰èƒ½æ„æˆæ·±åº¦ç¥ç»ç½‘ç»œã€‚ç„¶åå–‚ä¹‹ä»¥å¤§é‡çš„è®­ç»ƒæ•°æ®ï¼Œå°±æ˜¯æ·±åº¦å­¦ä¹ äº†ã€‚</p><p>æ¢ä¸€ä¸ªè§’åº¦ï¼Œå¦‚æœéšè—å±‚æ•°é‡ä¸å¤šï¼Œè€Œæ˜¯æ¯ä¸ªéšè—å±‚é‡ŒåŒ…å«çš„ç¥ç»å…ƒæ•°é‡å¾ˆå¤šï¼Œåœ¨å½¢æ€ä¸Šï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªå¾€å®½åº¦å‘å±•çš„ç¥ç»ç½‘ç»œç»“æ„ã€‚è¿™æ—¶ï¼Œå¯èƒ½å°±å«å¹¿åº¦å­¦ä¹ äº†ã€‚</p><div class="alert success"><p>ç›®å‰ï¼Œæ·±åº¦å­¦ä¹ è¿˜æ˜¯ä¸»æµï¼Œå®ƒçš„è®­ç»ƒæ•ˆç‡ï¼Œä¼˜äºå¹¿åº¦å­¦ä¹ ã€‚</p></div><p>æˆ‘ä»¬å¯ä»¥ä½“éªŒè…¾è®¯çš„ä¸€ä¸ªæ·±åº¦å­¦ä¹ æ¡ˆä¾‹ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/ai/ml.png" alt="pic"></p><p>æ›´å¤šæœ‰è¶£åº”ç”¨ï¼š<br>1.<a href="https://www.jianshu.com/p/1b33e432ba0e" target="_blank" rel="noopener"><code>TensorFlowJS</code> å­¦ä¹ </a><br>2.å¦‚ä½•åˆ©ç”¨ <code>TensorFlow.js</code> éƒ¨ç½²ç®€å•çš„ <a href="https://baijiahao.baidu.com/s?id=1606694239390920783&amp;wfr=spider&amp;for=pc" target="_blank" rel="noopener"><code>AI</code> ç‰ˆã€Œä½ ç”»æˆ‘çŒœã€å›¾åƒè¯†åˆ«åº”ç”¨</a></p><h4 id="å…«ã€æ˜ç¡®å‡ ä¸ªæ¦‚å¿µ"><a href="#å…«ã€æ˜ç¡®å‡ ä¸ªæ¦‚å¿µ" class="headerlink" title="å…«ã€æ˜ç¡®å‡ ä¸ªæ¦‚å¿µ"></a>å…«ã€æ˜ç¡®å‡ ä¸ªæ¦‚å¿µ</h4><p>æœºå™¨å­¦ä¹ å¯¹æˆ‘ä»¬æ¥è¯´ç¡®å®é™Œç”Ÿï¼Œæ‰€ä»¥ä¸€å®šè¦ä»æ˜ç¡®ä¸€äº›å¸¸ç”¨çš„æ¦‚å¿µï¼Œè¿™æ ·æ‰èƒ½æå‡å­¦ä¹ çš„å…´è¶£ã€‚æˆ‘ä»¬æ¥è¯´ä¸€äº›å¯èƒ½ä¼šæ¶‰åŠåˆ°çš„å†…å®¹ï¼ˆæˆ‘ä¹Ÿæ˜¯æ­£åœ¨æ‘¸ç´¢ï¼Œç›®å‰å°±çŸ¥é“è¿™äº›ï¼Œé€ƒï½ï¼‰</p><p>1.<strong>ç²¾ç¡®ç‡</strong><br>æ˜¯é’ˆå¯¹æˆ‘ä»¬é¢„æµ‹ç»“æœè€Œè¨€çš„ï¼Œå®ƒè¡¨ç¤ºçš„æ˜¯é¢„æµ‹ä¸ºæ­£çš„æ ·æœ¬ä¸­æœ‰å¤šå°‘æ˜¯çœŸæ­£çš„æ­£æ ·æœ¬ã€‚</p><p>2.<strong>å¬å›ç‡</strong><br>æ˜¯é’ˆå¯¹æˆ‘ä»¬åŸæ¥çš„æ ·æœ¬è€Œè¨€çš„ï¼Œå®ƒè¡¨ç¤ºçš„æ˜¯æ ·æœ¬ä¸­çš„æ­£ä¾‹æœ‰å¤šå°‘è¢«é¢„æµ‹æ­£ç¡®äº†</p><p>3.<strong>ç›‘ç£å­¦ä¹ </strong><br>ç›‘ç£å­¦ä¹ æ¶‰åŠåˆ°æ ‡æ³¨æ•°æ®ï¼Œè®¡ç®—æœºå¯ä»¥ä½¿ç”¨æ‰€æä¾›çš„æ•°æ®æ¥è¯†åˆ«æ–°çš„æ ·æœ¬ã€‚<br>ç›‘ç£å­¦ä¹ çš„ä¸¤ç§ä¸»è¦ç±»å‹æ˜¯åˆ†ç±»å’Œå›å½’ã€‚åœ¨åˆ†ç±»ä¸­ï¼Œè®­ç»ƒçš„æœºå™¨å°†æŠŠä¸€ç»„æ•°æ®åˆ†æˆç‰¹å®šçš„ç±»ã€‚</p><p>4.<strong>æ— ç›‘ç£å­¦ä¹ </strong><br>åœ¨æ— ç›‘ç£å­¦ä¹ ä¸­ï¼Œæ•°æ®æ˜¯æœªæ ‡æ³¨çš„ã€‚ç”±äºç°å®ä¸­ï¼Œå¤§å¤šæ•°çš„æ•°æ®éƒ½æ˜¯æœªæ ‡æ³¨çš„ï¼Œå› æ­¤è¿™äº›ç®—æ³•ç‰¹åˆ«æœ‰ç”¨ã€‚<br>æ— ç›‘ç£å­¦ä¹ åˆ†ä¸ºèšç±»å’Œé™ç»´ã€‚</p><p>5.<strong>å¼ºåŒ–å­¦ä¹ </strong><br>å¼ºåŒ–å­¦ä¹ ä½¿ç”¨æœºå™¨çš„å†å²å’Œç»éªŒæ¥åšå‡ºå†³ç­–ã€‚å¼ºåŒ–å­¦ä¹ çš„ç»å…¸åº”ç”¨æ˜¯æ¸¸æˆã€‚ä¸ç›‘ç£å’Œæ— ç›‘ç£å­¦ä¹ ç›¸åï¼Œå¼ºåŒ–å­¦ä¹ ä¸æ³¨é‡æä¾›ã€Œæ­£ç¡®ã€çš„ç­”æ¡ˆæˆ–è¾“å‡ºã€‚</p><h4 id="ä¹ã€æœºå™¨å­¦ä¹ ç®—æ³•æœ‰å“ªäº›ï¼Ÿ"><a href="#ä¹ã€æœºå™¨å­¦ä¹ ç®—æ³•æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="ä¹ã€æœºå™¨å­¦ä¹ ç®—æ³•æœ‰å“ªäº›ï¼Ÿ"></a>ä¹ã€æœºå™¨å­¦ä¹ ç®—æ³•æœ‰å“ªäº›ï¼Ÿ</h4><p>æåˆ°æœºå™¨å­¦ä¹ ï¼Œå¤§å®¶è‚¯å®šéƒ½ä¼šè‡ªç„¶è”æƒ³åˆ°éœ€è¦å¾ˆå¼ºçš„<strong>ç®—æ³•åŠŸåº•</strong>ã€‚æ²¡é”™ï¼Œç¡®å®å¦‚æ­¤ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹ç®—æ³•æœ‰ä¸€äº›äº†è§£ã€‚</p><p>é‚£ä¹ˆ<a href="https://www.cnblogs.com/xiyushimei/p/7874019.html" target="_blank" rel="noopener">æœºå™¨å­¦ä¹ </a>ä¸»è¦æ¶‰åŠåˆ°å“ªå‡ ç±»ç®—æ³•å‘¢ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ï¼š</p><ul><li>æ¨¡å¼è¯†åˆ«</li><li>è®¡ç®—æœºè§†è§‰</li><li>æ•°æ®æŒ–æ˜</li><li>ç»Ÿè®¡å­¦ä¹ </li><li>è¯­éŸ³è¯†åˆ«</li><li>è‡ªç„¶è¯­è¨€å¤„ç†</li></ul><h4 id="ä¹ã€æœºå™¨å­¦ä¹ æ¶‰åŠå­¦ç§‘"><a href="#ä¹ã€æœºå™¨å­¦ä¹ æ¶‰åŠå­¦ç§‘" class="headerlink" title="ä¹ã€æœºå™¨å­¦ä¹ æ¶‰åŠå­¦ç§‘"></a>ä¹ã€æœºå™¨å­¦ä¹ æ¶‰åŠå­¦ç§‘</h4><div class="alert info"><p>ä¸»è¦å›´ç»•åœ¨è¿™å‡ æ–¹é¢ï¼šçº¿æ€§ä»£æ•°ã€å¾®ç§¯åˆ†ã€æ¦‚ç‡å’Œç»Ÿè®¡ã€‚</p></div><p>çº¿æ€§ä»£æ•°æ¦‚å¿µTop 3ï¼š</p><ol><li>çŸ©é˜µè¿ç®—</li><li>ç‰¹å¾å€¼/ç‰¹å¾å‘é‡</li><li>å‘é‡ç©ºé—´å’ŒèŒƒæ•°</li></ol><p>å¾®ç§¯åˆ†æ¦‚å¿µTop 3ï¼š</p><ol><li>åå¯¼æ•°</li><li>å‘é‡å€¼å‡½æ•°</li><li>æ–¹å‘æ¢¯åº¦</li></ol><p>ç»Ÿè®¡æ¦‚å¿µTop 3ï¼š</p><ol><li>è´å¶æ–¯å®šç†</li><li>ç»„åˆå­¦</li><li>æŠ½æ ·æ–¹æ³•</li></ol><h4 id="åã€è®¡ç®—æœºè§†è§‰"><a href="#åã€è®¡ç®—æœºè§†è§‰" class="headerlink" title="åã€è®¡ç®—æœºè§†è§‰"></a>åã€è®¡ç®—æœºè§†è§‰</h4><p><code>OpenCV</code> æ˜¯ä¸€ä¸ªåŸºäº <code>BSD</code> è®¸å¯ï¼ˆå¼€æºï¼‰å‘è¡Œçš„è·¨å¹³å°è®¡ç®—æœºè§†è§‰åº“ï¼Œå¯ä»¥è¿è¡Œåœ¨ <code>Linux</code>ã€<code>Windows</code>ã€<code>Android</code> å’Œ <code>Mac OS</code> æ“ä½œç³»ç»Ÿä¸Šã€‚</p><p>å®ƒè½»é‡çº§è€Œä¸”é«˜æ•ˆâ€”â€”ç”±ä¸€ç³»åˆ— <code>C</code> å‡½æ•°å’Œå°‘é‡ <code>C++</code> ç±»æ„æˆï¼ŒåŒæ—¶æä¾›äº† <code>Python</code>ã€<code>Ruby</code>ã€<code>MATLAB</code> ç­‰è¯­è¨€çš„æ¥å£ï¼Œå®ç°äº†å›¾åƒå¤„ç†å’Œè®¡ç®—æœºè§†è§‰æ–¹é¢çš„å¾ˆå¤šé€šç”¨ç®—æ³•ã€‚</p><p>åº”ç”¨é¢†åŸŸï¼š<br>1ã€äººæœºäº’åŠ¨<br>2ã€ç‰©ä½“è¯†åˆ«<br>3ã€å›¾åƒåˆ†å‰²<br>4ã€äººè„¸è¯†åˆ«<br>5ã€åŠ¨ä½œè¯†åˆ«<br>6ã€è¿åŠ¨è·Ÿè¸ª<br>7ã€æœºå™¨äºº<br>8ã€è¿åŠ¨åˆ†æ<br>9ã€æœºå™¨è§†è§‰<br>10ã€ç»“æ„åˆ†æ<br>11ã€æ±½è½¦å®‰å…¨é©¾é©¶</p><p><code>OpenCV</code> çš„åº”ç”¨é¢†åŸŸéå¸¸å¹¿æ³›ï¼ŒåŒ…æ‹¬å›¾åƒæ‹¼æ¥ã€å›¾åƒé™å™ªã€äº§å“è´¨æ£€ã€äººæœºäº¤äº’ã€äººè„¸è¯†åˆ«ã€åŠ¨ä½œè¯†åˆ«ã€åŠ¨ä½œè·Ÿè¸ªã€æ— äººé©¾é©¶ç­‰ã€‚</p><p><code>OpenCV</code> è¿˜æä¾›äº†æœºå™¨å­¦ä¹ æ¨¡å—ï¼Œä½ å¯ä»¥ä½¿ç”¨æ­£æ€è´å¶æ–¯ã€Kæœ€è¿‘é‚»ã€æ”¯æŒå‘é‡æœºã€å†³ç­–æ ‘ã€éšæœºæ£®æ—ã€äººå·¥ç¥ç»ç½‘ç»œç­‰æœºå™¨å­¦ä¹ ç®—æ³•ã€‚</p><p>è¿™é‡Œæ¨èå‡ ä¸ªç›¸å…³å­¦ä¹ ç½‘ç«™ï¼š<br>1.<a href="https://opencv.org" target="_blank" rel="noopener">å®˜ç½‘</a><br>2.<a href="http://c.biancheng.net/opencv/" target="_blank" rel="noopener">OpenCVæ•™ç¨‹</a><br>3.<a href="https://www.cnblogs.com/wangyaning/p/7854046.html" target="_blank" rel="noopener">å›¾åƒå¯¹æ¯”</a></p><h4 id="åä¸€ã€æ€»ç»“"><a href="#åä¸€ã€æ€»ç»“" class="headerlink" title="åä¸€ã€æ€»ç»“"></a>åä¸€ã€æ€»ç»“</h4><p><code>AI</code> æ¶‰åŠåˆ°å¾ˆå¤šçš„é¢†åŸŸï¼Œå¹¶ä¸æ˜¯æˆ‘ä»¬ä¸‰è¨€ä¸¤è¯­å°±èƒ½å¤Ÿè¯´çš„æ˜ç™½ã€‚è¦çœŸæ­£çš„åº”ç”¨èµ·æ¥ï¼Œè¿˜æœ‰å¾ˆå¤šçš„è·¯è¦èµ°ã€‚æˆ‘ç›¸ä¿¡ï¼Œéšç€æŠ€æœ¯çš„å‘å±•ï¼Œæ›´å¤šçš„åœºæ™¯å°†æ¥å…¥ <code>AI</code>ï¼Œè€Œ <code>Web</code> åˆ™æ˜¯å…¶ä¸­çš„ä¸€ä¸ªé‡è¦ç¯èŠ‚ã€‚åŠ ä¸Š <code>Web</code> è·¨å¹³å°ç‰¹æ€§ï¼Œä»¥åŠã€Œç®—æ³•-æ•°æ®-å·¥ç¨‹ã€çš„é©±åŠ¨ï¼Œæœªæ¥åœ¨è¯¥é¢†åŸŸä¸€å®šä¼šå¤§æ”¾å¼‚å½©ã€‚</p><p>å¾ˆå–œæ¬¢è¿™å¥è¯ï¼šAI makes life better. FE makes AI better.</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘åšäº†ä¸€ä¸ªé¡¹ç›®ï¼Œé€šè¿‡çˆ¬è™«å»æŠ“å–é¡µé¢å¿«ç…§ï¼Œç„¶åå¯¹é¡µé¢å…¼å®¹æ€§è¿›è¡Œå…¨é¢æµ‹è¯•ã€‚ä½†æ˜¯é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼ŒæŠ“å–åˆ°æµ·é‡é¡µé¢ä¹‹åï¼Œéš¾é“è¿˜è¦äººå·¥å»åˆ†æå—ï¼Ÿ&lt;br&gt;
    
    </summary>
    
    
      <category term="æŠ€æœ¯åšæ–‡" scheme="http://jartto.wang/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E6%96%87/"/>
    
    
      <category term="web" scheme="http://jartto.wang/tags/web/"/>
    
      <category term="ai" scheme="http://jartto.wang/tags/ai/"/>
    
  </entry>
  
  <entry>
    <title>CSS æ¸²æŸ“åŸç†ä»¥åŠä¼˜åŒ–ç­–ç•¥</title>
    <link href="http://jartto.wang/2019/10/23/css-theory-and-optimization/"/>
    <id>http://jartto.wang/2019/10/23/css-theory-and-optimization/</id>
    <published>2019-10-23T13:04:53.000Z</published>
    <updated>2019-11-07T08:24:53.000Z</updated>
    
    <content type="html"><![CDATA[<p>æèµ· CSS å¾ˆå¤šç«¥é‹éƒ½å¾ˆä¸å±‘ï¼Œå°¤å…¶æ˜¯çœ‹åˆ° RedMonk 2019 Programming Language Rankings çš„æ—¶å€™ï¼ŒCSS ç«Ÿç„¶æ’åˆ°äº†ç¬¬ä¸ƒä½ã€‚<br><a id="more"></a><br>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹è¿™å¼ æ’è¡Œæ¦œï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/css/rank.png" alt="Rank"></p><div class="alert info"><p>æ—¢ç„¶ CSS è¿™ä¹ˆé‡è¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬èŠ±ç‚¹æ—¶é—´æ¥ç ”ç©¶ç›¸å…³åŸç†ä¹Ÿå°±ç‰©æœ‰æ‰€å€¼äº†ã€‚</p></div><p>æœ¬èŠ‚æˆ‘ä»¬å°±æ¥è¯´è¯´ CSS <strong>æ¸²æŸ“ä»¥åŠä¼˜åŒ–</strong>ç›¸å…³çš„å†…å®¹ï¼Œä¸»è¦å›´ç»•ä»¥ä¸‹å‡ ç‚¹ï¼Œç”±æµ…å…¥æ·±ï¼Œäº†è§£æ¥é¾™å»è„‰ï¼š</p><p>1.æµè§ˆå™¨æ„æˆ<br>2.æ¸²æŸ“å¼•æ“<br>3.CSS ç‰¹æ€§<br>4.CSS è¯­æ³•è§£æè¿‡ç¨‹<br>5.CSS é€‰æ‹©å™¨æ‰§è¡Œé¡ºåº<br>6.é«˜æ•ˆçš„ ComputedStyle<br>7.CSS ä¹¦å†™é¡ºåºå¯¹æ€§èƒ½æœ‰å½±å“å—<br>8.ä¼˜åŒ–ç­–ç•¥</p><h4 id="ä¸€ã€æµè§ˆå™¨æ„æˆ"><a href="#ä¸€ã€æµè§ˆå™¨æ„æˆ" class="headerlink" title="ä¸€ã€æµè§ˆå™¨æ„æˆ"></a>ä¸€ã€æµè§ˆå™¨æ„æˆ</h4><p><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/css/browser.png" alt="Browser"></p><ul><li><p>User Interfaceï¼š<br>ç”¨æˆ·ç•Œé¢ï¼ŒåŒ…æ‹¬æµè§ˆå™¨ä¸­å¯è§çš„åœ°å€è¾“å…¥æ¡†ã€æµè§ˆå™¨å‰è¿›è¿”å›æŒ‰é’®ã€ä¹¦ç­¾ï¼Œå†å²è®°å½•ç­‰ç”¨æˆ·å¯æ“ä½œçš„åŠŸèƒ½é€‰é¡¹ã€‚</p></li><li><p>Browser engineï¼š<br>æµè§ˆå™¨å¼•æ“ï¼Œå¯ä»¥åœ¨ç”¨æˆ·ç•Œé¢å’Œæ¸²æŸ“å¼•æ“ä¹‹é—´ä¼ é€æŒ‡ä»¤æˆ–åœ¨å®¢æˆ·ç«¯æœ¬åœ°ç¼“å­˜ä¸­è¯»å†™æ•°æ®ï¼Œæ˜¯æµè§ˆå™¨å„ä¸ªéƒ¨åˆ†ä¹‹é—´ç›¸äº’é€šä¿¡çš„æ ¸å¿ƒã€‚</p></li><li><p>Rendering engineï¼š<br>æ¸²æŸ“å¼•æ“ï¼Œè§£æ DOM æ–‡æ¡£å’Œ CSS è§„åˆ™å¹¶å°†å†…å®¹æ’ç‰ˆåˆ°æµè§ˆå™¨ä¸­æ˜¾ç¤ºæœ‰æ ·å¼çš„ç•Œé¢ï¼Œä¹Ÿå°±æ˜¯æ’ç‰ˆå¼•æ“ï¼Œæˆ‘ä»¬å¸¸è¯´çš„æµè§ˆå™¨å†…æ ¸ä¸»è¦æŒ‡çš„å°±æ˜¯æ¸²æŸ“å¼•æ“ã€‚</p></li><li><p>Networkingï¼š<br>ç½‘ç»œåŠŸèƒ½æ¨¡å—ï¼Œæ˜¯æµè§ˆå™¨å¼€å¯ç½‘ç»œçº¿ç¨‹å‘é€è¯·æ±‚ä»¥åŠä¸‹è½½èµ„æºçš„æ¨¡å—ã€‚</p></li><li><p>JavaScript Interpreterï¼š<br>JS å¼•æ“ï¼Œè§£é‡Šå’Œæ‰§è¡Œ JS è„šæœ¬éƒ¨åˆ†ï¼Œä¾‹å¦‚ V8 å¼•æ“ã€‚</p></li><li><p>UI Backendï¼š<br>UI åç«¯åˆ™æ˜¯ç”¨äºç»˜åˆ¶åŸºæœ¬çš„æµè§ˆå™¨çª—å£å†…æ§ä»¶ï¼Œæ¯”å¦‚ç»„åˆé€‰æ‹©æ¡†ã€æŒ‰é’®ã€è¾“å…¥æ¡†ç­‰ã€‚</p></li><li><p>Data Persistenceï¼š<br>æ•°æ®æŒä¹…åŒ–å­˜å‚¨ï¼Œæ¶‰åŠ Cookieã€LocalStorage ç­‰ä¸€äº›å®¢æˆ·ç«¯å­˜å‚¨æŠ€æœ¯ï¼Œå¯ä»¥é€šè¿‡æµè§ˆå™¨å¼•æ“æä¾›çš„ API è¿›è¡Œè°ƒç”¨ã€‚</p></li></ul><!-- ![Render](https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/css/render.png) --><h4 id="äºŒã€æ¸²æŸ“å¼•æ“"><a href="#äºŒã€æ¸²æŸ“å¼•æ“" class="headerlink" title="äºŒã€æ¸²æŸ“å¼•æ“"></a>äºŒã€æ¸²æŸ“å¼•æ“</h4><p>æ¸²æŸ“å¼•æ“ï¼Œè§£æ <code>DOM</code> æ–‡æ¡£å’Œ <code>CSS</code> è§„åˆ™å¹¶å°†å†…å®¹æ’ç‰ˆåˆ°æµè§ˆå™¨ä¸­æ˜¾ç¤ºæœ‰æ ·å¼çš„ç•Œé¢ï¼Œä¹Ÿå°±æ˜¯æ’ç‰ˆå¼•æ“ï¼Œæˆ‘ä»¬å¸¸è¯´çš„æµè§ˆå™¨å†…æ ¸ä¸»è¦æŒ‡çš„å°±æ˜¯æ¸²æŸ“å¼•æ“ã€‚</p><p><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/css/render2.png" alt="Render2"></p><p>ä¸Šå›¾ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å…³æ³¨ä¸¤æ¡ä¸»çº¿ï¼š<br>å…¶ä¸€ï¼Œ<code>HTML Parser</code> ç”Ÿæˆçš„ <code>DOM</code> æ ‘ï¼›<br>å…¶äºŒï¼Œ<code>CSS Parser</code> ç”Ÿæˆçš„ <code>Style Rules</code> ï¼›</p><p>åœ¨è¿™ä¹‹åï¼Œ<code>DOM</code> æ ‘ä¸ <code>Style Rules</code> ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ <code>Render Tree</code> æ¸²æŸ“æ ‘ï¼Œç»“åˆ <code>Layout</code> ç»˜åˆ¶åœ¨å±å¹•ä¸Šï¼Œä»è€Œå±•ç°å‡ºæ¥ã€‚</p><h4 id="ä¸‰ã€CSS-ç‰¹æ€§"><a href="#ä¸‰ã€CSS-ç‰¹æ€§" class="headerlink" title="ä¸‰ã€CSS ç‰¹æ€§"></a>ä¸‰ã€CSS ç‰¹æ€§</h4><p>1.<strong>ä¼˜å…ˆçº§</strong>ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/css/specificity1.png" alt="specificity1"><br>!important &gt; è¡Œå†…æ ·å¼ï¼ˆæƒé‡1000ï¼‰ &gt; ID é€‰æ‹©å™¨ï¼ˆæƒé‡ 100ï¼‰ &gt; ç±»é€‰æ‹©å™¨ï¼ˆæƒé‡ 10ï¼‰ &gt; æ ‡ç­¾ï¼ˆæƒé‡1ï¼‰ &gt; é€šé…ç¬¦ &gt; ç»§æ‰¿ &gt; æµè§ˆå™¨é»˜è®¤å±æ€§</p><p>ç¤ºä¾‹ä»£ç ä¸€ï¼š<a href="https://jsfiddle.net/a5xtdoq7/1/" target="_blank" rel="noopener">https://jsfiddle.net/a5xtdoq7/1/</a><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> &gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"box"</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>Jartto's blog<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>æ ·å¼è§„åˆ™ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#box</span>&#123;<span class="attribute">color</span>: red;&#125;</span><br><span class="line"><span class="selector-class">.text</span>&#123;<span class="attribute">color</span>: yellow;&#125;</span><br></pre></td></tr></table></figure></p><p>çŒœä¸€çŒœï¼Œæ–‡æœ¬ä¼šæ˜¾ç¤ºä»€ä¹ˆé¢œè‰²ï¼Ÿå½“ä½ çŸ¥é“ ã€Œ<code>ID</code> é€‰æ‹©å™¨ &gt; ç±»é€‰æ‹©å™¨ ã€çš„æ—¶å€™ï¼Œç­”æ¡ˆä¸è¨€è‡ªæ˜ã€‚</p><p>å‡çº§ä¸€ä¸‹ï¼š<a href="https://jsfiddle.net/a5xtdoq7/3/" target="_blank" rel="noopener">https://jsfiddle.net/a5xtdoq7/3/</a><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>Jartto's blog<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>æ ·å¼è§„åˆ™ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#box</span>&#123;<span class="attribute">color</span>: red;&#125;</span><br><span class="line"><span class="selector-class">.text</span>&#123;<span class="attribute">color</span>: blue;&#125;</span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œå°±è€ƒæŸ¥åˆ°äº†è§„åˆ™ã€Œç±»é€‰æ‹©å™¨ &gt; ç»§æ‰¿ã€ï¼Œ<code>ID</code> å¯¹æ–‡æœ¬æ¥è¯´æ˜¯ç»§æ‰¿è¿‡æ¥çš„å±æ€§ï¼Œæ‰€ä»¥ä¼˜å…ˆçº§ä¸å¦‚ç›´æ¥ä½œç”¨åœ¨å…ƒç´ ä¸Šé¢çš„ç±»é€‰æ‹©å™¨ã€‚</p><p>2.<strong>ç»§æ‰¿æ€§</strong></p><ul><li>ç»§æ‰¿å¾—åˆ°çš„æ ·å¼çš„ä¼˜å…ˆçº§æ˜¯æœ€ä½çš„ï¼Œåœ¨ä»»ä½•æ—¶å€™ï¼Œåªè¦å…ƒç´ æœ¬èº«æœ‰åŒå±æ€§çš„æ ·å¼å®šä¹‰ï¼Œå°±å¯ä»¥è¦†ç›–æ‰ç»§æ‰¿å€¼ï¼›</li><li>åœ¨å­˜åœ¨å¤šä¸ªç»§æ‰¿æ ·å¼æ—¶ï¼Œå±‚çº§å…³ç³»è·ç¦»å½“å‰å…ƒç´ æœ€è¿‘çš„çˆ¶çº§å…ƒç´ çš„ç»§æ‰¿æ ·å¼ï¼Œå…·æœ‰ç›¸å¯¹æœ€é«˜çš„ä¼˜å…ˆçº§ï¼›</li></ul><p>æœ‰å“ªäº›å±æ€§æ˜¯å¯ä»¥<a href="https://m.html.cn/qa/css3/12784.html" target="_blank" rel="noopener">ç»§æ‰¿</a>çš„å‘¢ï¼Œæˆ‘ä»¬ç®€å•åˆ†ä¸€ä¸‹ç±»ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.font-family,font-size,font-weight ç­‰ f å¼€å¤´çš„ CSS æ ·å¼ï¼›</span><br><span class="line">2.text-align,text-indent ç­‰ t å¼€å¤´çš„æ ·å¼ï¼›</span><br><span class="line">3.colorï¼›</span><br></pre></td></tr></table></figure></p><p>è¯¦ç»†çš„è§„åˆ™ï¼Œè¯·çœ‹ä¸‹å›¾ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/css/inherent.png" alt="inherent"></p><p>ç¤ºä¾‹ä»£ç äºŒï¼š<a href="https://jsfiddle.net/a5xtdoq7/" target="_blank" rel="noopener">https://jsfiddle.net/a5xtdoq7/</a><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span> Jartto's blog <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>æ ·å¼è§„åˆ™å®šä¹‰å¦‚ä¸‹ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123; <span class="attribute">color </span>: red<span class="meta">!important</span>; &#125;</span><br><span class="line"><span class="selector-tag">ol</span> &#123; <span class="attribute">color </span>: green; &#125;</span><br></pre></td></tr></table></figure></p><p>å¢åŠ äº† <code>!important</code> ï¼ŒçŒœä¸€çŒœï¼Œæ–‡æœ¬æ˜¾ç¤ºä»€ä¹ˆé¢œè‰²ï¼Ÿ</p><p>3.<strong>å±‚å æ€§</strong><br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/css/specificity2.png" alt="specificity2"><br>å±‚å å°±æ˜¯æµè§ˆå™¨å¯¹å¤šä¸ªæ ·å¼æ¥æºè¿›è¡Œå åŠ ï¼Œæœ€ç»ˆç¡®å®šç»“æœçš„è¿‡ç¨‹ã€‚<code>CSS</code> ä¹‹æ‰€ä»¥æœ‰ã€Œå±‚å ã€çš„æ¦‚å¿µï¼Œæ˜¯å› ä¸ºæœ‰å¤šä¸ªæ ·å¼æ¥æºã€‚</p><p><code>CSS</code> å±‚å æ€§æ˜¯æŒ‡ <code>CSS</code> æ ·å¼åœ¨é’ˆå¯¹åŒä¸€å…ƒç´ é…ç½®åŒä¸€å±æ€§æ—¶ï¼Œ<strong>ä¾æ®å±‚å è§„åˆ™ï¼ˆæƒé‡ï¼‰æ¥å¤„ç†å†²çª</strong>ï¼Œé€‰æ‹©åº”ç”¨æƒé‡é«˜çš„ <code>CSS</code> é€‰æ‹©å™¨æ‰€æŒ‡å®šçš„å±æ€§ï¼Œä¸€èˆ¬ä¹Ÿè¢«æè¿°ä¸ºæƒé‡é«˜çš„è¦†ç›–æƒé‡ä½çš„ï¼Œå› æ­¤ä¹Ÿç§°ä½œå±‚å ã€‚</p><p>ç¤ºä¾‹ä»£ç ä¸‰ï¼š<a href="https://jsfiddle.net/a5xtdoq7/2/" target="_blank" rel="noopener">https://jsfiddle.net/a5xtdoq7/2/</a><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> &gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"two one"</span>&gt;</span>Jartto's blog<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>æ ·å¼è§„åˆ™å¦‚ä¸‹ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.one</span>&#123;<span class="attribute">color</span>: red;&#125;</span><br><span class="line"><span class="selector-class">.two</span>&#123;<span class="attribute">color</span>: blue;&#125;</span><br></pre></td></tr></table></figure></p><p>å¦‚æœä¸¤ä¸ªç±»é€‰æ‹©å™¨åŒæ—¶ä½œç”¨å‘¢ï¼Œç©¶ç«Ÿä»¥è°ä¸ºå‡†ï¼Ÿè¿™é‡Œæˆ‘ä»¬è¦è€ƒè™‘æ ·å¼è¡¨ä¸­ä¸¤ä¸ªç±»é€‰æ‹©å™¨çš„å…ˆåé¡ºåºï¼Œåé¢çš„ä¼šè¦†ç›–å‰é¢çš„ï¼Œæ‰€ä»¥æ–‡æœ¬å½“ç„¶æ˜¾ç¤ºè“è‰²äº†ã€‚</p><p>å‡çº§ä»£ç ï¼š<a href="https://jsfiddle.net/a5xtdoq7/6/" target="_blank" rel="noopener">https://jsfiddle.net/a5xtdoq7/6/</a><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Jartto's blog<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>æ ·å¼è§„åˆ™ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> <span class="selector-tag">div</span> <span class="selector-tag">div</span> &#123; <span class="attribute">color</span>: green; &#125;</span><br><span class="line"><span class="selector-tag">div</span> <span class="selector-tag">div</span> &#123; <span class="attribute">color</span>: red; &#125;</span><br><span class="line"><span class="selector-tag">div</span> &#123; <span class="attribute">color</span>: yellow; &#125;</span><br></pre></td></tr></table></figure></p><p>è¿™ä¸ªæ¯”è¾ƒç›´æ¥ï¼Œç®—ä¸€ä¸‹æƒé‡ï¼Œè°å¤§å¬è°çš„ã€‚</p><p>ç»§ç»­å‡çº§ï¼š<a href="https://jsfiddle.net/a5xtdoq7/7/" target="_blank" rel="noopener">https://jsfiddle.net/a5xtdoq7/7/</a><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box1"</span> <span class="attr">class</span>=<span class="string">"one"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box2"</span> <span class="attr">class</span>=<span class="string">"two"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box3"</span> <span class="attr">class</span>=<span class="string">"three"</span>&gt;</span> Jartto's blog <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>æ ·å¼ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.one</span> <span class="selector-class">.two</span> <span class="selector-tag">div</span> &#123; <span class="attribute">color </span>: red; &#125;</span><br><span class="line"><span class="selector-tag">div</span> <span class="selector-id">#box3</span> &#123; <span class="attribute">color </span>: yellow; &#125;</span><br><span class="line"><span class="selector-id">#box1</span> <span class="selector-tag">div</span> &#123; <span class="attribute">color </span>: blue; &#125;</span><br></pre></td></tr></table></figure></p><p>æƒé‡ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0 0 2 1</span><br><span class="line">0 1 0 1</span><br><span class="line">0 1 0 1</span><br></pre></td></tr></table></figure></p><p>éªŒè¯ä¸€ä¸‹ï¼š<a href="https://jsfiddle.net/a5xtdoq7/9/" target="_blank" rel="noopener">https://jsfiddle.net/a5xtdoq7/9/</a><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box1"</span> <span class="attr">class</span>=<span class="string">"one"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box2"</span> <span class="attr">class</span>=<span class="string">"two"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box3"</span> <span class="attr">class</span>=<span class="string">"three"</span>&gt;</span> Jartto's blog <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>æ ·å¼å¦‚ä¸‹ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.one</span> <span class="selector-class">.two</span> <span class="selector-tag">div</span> &#123; <span class="attribute">color </span>: red; &#125;</span><br><span class="line"><span class="selector-id">#box1</span> <span class="selector-tag">div</span> &#123; <span class="attribute">color </span>: blue; &#125;</span><br><span class="line"><span class="selector-tag">div</span> <span class="selector-class">.three</span> &#123; <span class="attribute">color </span>: green; &#125;</span><br></pre></td></tr></table></figure></p><p>æƒé‡ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0 0 2 1</span><br><span class="line">0 1 0 1</span><br><span class="line">0 0 1 1</span><br></pre></td></tr></table></figure></p><p>å¦‚æœä½ å¯¹ä¸Šé¢è¿™äº›é—®é¢˜éƒ½äº†å¦‚æŒ‡æŒï¼Œé‚£ä¹ˆæ­å–œä½ ï¼ŒåŸºç¡€éƒ¨åˆ†é¡ºåˆ©è¿‡å…³ï¼Œå¯ä»¥ç»§ç»­å‡çº§äº†ï¼</p><h4 id="å››ã€CSS-è¯­æ³•è§£æè¿‡ç¨‹"><a href="#å››ã€CSS-è¯­æ³•è§£æè¿‡ç¨‹" class="headerlink" title="å››ã€CSS è¯­æ³•è§£æè¿‡ç¨‹"></a>å››ã€CSS è¯­æ³•è§£æè¿‡ç¨‹</h4><p>1.æˆ‘ä»¬æ¥æŠŠ <code>CSS</code> æ‹å‡ºæ¥çœ‹ä¸€ä¸‹ï¼Œ<code>HTML Parser</code> ä¼šç”Ÿæˆ <code>DOM</code> æ ‘ï¼Œè€Œ <code>CSS Parser</code> ä¼šå°†è§£æç»“æœé™„åŠ åˆ° <code>DOM</code> æ ‘ä¸Šï¼Œå¦‚ä¸‹å›¾ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/css/render3.png" alt="render3"></p><p>2.<code>CSS</code> æœ‰è‡ªå·±çš„è§„åˆ™ï¼Œä¸€èˆ¬å¦‚ä¸‹ï¼š<br><code>WebKit</code> ä½¿ç”¨ <code>Flex</code> å’Œ <code>Bison</code> è§£æå™¨ç”Ÿæˆå™¨ï¼Œé€šè¿‡ <code>CSS</code> è¯­æ³•æ–‡ä»¶è‡ªåŠ¨åˆ›å»ºè§£æå™¨ã€‚<code>Bison</code> ä¼šåˆ›å»ºè‡ªä¸‹è€Œä¸Šçš„ç§»ä½å½’çº¦è§£æå™¨ã€‚<code>Firefox</code> ä½¿ç”¨çš„æ˜¯äººå·¥ç¼–å†™çš„è‡ªä¸Šè€Œä¸‹çš„è§£æå™¨ã€‚</p><p>è¿™ä¸¤ç§è§£æå™¨éƒ½ä¼šå°† <code>CSS</code> æ–‡ä»¶è§£ææˆ <code>StyleSheet</code> å¯¹è±¡ï¼Œä¸”æ¯ä¸ªå¯¹è±¡éƒ½åŒ…å« <code>CSS</code> è§„åˆ™ã€‚<code>CSS</code> è§„åˆ™å¯¹è±¡åˆ™åŒ…å«é€‰æ‹©å™¨å’Œå£°æ˜å¯¹è±¡ï¼Œä»¥åŠå…¶ä»–ä¸ <code>CSS</code> è¯­æ³•å¯¹åº”çš„å¯¹è±¡ã€‚</p><p><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/css/css-rule.jpg" alt="css-rule"></p><p>3.<code>CSS</code> è§£æè¿‡ç¨‹ä¼šæŒ‰ç…§ <code>Rule</code>ï¼Œ<code>Declaration</code> æ¥æ“ä½œï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/css/test_CSSOM.png" alt="CSSOM"></p><p>4.é‚£ä¹ˆä»–æ˜¯å¦‚ä½•è§£æçš„å‘¢ï¼Œæˆ‘ä»¬ä¸å¦¨æ‰“å°ä¸€ä¸‹ <code>CSS Rules</code>ï¼š<br>æ§åˆ¶å°è¾“å…¥ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">document.styleSheets[0].cssRules</span><br></pre></td></tr></table></figure></p><p><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/css/rule2.png" alt="rule2"></p><p>æ‰“å°å‡ºæ¥çš„ç»“æœå¤§è‡´åˆ†ä¸ºå‡ ç±»ï¼š</p><ul><li>cssTextï¼šå­˜å‚¨å½“å‰èŠ‚ç‚¹è§„åˆ™å­—ç¬¦ä¸²</li><li>parentRuleï¼šçˆ¶èŠ‚ç‚¹çš„è§„åˆ™</li><li>parentStyleSheetï¼šåŒ…å« cssRulesï¼ŒownerNodeï¼Œrules è§„åˆ™</li><li>â€¦</li></ul><div class="alert danger"><p>è§„åˆ™è²Œä¼¼æœ‰ç‚¹çœ‹ä¸æ‡‚ï¼Œä¸ç”¨ç€æ€¥ï¼Œæˆ‘ä»¬æ¥ç€å¾€ä¸‹çœ‹ã€‚</p></div><p>5.CSS è§£æå’Œ Webkit æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/css/webkit2.png" alt="webkit2"><br><div class="alert info"><p>CSS ä¾èµ– WebCore æ¥è§£æï¼Œè€Œ WebCore åˆæ˜¯ Webkit éå¸¸é‡è¦çš„ä¸€ä¸ªæ¨¡å—ã€‚</p></div></p><p>è¦äº†è§£ <code>WebCore</code> æ˜¯å¦‚ä½•è§£æçš„ï¼Œæˆ‘ä»¬éœ€è¦æŸ¥çœ‹<a href="https://github.com/WebKit/webkit/tree/master/Source/WebCore/css" target="_blank" rel="noopener">ç›¸å…³æºç </a>ï¼š<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">CSSRule* CSSParser::createStyleRule(CSSSelector* selector)  </span><br><span class="line">&#123;  </span><br><span class="line">    CSSStyleRule* rule = <span class="number">0</span>;  </span><br><span class="line">    <span class="keyword">if</span> (selector) &#123;  </span><br><span class="line">        rule = <span class="keyword">new</span> CSSStyleRule(styleElement);  </span><br><span class="line">        m_parsedStyleObjects.append(rule);  </span><br><span class="line">        rule-&gt;setSelector(sinkFloatingSelector(selector));  </span><br><span class="line">        rule-&gt;setDeclaration(<span class="keyword">new</span> CSSMutableStyleDeclaration(rule, parsedProperties, numParsedProperties));  </span><br><span class="line">    &#125;  </span><br><span class="line">    clearProperties();  </span><br><span class="line">    <span class="keyword">return</span> rule;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä»è¯¥å‡½æ•°çš„å®ç°å¯ä»¥å¾ˆæ¸…æ¥šçš„çœ‹åˆ°ï¼Œè§£æå™¨è¾¾åˆ°æŸæ¡ä»¶éœ€è¦åˆ›å»ºä¸€ä¸ª <code>CSSStyleRule</code> çš„æ—¶å€™å°†è°ƒç”¨è¯¥å‡½æ•°ï¼Œè¯¥å‡½æ•°çš„åŠŸèƒ½æ˜¯åˆ›å»ºä¸€ä¸ª <code>CSSStyleRule</code> ï¼Œå¹¶å°†å…¶æ·»åŠ å·²è§£æçš„æ ·å¼å¯¹è±¡åˆ—è¡¨ <code>m_parsedStyleObjects</code> ä¸­å»ï¼Œè¿™é‡Œçš„å¯¹è±¡å°±æ˜¯æŒ‡çš„ <code>Rule</code> ã€‚</p><div class="alert warning"><p>æ³¨æ„ï¼šæºç æ˜¯ä¸ºäº†å‚è€ƒç†è§£ï¼Œä¸éœ€è¦é€è¡Œé˜…è¯»ï¼</p></div><p><code>Webkit</code> ä½¿ç”¨äº†è‡ªåŠ¨ä»£ç ç”Ÿæˆå·¥å…·ç”Ÿæˆäº†ç›¸åº”çš„ä»£ç ï¼Œä¹Ÿå°±æ˜¯è¯´è¯æ³•åˆ†æå’Œè¯­æ³•åˆ†æè¿™éƒ¨åˆ†ä»£ç æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œè€Œ <code>Webkit</code> ä¸­å®ç°çš„ <code>CallBack</code> å‡½æ•°å°±æ˜¯åœ¨ <code>CSSParser</code> ä¸­ã€‚</p><p>è¿™æ—¶å€™å°±ä¸å¾—ä¸æåˆ° <code>AST</code> äº†ï¼Œæˆ‘ä»¬ç»§ç»­å‰–æã€‚</p><p>è¡¥å……é˜…è¯»ï¼š<a href="https://webkit.org/status/#?search=css" target="_blank" rel="noopener">Webkit å¯¹ CSS æ”¯æŒ</a></p><p>6.<strong>å…³äº AST</strong><br>å¦‚æœå¯¹ <code>AST</code> è¿˜ä¸äº†è§£ï¼Œè¯·ç§»æ­¥<a href="http://jartto.wang/2018/11/17/about-ast/"><code>AST</code> æŠ½è±¡è¯­æ³•æ ‘</a>ã€‚è¿™é‡Œæˆ‘ä»¬ä¸åšè¿‡å¤šè§£é‡Šï¼Œä¸»è¦å›´ç»•å¦‚ä½•è§£æè¿™ä¸€è¿‡ç¨‹å±•å¼€ï¼Œå…ˆæ¥çœ‹ä¸€å¼  <code>Babel</code> è½¬æ¢è¿‡ç¨‹å›¾ï¼š</p><p><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/css/ast1.png" alt="ast1"></p><p>æˆ‘ä»¬æ¥ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå£°æ˜ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œå¦‚ä¸‹ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> jarttoTest = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// Todo</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>é€šè¿‡<a href="https://astexplorer.net/" target="_blank" rel="noopener">åœ¨çº¿ç¼–è¯‘</a>ï¼Œç”Ÿæˆå¦‚ä¸‹ç»“æœï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/css/ast2.png" alt="ast2"></p><p>ä»<a href="http://jartto.wang/2019/10/23/css-theory-and-optimization/">ä¸Šå›¾</a>æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼šæˆ‘ä»¬çš„ç®­å¤´å‡½æ•°è¢«è§£ææˆäº†ä¸€æ®µæ ‡å‡†ä»£ç ï¼ŒåŒ…å«äº†ç±»å‹ï¼Œèµ·å§‹ä½ç½®ï¼Œç»“æŸä½ç½®ï¼Œå˜é‡å£°æ˜çš„ç±»å‹ï¼Œå˜é‡åï¼Œå‡½æ•°åï¼Œç®­å¤´å‡½æ•°è¡¨è¾¾å¼ç­‰ç­‰ã€‚</p><p>æ ‡å‡†çš„è§£æä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å…¶è¿›è¡Œä¸€äº›åŠ å·¥å’Œå¤„ç†ï¼Œä¹‹åé€šè¿‡ç›¸åº” <code>API</code> è¾“å‡ºã€‚å¾ˆå¤šåœºæ™¯éƒ½ä¼šç”¨åˆ°è¿™ä¸ªè¿‡ç¨‹ï¼Œå¦‚ï¼š</p><ul><li>JS åç¼–è¯‘ï¼Œè¯­æ³•è§£æ</li><li>Babel ç¼–è¯‘ ES6 è¯­æ³•</li><li>ä»£ç é«˜äº®</li><li>å…³é”®å­—åŒ¹é…</li><li>ä½œç”¨åŸŸåˆ¤æ–­</li><li>ä»£ç å‹ç¼©</li><li>â€¦</li></ul><p>åœºæ™¯åƒåƒä¸‡ï¼Œä½†æ˜¯éƒ½ç¦»ä¸å¼€ä¸€ä¸ªè¿‡ç¨‹ï¼Œé‚£å°±æ˜¯ï¼š<br><div class="alert info"><p>AST è½¬æ¢è¿‡ç¨‹ï¼šè§£æ - è½¬æ¢ - ç”Ÿæˆ</p></div></p><p>åˆ°è¿™é‡Œï¼Œ<code>CSS</code> å¦‚ä½•è§£æçš„æ¥é¾™å»è„‰æˆ‘ä»¬å·²ç»éå¸¸æ¸…æ¥šäº†ï¼Œå¯ä»¥å›åˆ°<a href="#">æ–‡ç« </a>å¼€å¤´çš„é‚£ä¸ªæµç¨‹å›¾äº†ï¼Œç›¸ä¿¡ä½ ä¸€å®šä¼šæœ‰å¦ä¸€ç¿»æ„Ÿæ‚Ÿã€‚</p><h4 id="äº”ã€CSS-é€‰æ‹©å™¨æ‰§è¡Œé¡ºåº"><a href="#äº”ã€CSS-é€‰æ‹©å™¨æ‰§è¡Œé¡ºåº" class="headerlink" title="äº”ã€CSS é€‰æ‹©å™¨æ‰§è¡Œé¡ºåº"></a>äº”ã€CSS é€‰æ‹©å™¨æ‰§è¡Œé¡ºåº</h4><p>æ¸²æŸ“å¼•æ“è§£æ <code>CSS</code> é€‰æ‹©å™¨æ—¶æ˜¯ä»å³å¾€å·¦è§£æï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿä¸¾ä¸ªä¾‹å­ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"jartto"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span> 111 <span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span> 222 <span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span> 333 <span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">'yellow'</span>&gt;</span> 444 <span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>æ ·å¼è§„åˆ™å¦‚ä¸‹ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &gt; <span class="selector-tag">div</span><span class="selector-class">.jartto</span> <span class="selector-tag">p</span> <span class="selector-tag">span</span><span class="selector-class">.yellow</span>&#123;</span><br><span class="line">   <span class="attribute">color</span>:yellow;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬æŒ‰ç…§ã€Œä»å·¦åˆ°å³ã€çš„æ–¹å¼è¿›è¡Œåˆ†æï¼š<br>1.å…ˆæ‰¾åˆ°æ‰€æœ‰ <code>div</code> èŠ‚ç‚¹ï¼›<br>2.åœ¨ <code>div</code> èŠ‚ç‚¹å†…æ‰¾åˆ°æ‰€æœ‰çš„å­ <code>div</code> ,å¹¶ä¸”æ˜¯ <code>class = â€œjarttoâ€</code>ï¼›<br>3.ç„¶åå†ä¾æ¬¡åŒ¹é… <code>p span.yellow</code> ç­‰æƒ…å†µï¼›<br>4.é‡åˆ°ä¸åŒ¹é…çš„æƒ…å†µï¼Œå°±å¿…é¡»å›æº¯åˆ°ä¸€å¼€å§‹æœç´¢çš„ <code>div</code> æˆ–è€… <code>p</code> èŠ‚ç‚¹ï¼Œç„¶åå»æœç´¢ä¸‹ä¸ªèŠ‚ç‚¹ï¼Œé‡å¤è¿™æ ·çš„è¿‡ç¨‹ã€‚</p><div class="alert warning"><p>æœ‰æ²¡æœ‰è§‰å¾—å¾ˆä½æ•ˆï¼Œé‚£ä¹ˆé—®é¢˜å‡ºåœ¨å“ªé‡Œï¼Ÿ</p></div><p>è¿™æ ·çš„æœç´¢è¿‡ç¨‹å¯¹äºä¸€ä¸ªåªæ˜¯åŒ¹é…å¾ˆå°‘èŠ‚ç‚¹çš„é€‰æ‹©å™¨æ¥è¯´ï¼Œæ•ˆç‡æ˜¯æä½çš„ï¼Œå› ä¸ºæˆ‘ä»¬èŠ±è´¹äº†å¤§é‡çš„æ—¶é—´åœ¨<strong>å›æº¯åŒ¹é…ä¸ç¬¦åˆè§„åˆ™çš„èŠ‚ç‚¹</strong>ã€‚</p><p>æˆ‘ä»¬ä¸å¦¨æ¢ä¸ªæ€è·¯ï¼Œè¿˜ä»¥ä¸Šé¢çš„ç¤ºä¾‹ä¸ºå‡†ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"jartto"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span> 111 <span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span> 222 <span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span> 333 <span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">'yellow'</span>&gt;</span> 444 <span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>æ ·å¼è§„åˆ™å¦‚ä¸‹ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &gt; <span class="selector-tag">div</span><span class="selector-class">.jartto</span> <span class="selector-tag">p</span> <span class="selector-tag">span</span><span class="selector-class">.yellow</span>&#123;</span><br><span class="line">   <span class="attribute">color</span>:yellow;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬æŒ‰ç…§ã€Œä»å³å‘å·¦ã€çš„æ–¹å¼è¿›è¡Œåˆ†æï¼š<br>1.é¦–å…ˆå°±æŸ¥æ‰¾åˆ° <code>class=â€œyellowâ€</code> çš„ <code>span</code> å…ƒç´ ï¼›<br>2.æ¥ç€æ£€æµ‹çˆ¶èŠ‚ç‚¹æ˜¯å¦ä¸º <code>p</code> å…ƒç´ ï¼Œå¦‚æœä¸æ˜¯åˆ™è¿›å…¥åŒçº§å…¶ä»–èŠ‚ç‚¹çš„éå†ï¼Œå¦‚æœæ˜¯åˆ™ç»§ç»­åŒ¹é…çˆ¶èŠ‚ç‚¹æ»¡è¶³ <code>class=â€œjarttoâ€</code> çš„ <code>div</code> å®¹å™¨ï¼›<br>3.è¿™æ ·å°±åˆå‡å°‘äº†é›†åˆçš„å…ƒç´ ï¼Œåªæœ‰ç¬¦åˆå½“å‰çš„å­è§„åˆ™æ‰ä¼šåŒ¹é…å†ä¸Šä¸€æ¡å­è§„åˆ™ã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼š<br><div class="alert success"><p>æµè§ˆå™¨ <code>CSS</code> åŒ¹é…æ ¸å¿ƒç®—æ³•çš„è§„åˆ™æ˜¯ä»¥ä»å³å‘å·¦æ–¹å¼åŒ¹é…èŠ‚ç‚¹çš„ã€‚</p></div></p><p>æ ·åšæ˜¯ä¸ºäº†å‡å°‘æ— æ•ˆåŒ¹é…æ¬¡æ•°ï¼Œä»è€ŒåŒ¹é…å¿«ã€æ€§èƒ½æ›´ä¼˜ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨ä¹¦å†™ <code>CSS Selector</code> æ—¶ï¼Œä»å³å‘å·¦çš„ <code>Selector Term</code> åŒ¹é…èŠ‚ç‚¹è¶Šå°‘è¶Šå¥½ã€‚</p><p>ä¸åŒ <code>CSS</code> è§£æå™¨å¯¹ <code>CSS Rules</code> è§£æé€Ÿåº¦å·®å¼‚ä¹Ÿå¾ˆå¤§ï¼Œæ„Ÿå…´è¶£çš„ç«¥é‹å¯ä»¥çœ‹çœ‹ï¼š<a href="http://test.veryos.com/selector/slickspeed/index.html" target="_blank" rel="noopener">CSS è§£æå¼•æ“</a>ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚</p><h4 id="å…­ã€é«˜æ•ˆçš„-ComputedStyle"><a href="#å…­ã€é«˜æ•ˆçš„-ComputedStyle" class="headerlink" title="å…­ã€é«˜æ•ˆçš„ ComputedStyle"></a>å…­ã€é«˜æ•ˆçš„ ComputedStyle</h4><p>æµè§ˆå™¨è¿˜æœ‰ä¸€ä¸ªéå¸¸æ£’çš„ç­–ç•¥ï¼Œåœ¨ç‰¹å®šæƒ…å†µä¸‹ï¼Œæµè§ˆå™¨ä¼šå…±äº« <code>Computed Style</code>ï¼Œç½‘é¡µä¸­èƒ½å…±äº«çš„æ ‡ç­¾éå¸¸å¤šï¼Œæ‰€ä»¥èƒ½æå¤§çš„æå‡æ‰§è¡Œæ•ˆç‡ï¼</p><div class="alert success"><p>å¦‚æœèƒ½å…±äº«ï¼Œé‚£å°±ä¸éœ€è¦æ‰§è¡ŒåŒ¹é…ç®—æ³•äº†ï¼Œæ‰§è¡Œæ•ˆç‡è‡ªç„¶éå¸¸é«˜ã€‚</p></div><p>å¦‚æœä¸¤ä¸ªæˆ–å¤šä¸ª <code>Element</code> çš„ <code>ComputedStyle</code> ä¸é€šè¿‡è®¡ç®—å¯ä»¥ç¡®è®¤ä»–ä»¬ç›¸ç­‰ï¼Œé‚£ä¹ˆè¿™äº›<code>ComputedStyle</code> ç›¸ç­‰çš„ <code>Elements</code> åªä¼šè®¡ç®—ä¸€æ¬¡æ ·å¼ï¼Œå…¶ä½™çš„ä»…ä»…å…±äº«è¯¥ <code>ComputedStyle</code>ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"one"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"desc"</span>&gt;</span>One<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"one"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"desc"</span>&gt;</span>two<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>å¦‚ä½•é«˜æ•ˆå…±äº« <code>Computed Style</code> ï¼Ÿ<br>1.<code>TagName</code> å’Œ <code>Class</code> å±æ€§å¿…é¡»ä¸€æ ·ï¼›<br>2.ä¸èƒ½æœ‰ <code>Style</code> å±æ€§ã€‚å“ªæ€• <code>Style</code> å±æ€§ç›¸ç­‰ï¼Œä»–ä»¬ä¹Ÿä¸å…±äº«ï¼›<br>3.ä¸èƒ½ä½¿ç”¨ <code>Sibling selector</code>ï¼Œè­¬å¦‚: <code>first-child</code>, <code>:last-selector</code>, <code>+ selector</code><br>4.<code>mappedAttribute</code> å¿…é¡»ç›¸ç­‰ï¼›</p><p>ä¸ºäº†æ›´å¥½çš„è¯´æ˜ï¼Œæˆ‘ä»¬å†ä¸¾ä¸¤ä¸ªä¾‹å­ï¼š</p><p>ä¸èƒ½å…±äº«ï¼Œ<a href="http://jartto.wang/2019/10/23/css-theory-and-optimization/">ä¸Šè¿°</a>è§„åˆ™2ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"color:red"</span>&gt;</span>jartto's<span class="tag">&lt;/<span class="name">p</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"color:red"</span>&gt;</span>blog<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>å¯ä»¥å…±äº«ï¼Œ<a href="http://jartto.wang/2019/10/23/css-theory-and-optimization/">ä¸Šè¿°</a>è§„åˆ™4ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">align</span>=<span class="string">"middle"</span>&gt;</span>jartto's<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">align</span>=<span class="string">"middle"</span>&gt;</span>blog<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>åˆ°è¿™é‡Œï¼Œç›¸ä¿¡ä½ å¯¹ <code>ComputedStyle</code> æœ‰äº†æ›´å¤šçš„è®¤è¯†ï¼Œä»£ç ä¹Ÿå°±æ›´åŠ ç²¾ç‚¼å’Œé«˜æ•ˆäº†ã€‚</p><h4 id="ä¸ƒã€CSS-ä¹¦å†™é¡ºåºå¯¹æ€§èƒ½æœ‰å½±å“å—ï¼Ÿ"><a href="#ä¸ƒã€CSS-ä¹¦å†™é¡ºåºå¯¹æ€§èƒ½æœ‰å½±å“å—ï¼Ÿ" class="headerlink" title="ä¸ƒã€CSS ä¹¦å†™é¡ºåºå¯¹æ€§èƒ½æœ‰å½±å“å—ï¼Ÿ"></a>ä¸ƒã€CSS ä¹¦å†™é¡ºåºå¯¹æ€§èƒ½æœ‰å½±å“å—ï¼Ÿ</h4><p>ä¹¦å†™é¡ºåºä¼šå¯¹ <code>CSS</code> æ€§èƒ½æœ‰å½±å“å—ï¼Œè¿™æ˜¯ä¸ªå€¼å¾—æ€è€ƒçš„é—®é¢˜ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šæµè§ˆå™¨å¹¶ä¸æ˜¯ä¸€è·å–åˆ° <code>CSS</code> æ ·å¼å°±ç«‹é©¬å¼€å§‹è§£æï¼Œè€Œæ˜¯æ ¹æ® <code>CSS</code> æ ·å¼çš„ä¹¦å†™é¡ºåºå°†ä¹‹æŒ‰ç…§ <code>DOM</code> æ ‘çš„ç»“æ„åˆ†å¸ƒæ¸²æŸ“æ ·å¼ï¼Œç„¶åå¼€å§‹éå†æ¯ä¸ªæ ‘ç»“ç‚¹çš„ <code>CSS</code> æ ·å¼è¿›è¡Œè§£æï¼Œæ­¤æ—¶çš„ <code>CSS</code> æ ·å¼çš„éå†é¡ºåºå®Œå…¨æ˜¯æŒ‰ç…§ä¹‹å‰çš„ä¹¦å†™é¡ºåºã€‚</p><div class="alert info"><p>åœ¨è§£æè¿‡ç¨‹ä¸­ï¼Œä¸€æ—¦æµè§ˆå™¨å‘ç°æŸä¸ªå…ƒç´ çš„å®šä½å˜åŒ–å½±å“å¸ƒå±€ï¼Œåˆ™éœ€è¦å€’å›å»é‡æ–°æ¸²æŸ“ã€‚</p></div><p>æˆ‘ä»¬æ¥çœ‹çœ‹ä¸‹é¢è¿™ä¸ªä»£ç ç‰‡æ®µï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">width: 150px;</span><br><span class="line">height: 150px;</span><br><span class="line">font-size: 24px;</span><br><span class="line">position: absolute;</span><br></pre></td></tr></table></figure></p><p>å½“æµè§ˆå™¨è§£æåˆ° <code>position</code> çš„æ—¶å€™çªç„¶å‘ç°è¯¥å…ƒç´ æ˜¯ç»å¯¹å®šä½å…ƒç´ éœ€è¦è„±ç¦»æ–‡æ¡£æµï¼Œè€Œä¹‹å‰å´æ˜¯æŒ‰ç…§æ™®é€šå…ƒç´ è¿›è¡Œè§£æçš„ï¼Œæ‰€ä»¥ä¸å¾—ä¸é‡æ–°æ¸²æŸ“ã€‚</p><p>æ¸²æŸ“å¼•æ“é¦–å…ˆè§£é™¤è¯¥å…ƒç´ åœ¨æ–‡æ¡£ä¸­æ‰€å ä½ç½®ï¼Œè¿™å°±å¯¼è‡´äº†è¯¥å…ƒç´ çš„å ä½æƒ…å†µå‘ç”Ÿäº†å˜åŒ–ï¼Œå…¶ä»–å…ƒç´ å¯èƒ½ä¼šå—åˆ°å®ƒå›æµçš„å½±å“è€Œé‡æ–°æ’ä½ã€‚</p><p>æˆ‘ä»¬å¯¹ä»£ç è¿›è¡Œè°ƒæ•´ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">position: absolute;</span><br><span class="line">width: 150px;</span><br><span class="line">height: 150px;</span><br><span class="line">font-size: 24px;</span><br></pre></td></tr></table></figure></p><p>è¿™æ ·å°±èƒ½è®©æ¸²æŸ“å¼•æ“æ›´é«˜æ•ˆçš„å·¥ä½œï¼Œå¯æ˜¯é—®é¢˜æ¥äº†ï¼š<br><div class="alert warning"><p>åœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¦‚ä½•èƒ½ä¿è¯è‡ªå·±çš„ä¹¦å†™é¡ºåºæ˜¯æœ€ä¼˜å‘¢ï¼Ÿ</p></div></p><p>è¿™é‡Œæœ‰ä¸€ä¸ªè§„èŒƒï¼Œå»ºè®®é¡ºåºå¤§è‡´å¦‚ä¸‹ï¼š<br>1.å®šä½å±æ€§<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">positionÂ  displayÂ  floatÂ  leftÂ  topÂ  rightÂ  bottomÂ  Â overflowÂ  clearÂ  Â z-index</span><br></pre></td></tr></table></figure></p><p>2.è‡ªèº«å±æ€§<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">widthÂ  heightÂ  paddingÂ  borderÂ  marginÂ  Â background</span><br></pre></td></tr></table></figure></p><p>3.æ–‡å­—æ ·å¼<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">font-familyÂ  Â font-sizeÂ  Â font-styleÂ  Â font-weightÂ  Â font-varientÂ  Â color</span><br></pre></td></tr></table></figure></p><p>4.æ–‡æœ¬å±æ€§<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">text-alignÂ  Â vertical-alignÂ  Â text-wrapÂ  Â text-transformÂ  Â text-indentÂ  Â  text-decorationÂ  Â letter-spacingÂ  Â  word-spacingÂ  Â Â white-spaceÂ  Â text-overflow</span><br></pre></td></tr></table></figure></p><p>5.CSS3ä¸­æ–°å¢å±æ€§<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">contentÂ  Â box-shadowÂ  Â border-radiusÂ  transform</span><br></pre></td></tr></table></figure></p><p>å½“ç„¶ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“è¿™ä¸ªè§„åˆ™å°±å¤Ÿäº†ï¼Œå‰©ä¸‹çš„å¯ä»¥äº¤ç»™ä¸€äº›<strong>æ’ä»¶</strong>å»åšï¼Œè­¬å¦‚ï¼š<a href="https://github.com/CSSLint/csslint" target="_blank" rel="noopener">CSSLint</a>ã€‚èƒ½ç”¨ä»£ç å®ç°çš„ï¼Œåƒä¸‡ä¸è¦å»æµªè´¹äººåŠ›ã€‚</p><h4 id="å…«ã€ä¼˜åŒ–ç­–ç•¥"><a href="#å…«ã€ä¼˜åŒ–ç­–ç•¥" class="headerlink" title="å…«ã€ä¼˜åŒ–ç­–ç•¥"></a>å…«ã€ä¼˜åŒ–ç­–ç•¥</h4><p>æˆ‘ä»¬ä»æµè§ˆå™¨æ„æˆï¼ŒèŠåˆ°äº†æ¸²æŸ“å¼•æ“ï¼Œå†åˆ° <code>CSS</code> çš„è§£æåŸç†ï¼Œæœ€ååˆ°æ‰§è¡Œé¡ºåºï¼Œåšäº†ä¸€ç³»åˆ—çš„æ¢ç´¢ã€‚æœŸæœ›å¤§å®¶èƒ½ä» <code>CSS</code> çš„æ¸²æŸ“åŸç†ä¸­äº†è§£æ•´ä¸ªè¿‡ç¨‹ï¼Œä»è€Œå†™å‡ºæ›´é«˜æ•ˆçš„ä»£ç ã€‚</p><p>1.ä½¿ç”¨ <code>id selector</code> éå¸¸çš„é«˜æ•ˆã€‚åœ¨ä½¿ç”¨ <code>id selector</code> çš„æ—¶å€™éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼šå› ä¸º <code>id</code> æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥ä¸éœ€è¦æ—¢æŒ‡å®š <code>id</code> åˆæŒ‡å®š <code>tagName</code>ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Bad  */</span></span><br><span class="line"><span class="selector-tag">p</span><span class="selector-id">#id1</span> &#123;<span class="attribute">color</span>:red;&#125;  </span><br><span class="line"></span><br><span class="line"><span class="comment">/* Good  */</span></span><br><span class="line"><span class="selector-id">#id1</span> &#123;<span class="attribute">color</span>:red;&#125;</span><br></pre></td></tr></table></figure></p><p>2.é¿å…æ·±å±‚æ¬¡çš„ <code>node</code> ï¼Œè­¬å¦‚ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Bad  */</span></span><br><span class="line"><span class="selector-tag">div</span> &gt; <span class="selector-tag">div</span> &gt; <span class="selector-tag">div</span> &gt; <span class="selector-tag">p</span> &#123;<span class="attribute">color</span>:red;&#125; </span><br><span class="line"><span class="comment">/* Good  */</span></span><br><span class="line"><span class="selector-tag">p-class</span>&#123;<span class="attribute">color</span>:red;&#125;</span><br></pre></td></tr></table></figure></p><p>3.ä¸è¦ä½¿ç”¨ <code>attribute selector</code>ï¼Œå¦‚ï¼šp[att1=â€val1â€]ã€‚è¿™æ ·çš„åŒ¹é…éå¸¸æ…¢ã€‚æ›´ä¸è¦è¿™æ ·å†™ï¼š<code>p[id=&quot;id1&quot;]</code>ã€‚è¿™æ ·å°† <code>id selector</code> é€€åŒ–æˆ <code>attribute selector</code>ã€‚<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Bad  */</span></span><br><span class="line"><span class="selector-tag">p</span><span class="selector-attr">[id="jartto"]</span>&#123;<span class="attribute">color</span>:red;&#125;  </span><br><span class="line"><span class="selector-tag">p</span><span class="selector-attr">[class="blog"]</span>&#123;<span class="attribute">color</span>:red;&#125;  </span><br><span class="line"><span class="comment">/* Good  */</span></span><br><span class="line"><span class="selector-id">#jartto</span>&#123;<span class="attribute">color</span>:red;&#125;  </span><br><span class="line"><span class="selector-class">.blog</span>&#123;<span class="attribute">color</span>:red;&#125;</span><br></pre></td></tr></table></figure></p><p>4.é€šå¸¸å°†æµè§ˆå™¨å‰ç¼€ç½®äºå‰é¢ï¼Œå°†æ ‡å‡†æ ·å¼å±æ€§ç½®äºæœ€åï¼Œç±»ä¼¼ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.foo</span> &#123;</span><br><span class="line">  <span class="attribute">-moz-border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å¯ä»¥å‚è€ƒå¦‚ä¸‹ <a href="http://nec.netease.com/standard/css-sort.html" target="_blank" rel="noopener">Css è§„èŒƒ</a>ã€‚</p><p>5.éµå®ˆ <a href="https://github.com/CSSLint/csslint" target="_blank" rel="noopener">CSSLint</a> è§„åˆ™<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">font-faces        ã€€ã€€ã€€ã€€  ã€€ã€€ã€€ä¸èƒ½ä½¿ç”¨è¶…è¿‡5ä¸ªwebå­—ä½“</span><br><span class="line">import        ã€€ã€€ã€€ã€€ã€€ã€€ã€€ ã€€ã€€  ç¦æ­¢ä½¿ç”¨@import</span><br><span class="line">regex-selectors        ã€€ã€€ã€€ã€€  ç¦æ­¢ä½¿ç”¨å±æ€§é€‰æ‹©å™¨ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼é€‰æ‹©å™¨</span><br><span class="line">universal-selector    ã€€ã€€ ã€€ã€€  ç¦æ­¢ä½¿ç”¨é€šç”¨é€‰æ‹©å™¨*</span><br><span class="line">unqualified-attributes    ã€€ã€€ã€€ç¦æ­¢ä½¿ç”¨ä¸è§„èŒƒçš„å±æ€§é€‰æ‹©å™¨</span><br><span class="line">zero-units            ã€€ã€€ ã€€ã€€ã€€0åé¢ä¸è¦åŠ å•ä½</span><br><span class="line">overqualified-elements    ã€€ã€€ã€€ä½¿ç”¨ç›¸é‚»é€‰æ‹©å™¨æ—¶ï¼Œä¸è¦ä½¿ç”¨ä¸å¿…è¦çš„é€‰æ‹©å™¨</span><br><span class="line">shorthand        ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ ç®€å†™æ ·å¼å±æ€§</span><br><span class="line">duplicate-background-images    ç›¸åŒçš„urlåœ¨æ ·å¼è¡¨ä¸­ä¸è¶…è¿‡ä¸€æ¬¡</span><br></pre></td></tr></table></figure></p><p>6.å‡å°‘ <code>CSS</code> æ–‡æ¡£ä½“ç§¯</p><ul><li>ç§»é™¤ç©ºçš„ CSS è§„åˆ™ï¼ˆRemove empty rulesï¼‰</li><li>å€¼ä¸º 0 ä¸éœ€è¦å•ä½</li><li>ä½¿ç”¨ç¼©å†™</li><li>å±æ€§å€¼ä¸ºæµ®åŠ¨å°æ•° 0.**ï¼Œå¯ä»¥çœç•¥å°æ•°ç‚¹ä¹‹å‰çš„0ï¼›</li><li>ä¸ç»™ h1-h6 å…ƒç´ å®šä¹‰è¿‡å¤šçš„æ ·å¼</li></ul><p>7.<code>CSS Will Change</code><br><code>WillChange</code> å±æ€§ï¼Œå…è®¸ä½œè€…æå‰å‘ŠçŸ¥æµè§ˆå™¨çš„é»˜è®¤æ ·å¼ï¼Œä½¿ç”¨ä¸€ä¸ªä¸“ç”¨çš„å±æ€§æ¥é€šçŸ¥æµè§ˆå™¨ç•™æ„æ¥ä¸‹æ¥çš„å˜åŒ–ï¼Œä»è€Œä¼˜åŒ–å’Œåˆ†é…å†…å­˜ã€‚</p><p>8.ä¸è¦ä½¿ç”¨ <code>@import</code><br>ä½¿ç”¨ <code>@import</code> å¼•å…¥ <code>CSS</code> ä¼šå½±å“æµè§ˆå™¨çš„å¹¶è¡Œä¸‹è½½ã€‚ä½¿ç”¨ <code>@import</code> å¼•ç”¨çš„ <code>CSS</code> æ–‡ä»¶åªæœ‰åœ¨å¼•ç”¨å®ƒçš„é‚£ä¸ª <code>CSS</code> æ–‡ä»¶è¢«ä¸‹è½½ã€è§£æä¹‹åï¼Œæµè§ˆå™¨æ‰ä¼šçŸ¥é“è¿˜æœ‰å¦å¤–ä¸€ä¸ª <code>CSS</code> éœ€è¦ä¸‹è½½ï¼Œè¿™æ—¶æ‰å»ä¸‹è½½ï¼Œç„¶åä¸‹è½½åå¼€å§‹è§£æã€æ„å»º <code>Render Tree</code> ç­‰ä¸€ç³»åˆ—æ“ä½œã€‚</p><p>å¤šä¸ª <code>@import</code> ä¼šå¯¼è‡´ä¸‹è½½é¡ºåºç´Šä¹±ã€‚åœ¨ <code>IE</code> ä¸­ï¼Œ<code>@import</code> ä¼šå¼•å‘èµ„æºæ–‡ä»¶çš„ä¸‹è½½é¡ºåºè¢«æ‰“ä¹±ï¼Œå³æ’åˆ—åœ¨ <code>@import</code> åé¢çš„ <code>JS</code> æ–‡ä»¶å…ˆäº <code>@import</code> ä¸‹è½½ï¼Œå¹¶ä¸”æ‰“ä¹±ç”šè‡³ç ´å <code>@import</code> è‡ªèº«çš„å¹¶è¡Œä¸‹è½½ã€‚</p><p>9.é¿å…è¿‡åˆ†é‡æ’ï¼ˆReflowï¼‰<br>æµè§ˆå™¨é‡æ–°è®¡ç®—å¸ƒå±€ä½ç½®ä¸å¤§å°ã€‚<br>å¸¸è§çš„é‡æ’å…ƒç´ ;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">width </span><br><span class="line">height </span><br><span class="line">padding </span><br><span class="line">margin </span><br><span class="line">display </span><br><span class="line">border-width </span><br><span class="line">border </span><br><span class="line">top </span><br><span class="line">position </span><br><span class="line">font-size </span><br><span class="line">float </span><br><span class="line">text-align </span><br><span class="line">overflow-y </span><br><span class="line">font-weight </span><br><span class="line">overflow </span><br><span class="line">left </span><br><span class="line">font-family </span><br><span class="line">line-height </span><br><span class="line">vertical-align </span><br><span class="line">right </span><br><span class="line">clear </span><br><span class="line">white-space </span><br><span class="line">bottom </span><br><span class="line">min-height</span><br></pre></td></tr></table></figure></p><p>10.é«˜æ•ˆåˆ©ç”¨ <code>computedStyle</code> </p><ul><li>å…¬å…±ç±»</li><li>æ…ç”¨ ChildSelector</li><li>å°½å¯èƒ½å…±äº«</li></ul><p>æ›´å¤šè¯·æŸ¥çœ‹ä¸Šæ–‡ï¼š<a href="http://jartto.wang/2019/10/23/css-theory-and-optimization/">é«˜æ•ˆçš„ ComputedStyle</a></p><p>11.å‡å°‘æ˜‚è´µå±æ€§ï¼š<br>å½“é¡µé¢å‘ç”Ÿé‡ç»˜æ—¶ï¼Œå®ƒä»¬ä¼šé™ä½æµè§ˆå™¨çš„æ¸²æŸ“æ€§èƒ½ã€‚æ‰€ä»¥åœ¨ç¼–å†™ <code>CSS</code> æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡å‡å°‘ä½¿ç”¨æ˜‚è´µå±æ€§ï¼Œå¦‚ï¼š</p><ul><li>box-shadow</li><li>border-radius</li><li>filter</li><li>:nth-child</li></ul><p>12.ä¾èµ–ç»§æ‰¿ã€‚å¦‚æœæŸäº›å±æ€§å¯ä»¥ç»§æ‰¿ï¼Œé‚£ä¹ˆè‡ªç„¶æ²¡æœ‰å¿…è¦åœ¨å†™ä¸€éã€‚</p><p>13.éµå®ˆ <code>CSS</code> é¡ºåºè§„åˆ™</p><p>ä¸Šé¢å°±æ˜¯å¯¹<a href="http://jartto.wang/2019/10/23/css-theory-and-optimization/">æœ¬æ–‡</a>çš„ä¸€ä¸ªæ€»ç»“ï¼Œä½ äº†è§£ <code>CSS</code> å…·ä½“çš„å®ç°åŸç†ï¼Œæ™“å¾—è§„é¿é”™è¯¯ä¹¦å†™æ–¹å¼ï¼ŒçŸ¥é“ä¸ºä»€ä¹ˆè¿™ä¹ˆä¼˜åŒ–ï¼Œè¿™å°±å¤Ÿäº†ã€‚</p><p>æ€§èƒ½ä¼˜åŒ–ï¼Œè¿›æ— æ­¢å¢ƒã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æèµ· CSS å¾ˆå¤šç«¥é‹éƒ½å¾ˆä¸å±‘ï¼Œå°¤å…¶æ˜¯çœ‹åˆ° RedMonk 2019 Programming Language Rankings çš„æ—¶å€™ï¼ŒCSS ç«Ÿç„¶æ’åˆ°äº†ç¬¬ä¸ƒä½ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="æŠ€æœ¯åšæ–‡" scheme="http://jartto.wang/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E6%96%87/"/>
    
    
      <category term="css" scheme="http://jartto.wang/tags/css/"/>
    
      <category term="optimazation" scheme="http://jartto.wang/tags/optimazation/"/>
    
      <category term="åŸç†" scheme="http://jartto.wang/tags/%E5%8E%9F%E7%90%86/"/>
    
      <category term="ä¼˜åŒ–" scheme="http://jartto.wang/tags/%E4%BC%98%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>ç½‘ç«™ä¼˜åŒ–ï¼Œè¿™äº›å·¥å…·ä½ ä¸€å®šç”¨å¾—ç€</title>
    <link href="http://jartto.wang/2019/09/08/web-optimization-tools/"/>
    <id>http://jartto.wang/2019/09/08/web-optimization-tools/</id>
    <published>2019-09-08T10:52:36.000Z</published>
    <updated>2019-09-10T08:14:33.000Z</updated>
    
    <content type="html"><![CDATA[<p>å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚åœ¨ã€Œ<a href="http://jartto.wang/2019/02/16/web-optimization/">ç½‘ç«™ä¼˜åŒ–å®æˆ˜</a>ã€ä¸­æˆ‘ä»¬æåˆ°äº†ä¸€äº›ä¼˜åŒ–çš„ç›¸å…³ç»éªŒï¼Œå¹¶æ²¡æœ‰å¯¹ä¼˜åŒ–å·¥å…·å±•å¼€è®¨è®ºï¼Œè¿™èŠ‚å°±è®©æˆ‘ä»¬ä¸€èµ·ä¸Šæ‰‹å®è·µå§ï¼<br><a id="more"></a></p><h4 id="ä¸€ã€æ¦‚è¦"><a href="#ä¸€ã€æ¦‚è¦" class="headerlink" title="ä¸€ã€æ¦‚è¦"></a>ä¸€ã€æ¦‚è¦</h4><div class="alert success"><p>å…³äºä¼˜åŒ–å·¥å…·ï¼Œæˆ‘ä»¬ä¸»è¦ä»ä¸¤æ–¹é¢è¯´èµ·ï¼šã€Œæ€§èƒ½è¯„ä¼°å·¥å…·ã€å’Œã€Œä¼˜åŒ–å·¥å…·ã€ã€‚</p></div><p>1.æ€§èƒ½è¯„ä¼°å·¥å…·</p><ul><li>Lighthouse</li><li>PageSpeed</li><li>YSlow</li></ul><p>2.ä¼˜åŒ–å·¥å…·æˆ‘ä»¬ä¸»è¦ä¾èµ–ã€ŒChrome DevToolsã€ï¼Œå¤§è‡´å¦‚ä¸‹ï¼š</p><ul><li>Network</li><li>Performance</li><li>Show Third Party Badges</li><li>Block Request URL</li><li>Coverage</li><li>DOM</li><li>Rendering</li><li>Layer</li></ul><h4 id="äºŒã€Lighthouse"><a href="#äºŒã€Lighthouse" class="headerlink" title="äºŒã€Lighthouse"></a>äºŒã€Lighthouse</h4><p>1.<code>Lighthouse</code> å®‰è£…<br><code>Chrome Setting</code> - æ›´å¤šå·¥å…· - æ‰©å±•ç¨‹åº - æ‰“å¼€ <code>Chrome</code> ç½‘ä¸Šåº”ç”¨åº— - <code>Lighthouse</code></p><p>2.æ’ä»¶ - ç”ŸæˆæŠ¥å‘Š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/optimization-tools/lighthouse.png" alt="lighthouse"></p><div class="alert success"><p>æŠ¥å‘Šæ˜¯æˆ‘ä»¬çš„ä¸€ä¸ªé‡è¦å‚è€ƒæŒ‡æ ‡ï¼Œè¿™æ˜¯ç½‘ç«™è¯„ä¼°çš„é€šç”¨æ–¹æ³•ã€‚</p></div><p>å½“ç„¶ï¼Œç½‘ç«™ä¹Ÿä¼šæœ‰ä¸åŒçš„ç±»åˆ«ï¼Œ<strong>å…³æ³¨æŒ‡æ ‡</strong>ä¹Ÿä¸å°½ç›¸åŒï¼Œåç»­æˆ‘ä»¬ä¼šç»§ç»­æ¢è®¨ã€Œå¦‚ä½•åˆ¶å®šåˆç†çš„ç½‘ç«™ä¼˜åŒ–æ€§èƒ½æŒ‡æ ‡ã€ã€‚</p><p>3.ä¼˜åŒ–å»ºè®®<br><code>Lighthouse</code> æ¯”è¾ƒäººæ€§åŒ–çš„ç‚¹åœ¨äºä»–æ—¢æå‡ºäº†é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿæå‡ºäº†è§£å†³å»ºè®®ã€‚<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/optimization-tools/performance.png" alt="performance"></p><h4 id="ä¸‰ã€PageSpeed"><a href="#ä¸‰ã€PageSpeed" class="headerlink" title="ä¸‰ã€PageSpeed"></a>ä¸‰ã€PageSpeed</h4><p>1.ä½¿ç”¨ <code>PageSpeed</code><br>æˆ‘ä»¬å¯ä»¥åœ¨ã€ŒChrome DevToolsã€èœå•æ ä¸­æ‰¾åˆ°å¹¶æ‰“å¼€ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/optimization-tools/pagespeed.png" alt="pagespeed"></p><p>2.åˆ†ææŠ¥å‘Š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/optimization-tools/pagescore.png" alt="pagescore"></p><h4 id="å››ã€Chrome-DevTools-Network"><a href="#å››ã€Chrome-DevTools-Network" class="headerlink" title="å››ã€Chrome DevTools - Network"></a>å››ã€Chrome DevTools - Network</h4><p>1.å…³äº <code>Network</code> æˆ‘ä»¬é‡ç‚¹å…³æ³¨æ ‡æ³¨çš„ 3 å¤„<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/optimization-tools/network.png" alt="network"></p><p>2.<code>Timing</code> ä¹Ÿæ˜¯ä¼˜åŒ–ä¸å¯ç¼ºå°‘çš„å·¥å…·ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/optimization-tools/network1.png" alt="network1"></p><p>è¡¥å……è¯´æ˜ä¸€ä¸‹ï¼š<br><code>TTFB</code>ï¼šç­‰å¾…åˆå§‹å“åº”æ‰€ç”¨çš„æ—¶é—´ï¼Œä¹Ÿç§°ä¸ºç¬¬ä¸€å­—èŠ‚çš„æ—¶é—´ï¼Œè¿™æ˜¯æˆ‘ä»¬åˆ¤æ–­æœåŠ¡å™¨ä»¥åŠç½‘ç»œçŠ¶å†µçš„é‡è¦æŒ‡æ ‡ã€‚</p><div class="alert info"><p>æ­¤æ—¶é—´å°†æ•æ‰åˆ°æœåŠ¡å™¨å¾€è¿”çš„å»¶è¿Ÿæ—¶é—´ï¼Œä»¥åŠç­‰å¾…æœåŠ¡å™¨ä¼ é€å“åº”æ‰€ç”¨çš„æ—¶é—´ã€‚</p></div><h4 id="äº”ã€Chrome-DevTools-Performance"><a href="#äº”ã€Chrome-DevTools-Performance" class="headerlink" title="äº”ã€Chrome DevTools - Performance"></a>äº”ã€Chrome DevTools - Performance</h4><p>1.æ¦‚è§ˆ<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/optimization-tools/perf.png" alt="perf"></p><p>2.ç‰ˆé¢ä¸»è¦ç”± 4 éƒ¨åˆ†æ„æˆ</p><ul><li>æ§åˆ¶é¢æ¿ï¼šå½•åˆ¶ï¼Œæ¸…é™¤ï¼Œé…ç½®è®°å½•æœŸé—´éœ€è¦æ•è·çš„ä¿¡æ¯</li><li><code>Overview</code>ï¼šé¡µé¢æ€§èƒ½çš„é«˜çº§æ±‡æ€»ï¼Œä»¥åŠé¡µé¢åŠ è½½æƒ…å†µ</li><li>ç«ç„°å›¾ï¼š<code>CPU</code> å †å è¿½è¸ªçš„å¯è§†åŒ–</li><li>æ€»è§ˆï¼šé¥¼å›¾è®°å½•å„éƒ¨åˆ†è€—æ—¶æƒ…å†µ</li></ul><p>3.Overview è¯¦è§£</p><ul><li><p>FPS<br>æ¯ç§’å¸§æ•°ã€‚ç»¿è‰²ç«–çº¿è¶Šé«˜ï¼Œ<code>FPS</code> è¶Šé«˜ã€‚ <code>FPS</code> å›¾è¡¨ä¸Šçš„çº¢è‰²å—è¡¨ç¤ºé•¿æ—¶é—´å¸§ï¼Œå¾ˆå¯èƒ½ä¼šå‡ºç°å¡é¡¿ã€‚</p></li><li><p>CPU<br><code>CPU</code> èµ„æºã€‚æ­¤é¢ç§¯å›¾æŒ‡ç¤ºæ¶ˆè€— <code>CPU</code> èµ„æºçš„äº‹ä»¶ç±»å‹ã€‚</p></li><li><p>NET<br>æ¯æ¡å½©è‰²æ¨ªæ è¡¨ç¤ºä¸€ç§èµ„æºã€‚æ¨ªæ è¶Šé•¿ï¼Œæ£€ç´¢èµ„æºæ‰€éœ€çš„æ—¶é—´è¶Šé•¿ã€‚<br>æ¯ä¸ªæ¨ªæ çš„æµ…è‰²éƒ¨åˆ†è¡¨ç¤ºç­‰å¾…æ—¶é—´ï¼ˆä»è¯·æ±‚èµ„æºåˆ°ç¬¬ä¸€ä¸ªå­—èŠ‚ä¸‹è½½å®Œæˆçš„æ—¶é—´ï¼‰ã€‚<br>æ·±è‰²éƒ¨åˆ†è¡¨ç¤ºä¼ è¾“æ—¶é—´ï¼ˆä¸‹è½½ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå­—èŠ‚ä¹‹é—´çš„æ—¶é—´ï¼‰ã€‚</p></li></ul><div class="alert danger"><p>éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œ<code>Performance</code> å·¥å…·ä¸­çš„æ¯ä¸€ç§é¢œè‰²å…¶å®éƒ½æœ‰è‡ªå·±çš„å«ä¹‰ã€‚</p></div><ul><li>HTML æ–‡ä»¶ä¸ºè“è‰²ã€‚</li><li>è„šæœ¬ä¸ºé»„è‰²ã€‚</li><li>æ ·å¼è¡¨ä¸ºç´«è‰²ã€‚</li><li>åª’ä½“æ–‡ä»¶ä¸ºç»¿è‰²ã€‚</li><li>å…¶ä»–èµ„æºä¸ºç°è‰²ã€‚</li></ul><p>å°æŠ€å·§ï¼š<br><div class="alert info"><p>ä½¿ç”¨æ— ç—•æ¨¡å¼ï¼Œå‡å°‘ Chrome æ‰©å±•ç¨‹åºä¼šç»™åº”ç”¨çš„å¹²æ‰°ã€‚</p></div></p><p>4.ç«ç„°å›¾</p><ul><li><p>Network<br><code>Network</code> è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥ï¼Œæˆ‘ä»¬èµ„æºåŠ è½½çš„ä¸€ä¸ªé¡ºåºæƒ…å†µã€‚ä»€ä¹ˆæ—¶é—´åŠ è½½äº†ä»€ä¹ˆèµ„æºï¼Œé€šè¿‡è¿™äº›ï¼Œæˆ‘ä»¬æ›´ç›´è§‚çš„çŸ¥é“èµ„æºæ˜¯å¦å¹¶è¡ŒåŠ è½½ã€‚</p></li><li><p>Frames<br><a href="http://jartto.wang/2019/09/08/web-optimization-tools/">ä¸Šæ–‡</a>æåŠåˆ°çš„é¡µé¢å¸§æƒ…å†µã€‚</p></li><li><p>Interactions</p></li><li><p>Timings ä¸­å¦‚ä¸‹ 5 ä¸ªæŒ‡æ ‡æ˜¯æˆ‘ä»¬ä¼˜åŒ–çš„æ–¹å‘      </p><ul><li>First Paint</li><li>DOMContentLoaded Event</li><li>Onload Event</li><li>First Contentful Paint</li><li>First Meaningful Paint</li></ul></li><li><p>Mainï¼šå±•ç¤ºäº†ä¸»çº¿ç¨‹è¿è¡ŒçŠ¶å†µã€‚<br><code>X</code> è½´ä»£è¡¨ç€æ—¶é—´ï¼Œæ¯ä¸ªé•¿æ¡ä»£è¡¨ç€ä¸€ä¸ª <code>event</code>ã€‚é•¿æ¡è¶Šé•¿å°±ä»£è¡¨è¿™ä¸ª <code>event</code> èŠ±è´¹çš„æ—¶é—´è¶Šé•¿ã€‚<br><code>Y</code> è½´ä»£è¡¨äº†è°ƒç”¨æ ˆ <code>call stack</code> ã€‚</p></li></ul><p>åœ¨æ ˆé‡Œï¼Œä¸Šé¢çš„ <code>event</code> è°ƒç”¨äº†ä¸‹é¢çš„ <code>event</code>ã€‚</p><p><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/optimization-tools/perf1.png" alt="perf1"></p><p>æ³¨æ„çº¢è‰²è­¦å‘Šï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/optimization-tools/perf2.png" alt="perf2"></p><ul><li>JS Heap<br><code>JavaScript</code> è¿è¡Œè¿‡ç¨‹ä¸­çš„å¤§éƒ¨åˆ†æ•°æ®éƒ½ä¿å­˜åœ¨å † <code>Heap</code> ä¸­ï¼Œæ‰€ä»¥ <code>JavaScript</code> æ€§èƒ½åˆ†æå¦ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„æ–¹é¢æ˜¯<strong>å†…å­˜</strong>ï¼Œä¹Ÿå°±æ˜¯<strong>å †çš„åˆ†æ</strong>ã€‚</li></ul><p><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/optimization-tools/perf3.png" alt="perf3"></p><ul><li>æ‰“å¼€ Performance ç›‘è§†å™¨</li></ul><p><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/optimization-tools/perf4.png" alt="perf4"></p><h4 id="å…­ã€Chrome-DevTools-Show-Third-Party-Badges"><a href="#å…­ã€Chrome-DevTools-Show-Third-Party-Badges" class="headerlink" title="å…­ã€Chrome DevTools - Show Third Party Badges"></a>å…­ã€Chrome DevTools - Show Third Party Badges</h4><p>å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå¹¶ä¸æ˜¯æˆ‘ä»¬ç½‘ç«™æœ¬èº«çš„é—®é¢˜ï¼Œæœ‰å¯èƒ½ä½ ä½¿ç”¨çš„ä¸‰æ–¹èµ„æºæ‹–ç´¯äº†ç«™ç‚¹æ€§èƒ½ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>Show Third Party Badges</code> æ¥è¿›è¡Œæ’æŸ¥ã€‚</p><p>1.æµ‹è¯•ç«™ç‚¹ï¼š<a href="https://techcrunch.com/" target="_blank" rel="noopener">https://techcrunch.com/</a></p><p>2.æ‰“å¼€æ§åˆ¶é¢æ¿ï¼š<code>Command + Shift + P</code><br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/optimization-tools/badge.png" alt="badge"></p><p>3.æ‰“å¼€ <code>Network</code>ï¼Œæ³¨æ„èµ„æºå‰é¢çš„<strong>å½©è‰²æ ‡å¿—</strong><br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/optimization-tools/badge1.png" alt="badge1"></p><div class="alert success"><p>ä¸‰æ–¹èµ„æºéƒ½è¢«æ ‡è®°å‡ºæ¥äº†ï¼Œç§»é™¤æˆ–è€…æ›¿æ¢é‚£äº›å½±å“æ€§èƒ½çš„ä¸œè¥¿ã€‚</p></div><h4 id="ä¸ƒã€Chrome-DevTools-Block-Request-URL"><a href="#ä¸ƒã€Chrome-DevTools-Block-Request-URL" class="headerlink" title="ä¸ƒã€Chrome DevTools - Block Request URL"></a>ä¸ƒã€Chrome DevTools - Block Request URL</h4><p>å¯¹äºé¡¹ç›®ä¸­ä¸ç¡®å®šæ˜¯å¦æœ‰ç”¨çš„èµ„æºï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>Block Request URL</code> æ¥æ’é™¤ã€‚</p><p>1.é€‰ä¸­èµ„æº - å³é”® - <code>Block Request URL</code><br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/optimization-tools/block.png" alt="block"></p><div class="alert info"><p>é˜»æ­¢æŸäº›èµ„æºåŠ è½½ï¼Œ<strong>æ§åˆ¶å˜é‡æ³•</strong>æ¥æ’æŸ¥é¡µé¢æ€§èƒ½é—®é¢˜ã€‚</p></div><h4 id="å…«ã€Chrome-DevTools-Coverage"><a href="#å…«ã€Chrome-DevTools-Coverage" class="headerlink" title="å…«ã€Chrome DevTools - Coverage"></a>å…«ã€Chrome DevTools - Coverage</h4><p>1.æ‰“å¼€æ§åˆ¶é¢æ¿ï¼š<code>Command + Shift + P</code></p><p>2.è¾“å…¥ï¼š<code>Show Coverage</code><br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/optimization-tools/corvage.png" alt="corvage"></p><p>3.æ‰¾åˆ°ç›¸åº”çš„æ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°æ–‡ä»¶å·¦ä¾§å·²ç»æ ‡<strong>è®°å‡ºäº†éƒ¨åˆ†ä»£ç çš„ä½¿ç”¨æƒ…å†µ</strong><br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/optimization-tools/coverage.png" alt="coverage"></p><p>è§£å†³æ€è·¯ä¹Ÿå¾ˆç®€å•ï¼š<br>å°½å¯èƒ½å»é€šè¿‡ <code>Webpack</code> æ¥<a href="http://jartto.wang/2019/02/16/web-optimization/">æ‹†åŒ…</a>ï¼Œæ§åˆ¶å¤§å°åœ¨ <code>40KB</code> ä»¥ä¸‹ï¼Œç§»é™¤é‚£äº›æœªä½¿ç”¨ä»£ç ã€‚</p><h4 id="ä¹ã€Chrome-DevTools-DOM"><a href="#ä¹ã€Chrome-DevTools-DOM" class="headerlink" title="ä¹ã€Chrome DevTools - DOM"></a>ä¹ã€Chrome DevTools - DOM</h4><p>æˆ‘ä»¬ç»å¸¸æåˆ°è¦ä¼˜åŒ– <code>Dom</code>ï¼Œé‚£ä¹ˆèŠ‚ç‚¹æ§åˆ¶åœ¨ä»€ä¹ˆèŒƒå›´æ‰åˆç†å‘¢ï¼Ÿ</p><ul><li>æ€»å…±å°‘äº 1500 ä¸ªèŠ‚ç‚¹</li><li>æœ€å¤§æ·±åº¦ä¸º 32 ä¸ªèŠ‚ç‚¹</li><li>ä¸è¦å­˜åœ¨å­èŠ‚ç‚¹è¶…è¿‡ 60 ä¸ªèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹</li></ul><p>æŸ¥çœ‹æ‰€æœ‰ <code>DOM</code> èŠ‚ç‚¹æ•°ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.querySelectorAll(<span class="string">'*'</span>).length</span><br></pre></td></tr></table></figure></p><p>æŸ¥çœ‹å­å…ƒç´ ä¸ªæ•°ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.querySelectorAll(<span class="string">'body &gt; *'</span>).length</span><br></pre></td></tr></table></figure></p><div class="alert danger"><p>é€šå¸¸ï¼Œåªåœ¨éœ€è¦æ—¶æŸ¥æ‰¾åˆ›å»º DOM èŠ‚ç‚¹çš„æ–¹æ³•ï¼Œå¹¶åœ¨ä¸å†éœ€è¦æ—¶<strong>é”€æ¯</strong>å®ƒä»¬ã€‚</p></div><h4 id="åã€Chrome-DevTools-Rendering"><a href="#åã€Chrome-DevTools-Rendering" class="headerlink" title="åã€Chrome DevTools - Rendering"></a>åã€Chrome DevTools - Rendering</h4><p>å…³äºé‡æ¸²å¯¹é¡µé¢çš„å½±å“ï¼Œæˆ‘ä»¬å°±ä¸å¤šè¯´äº†ã€‚é‚£ä¹ˆå¦‚ä½•çŸ¥é“<strong>é¡µé¢çš„æ¸²æŸ“</strong>è¿‡ç¨‹å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>Rendering</code> æ¥å¯è§†åŒ–æŸ¥çœ‹ã€‚</p><p>1.æ‰“å¼€ Rendering é€‰é¡¹<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/optimization-tools/render.png" alt="render"></p><p>2.åˆ·æ–°é¡µé¢<br><div class="alert warning"><p>ç»¿è‰²åŒºåŸŸè¶Šé‡ï¼Œè¯´æ˜é‡å¤æ¸²æŸ“çš„æ¬¡æ•°è¶Šå¤šï¼Œé€šè¿‡ä¼˜åŒ– DOM æ¥å‡å°‘æ— æ•ˆæ¸²æŸ“ã€‚</p></div></p><p><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/optimization-tools/render.gif" alt="render"></p><h4 id="åä¸€ã€Chrome-DevTools-Layer"><a href="#åä¸€ã€Chrome-DevTools-Layer" class="headerlink" title="åä¸€ã€Chrome DevTools - Layer"></a>åä¸€ã€Chrome DevTools - Layer</h4><p>ä½ å¯èƒ½ä¼šå¾ˆå¥½å¥‡ï¼Œä¸ºä»€ä¹ˆè¦æŸ¥çœ‹å›¾å±‚ï¼Ÿ<br><div class="alert info"><p>è¿™æ˜¯å› ä¸ºï¼Œæˆ‘ä»¬ç»å¸¸ä¼šåœ¨ä¸çŸ¥ä¸è§‰çš„æƒ…å†µä¸‹æä¹±äº†å›¾å±‚å…³ç³»ï¼Œæˆ–è€…å¢åŠ äº†ä¸åˆé€‚çš„å›¾å±‚ã€‚</p></div></p><p>1.æ‰“å¼€æ§åˆ¶é¢æ¿ï¼š<code>Command + Shift + P</code><br>2.é€‰æ‹© <code>Layer</code> é€‰é¡¹<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/optimization-tools/layer.png" alt="layer"></p><p>æ˜¯ä¸æ˜¯å›¾å±‚é—®é¢˜å°±æ¸…æ¸…æ¥šæ¥šçš„æ‘†åœ¨çœ¼å‰äº†ï½</p><h4 id="åäºŒã€æ€»ç»“"><a href="#åäºŒã€æ€»ç»“" class="headerlink" title="åäºŒã€æ€»ç»“"></a>åäºŒã€æ€»ç»“</h4><p>é€šè¿‡ä¼˜åŒ–å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥è½»è€Œæ˜“ä¸¾çš„å¯¹ç½‘ç«™è¿›è¡Œå®šä½åˆ†æã€‚ä¹‹åå°±å¯ä»¥å¿«é€Ÿå±•å¼€ä¼˜åŒ–ï¼Œè®©ç½‘ç«™é«˜æ€§èƒ½çš„è¿è½¬èµ·æ¥ã€‚ä¼˜åŒ–ï¼Œä¹Ÿä¸è¿‡å¦‚æ­¤ã€‚</p><p>åç»­æˆ‘ä»¬ä¼šæ·±å…¥äº†è§£ä¸€äº›ä¼˜åŒ–ç›¸å…³çš„åŸç†ç»†èŠ‚ï¼Œå¦‚æœä½ æœ‰ä¼˜åŒ–ç›¸å…³çš„é—®é¢˜ï¼Œæ¬¢è¿ä¸€èµ·æ¢è®¨ï¼Œä¸€èµ·è¿›æ­¥ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚åœ¨ã€Œ&lt;a href=&quot;http://jartto.wang/2019/02/16/web-optimization/&quot;&gt;ç½‘ç«™ä¼˜åŒ–å®æˆ˜&lt;/a&gt;ã€ä¸­æˆ‘ä»¬æåˆ°äº†ä¸€äº›ä¼˜åŒ–çš„ç›¸å…³ç»éªŒï¼Œå¹¶æ²¡æœ‰å¯¹ä¼˜åŒ–å·¥å…·å±•å¼€è®¨è®ºï¼Œè¿™èŠ‚å°±è®©æˆ‘ä»¬ä¸€èµ·ä¸Šæ‰‹å®è·µå§ï¼&lt;br&gt;
    
    </summary>
    
    
      <category term="æŠ€æœ¯åšæ–‡" scheme="http://jartto.wang/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E6%96%87/"/>
    
    
      <category term="web" scheme="http://jartto.wang/tags/web/"/>
    
      <category term="optimization" scheme="http://jartto.wang/tags/optimization/"/>
    
      <category term="tools" scheme="http://jartto.wang/tags/tools/"/>
    
  </entry>
  
  <entry>
    <title>ç¨‹åºå‘˜å¦‚ä½•å‡å°‘å¼€å‘ä¸­çš„ Bugï¼Ÿ</title>
    <link href="http://jartto.wang/2019/08/24/how-to-decrease-bugs/"/>
    <id>http://jartto.wang/2019/08/24/how-to-decrease-bugs/</id>
    <published>2019-08-24T03:35:27.000Z</published>
    <updated>2019-08-24T06:56:26.000Z</updated>
    
    <content type="html"><![CDATA[<p>å‘¨ä¼šä¸Šå¤§å®¶æŠ›å‡ºäº†ä¸€ä¸ªé—®é¢˜ï¼Œç¨‹åºå‘˜å¦‚ä½•å‡å°‘å¼€å‘ä¸­çš„ Bugï¼Ÿå¾ˆæœ‰æ„æ€çš„ä¸€ä¸ªè¯é¢˜ï¼Œæœ¬ç¯‡æ–‡ç« æˆ‘ä»¬æ¥è¿›è¡Œæ¢è®¨ä¸æ€»ç»“ã€‚<br><a id="more"></a></p><h4 id="ä¸€ã€æ¦‚è¿°"><a href="#ä¸€ã€æ¦‚è¿°" class="headerlink" title="ä¸€ã€æ¦‚è¿°"></a>ä¸€ã€æ¦‚è¿°</h4><p>çˆ±å› æ–¯å¦æ›¾ç»è¯´è¿‡ï¼šã€Œå¦‚æœç»™æˆ‘ä¸€ä¸ªå°æ—¶è§£ç­”ä¸€é“å†³å®šæˆ‘ç”Ÿæ­»çš„é—®é¢˜ï¼Œæˆ‘ä¼šèŠ±55åˆ†é’Ÿæ¥å¼„æ¸…æ¥šè¿™é“é¢˜åˆ°åº•æ˜¯åœ¨é—®ä»€ä¹ˆã€‚ä¸€æ—¦æ¸…æ¥šäº†å®ƒåœ¨é—®ä»€ä¹ˆï¼Œå‰©ä¸‹çš„5åˆ†é’Ÿè¶³å¤Ÿè§£ç­”è¿™ä¸ªé—®é¢˜ã€‚ã€</p><p>è™½ç„¶æˆ‘ä»¬è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸ä¼šé¢ä¸´ç”Ÿæ­»çš„æŠ‰æ‹©ï¼Œä½†æ˜¯å´ç›´æ¥å½±å“ç€ç”¨æˆ·çš„<strong>ä½¿ç”¨æ„Ÿå—</strong>ï¼Œå†³å®šç€äº§å“çš„èµ°å‘ã€‚æ‰€ä»¥ç¨‹åºå‘˜å¦‚ä½•å‡å°‘å¼€å‘ä¸­çš„ Bugï¼Œæ—¢åæ˜ äº†<strong>ä»£ç è´¨é‡</strong>ï¼Œä¹Ÿåæ˜ äº†ä¸ª<strong>äººç»¼åˆèƒ½åŠ›</strong>ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬è¯¥å¦‚ä½•æœ‰æ•ˆçš„å‡å°‘å¼€å‘ä¸­çš„ Bug å‘¢ï¼Ÿ</p><div class="alert info"><p>æˆ‘è§‰å¾—åº”è¯¥ä»ä¸¤æ–¹é¢è¯´èµ·ï¼šä¸šåŠ¡å±‚å’Œä»£ç å±‚ã€‚</p></div><h4 id="äºŒã€ä¸šåŠ¡å±‚"><a href="#äºŒã€ä¸šåŠ¡å±‚" class="headerlink" title="äºŒã€ä¸šåŠ¡å±‚"></a>äºŒã€ä¸šåŠ¡å±‚</h4><p>è½¯ä»¶å¼€å‘è¿‡ç¨‹æˆ‘ä»¬å°±ä¸ç»†è¯´äº†ï¼Œç›´æ¥æ¥çœ‹æœ€é‡è¦çš„å‡ ä¸ªèŠ‚ç‚¹ï¼š</p><p>1.éœ€æ±‚è®¨è®ºé˜¶æ®µ<br>ä¸€å®šè¦æ˜ç¡®éœ€æ±‚ï¼Œ<strong>æµ‹è¯•ï¼Œå¼€å‘ï¼Œäº§å“ä¸‰æ–¹åŠ¡å¿…è¾¾æˆä¸€è‡´</strong>ã€‚å‰æœŸå¦‚æœå­˜åœ¨æ²¡æœ‰æ˜ç¡®çš„é—®é¢˜ï¼Œé‚£ä¹ˆåæœŸå°±ä¼šé€ æˆæ— æ•ˆè¿”å·¥å’Œä¸å¿…è¦çš„äº‰æ‰§ï¼Œè¿™åœ¨æ—¥å¸¸å¼€å‘å°¤ä¸ºå¸¸è§ã€‚</p><div class="alert success"><p>æ‰€ä»¥ï¼Œè½¯ä»¶å¼€å‘å‰æœŸï¼Œæˆ‘ä»¬éƒ½ä¼šè¿›è¡Œã€Œè¯„å®¡ï¼Œåè®²ï¼Œè¯„ä¼°ã€ä¸‰ä¸ªé˜¶æ®µã€‚</p></div><p>2.å¼€å‘å®Œæˆé˜¶æ®µ<br>å¼€å‘å®Œæˆåï¼Œç¨‹åºå‘˜é¦–å…ˆè¦å®Œæˆã€Œè‡ªæµ‹ã€ï¼Œä¹Ÿå°±æ˜¯è½¯ä»¶å¼€å‘ä¸­çš„ã€Œå†’çƒŸæµ‹è¯•ã€ï¼Œç¡®ä¿ä¸»æµç¨‹æ— è¯¯ã€‚å¦åˆ™ï¼Œåœ¨å¼€å‘å·¥ç¨‹å¸ˆæäº¤ä»£ç åï¼Œæµ‹è¯•å·¥ç¨‹å¸ˆæ­¥å±¥ç»´è‰°ï¼Œæ— æ³•æœ‰æ•ˆå¼€å±•æµ‹è¯•ï¼Œä¼šé€ æˆæå¤§çš„èµ„æºæµªè´¹ã€‚</p><p>æ›´è§„èŒƒçš„æµç¨‹éœ€è¦æµ‹è¯•å·¥ç¨‹å¸ˆåœ¨éœ€æ±‚æ˜ç¡®ä¹‹åå†™å‡ºã€Œæµ‹è¯•ç”¨ä¾‹ã€ï¼Œå¼€å‘å·¥ç¨‹å¸ˆåœ¨å®Œæˆå¼€å‘åï¼Œè‡ªè¡Œå¯¹ç…§ã€Œæµ‹è¯•ç”¨ä¾‹ã€å®Œæˆåˆæ­¥éªŒè¯ï¼Œä¹‹åå°±å¯ä»¥ä»£ç ææµ‹äº†ã€‚</p><p>è¿™ä¹ˆåšçš„å¥½å¤„å°±æ˜¯æ—¢ä¿è¯äº†ã€Œé«˜è´¨é‡çš„ä»£ç äº¤ä»˜ã€ï¼ŒåŒæ—¶å‡å°‘äº†æµ‹è¯•å·¥ç¨‹å¸ˆçš„å·¥ä½œé‡ï¼Œæˆ‘ä»¬ä½•ä¹è€Œä¸ä¸ºå‘¢ï¼Ÿ</p><p>3.ææµ‹<br>è‡ªæµ‹å’Œææµ‹æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Œä»è½¯ä»¶å¼€å‘è¿‡ç¨‹æ¥çœ‹ï¼Œå…¶å®å¼€å‘å·¥ç¨‹å¸ˆå’Œæµ‹è¯•å·¥ç¨‹å¸ˆå…¶å®å®Œæˆäº†ä¸åŒé˜¶æ®µçš„æµ‹è¯•ï¼š</p><p>å¼€å‘å·¥ç¨‹å¸ˆã€Œç™½ç›’æµ‹è¯•ã€ï¼š<br>æ˜¯æŒ‡å®é™…è¿è¡Œè¢«æµ‹ç¨‹åºï¼Œ<strong>é€šè¿‡ç¨‹åºçš„æºä»£ç è¿›è¡Œæµ‹è¯•è€Œä¸ä½¿ç”¨ç”¨æˆ·ç•Œé¢</strong>ã€‚è¿™ç§ç±»å‹çš„æµ‹è¯•éœ€è¦ä»ä»£ç å¥æ³•å‘ç°å†…éƒ¨ä»£ç åœ¨ç®—æ³•ã€æº¢å‡ºã€è·¯å¾„å’Œæ¡ä»¶ç­‰æ–¹é¢çš„ç¼ºç‚¹æˆ–è€…é”™è¯¯ï¼Œè¿›è€ŒåŠ ä»¥ä¿®æ­£ã€‚<br><div class="alert info"><p>ç™½ç›’æµ‹è¯•éœ€è¦ä»ä»£ç å¥æ³•å‘ç°å†…éƒ¨ä»£ç åœ¨ç®—æ³•ï¼Œæº¢å‡ºï¼Œè·¯å¾„ï¼Œæ¡ä»¶ç­‰ç­‰ä¸­çš„ç¼ºç‚¹æˆ–è€…é”™è¯¯ï¼Œè¿›è€ŒåŠ ä»¥ä¿®æ­£ã€‚</p></div></p><p>æµ‹è¯•å·¥ç¨‹å¸ˆå®é™…è¿›è¡Œçš„æ˜¯ã€Œé»‘ç›’æµ‹è¯•ã€ã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯ã€Œé»‘ç›’æµ‹è¯•ã€å‘¢ï¼Ÿ<br>é»‘ç›’æµ‹è¯•ä¹Ÿç§°åŠŸèƒ½æµ‹è¯•ï¼Œå®ƒæ˜¯é€šè¿‡æµ‹è¯•æ¥æ£€æµ‹æ¯ä¸ªåŠŸèƒ½æ˜¯å¦éƒ½èƒ½æ­£å¸¸ä½¿ç”¨ã€‚åœ¨æµ‹è¯•ä¸­ï¼ŒæŠŠç¨‹åºçœ‹ä½œä¸€ä¸ªä¸èƒ½æ‰“å¼€çš„é»‘ç›’å­ï¼Œ<strong>åœ¨å®Œå…¨ä¸è€ƒè™‘ç¨‹åºå†…éƒ¨ç»“æ„å’Œå†…éƒ¨ç‰¹æ€§çš„æƒ…å†µä¸‹ï¼Œåœ¨ç¨‹åºæ¥å£è¿›è¡Œæµ‹è¯•</strong>ã€‚</p><p>å®ƒåªæ£€æŸ¥ç¨‹åºåŠŸèƒ½æ˜¯å¦æŒ‰ç…§éœ€æ±‚è§„æ ¼è¯´æ˜ä¹¦çš„è§„å®šæ­£å¸¸ä½¿ç”¨ï¼Œç¨‹åºæ˜¯å¦èƒ½é€‚å½“åœ°æ¥æ”¶è¾“å…¥æ•°æ®è€Œäº§ç”Ÿæ­£ç¡®çš„è¾“å‡ºä¿¡æ¯ã€‚<strong>é»‘ç›’æµ‹è¯•ç€çœ¼äºç¨‹åºå¤–éƒ¨ç»“æ„ï¼Œä¸è€ƒè™‘å†…éƒ¨é€»è¾‘ç»“æ„ï¼Œä¸»è¦é’ˆå¯¹è½¯ä»¶ç•Œé¢å’Œè½¯ä»¶åŠŸèƒ½è¿›è¡Œæµ‹è¯•</strong>ã€‚</p><div class="alert warning"><p>é»‘ç›’æµ‹è¯•æ˜¯ä»¥ç”¨æˆ·çš„è§’åº¦ï¼Œä»è¾“å…¥æ•°æ®ä¸è¾“å‡ºæ•°æ®çš„å¯¹åº”å…³ç³»å‡ºå‘è¿›è¡Œæµ‹è¯•çš„ã€‚</p></div><p>å¾ˆæ˜æ˜¾ï¼Œå¦‚æœå¤–éƒ¨ç‰¹æ€§æœ¬èº«è®¾è®¡æœ‰é—®é¢˜æˆ–è§„æ ¼è¯´æ˜çš„è§„å®šæœ‰è¯¯ï¼Œç”¨é»‘ç›’æµ‹è¯•æ–¹æ³•æ˜¯å‘ç°ä¸äº†çš„ã€‚é»‘ç›’æµ‹è¯•æ³•æ³¨é‡äºæµ‹è¯•è½¯ä»¶çš„åŠŸèƒ½éœ€æ±‚ï¼Œä¸»è¦è¯•å›¾å‘ç°ä¸‹åˆ—å‡ ç±»é”™è¯¯ã€‚</p><ul><li>åŠŸèƒ½ä¸æ­£ç¡®æˆ–é—æ¼ï¼›</li><li>ç•Œé¢é”™è¯¯ï¼›</li><li>è¾“å…¥å’Œè¾“å‡ºé”™è¯¯ï¼›</li><li>æ•°æ®åº“è®¿é—®é”™è¯¯ï¼›</li><li>æ€§èƒ½é”™è¯¯ï¼›</li><li>åˆå§‹åŒ–å’Œç»ˆæ­¢é”™è¯¯ç­‰ï¼›</li></ul><p>æ›´å¤šç»†èŠ‚è¯·æŸ¥çœ‹æ–‡ç« ï¼š<a href="https://baike.baidu.com/item/é»‘ç›’æµ‹è¯•/934030?fr=aladdin" target="_blank" rel="noopener">é»‘ç›’æµ‹è¯•</a></p><h4 id="ä¸‰ã€ä»£ç å±‚"><a href="#ä¸‰ã€ä»£ç å±‚" class="headerlink" title="ä¸‰ã€ä»£ç å±‚"></a>ä¸‰ã€ä»£ç å±‚</h4><p>ä»£ç å±‚é¢ï¼Œæˆ‘ä»¬éœ€è¦ä»ä»¥ä¸‹å‡ æ–¹é¢æ¥è¯´èµ·ï¼š</p><p>1.<strong>Eslint è§„é¿ä½çº§è¯­æ³•é—®é¢˜</strong><br>è¿™ä¸ªæ˜¾è€Œæ˜“è§ï¼Œç¼–å†™ä»£ç è¿‡ç¨‹å‘ç°é—®é¢˜ï¼Œé¿å…å› ä¸ºç®€å•è¯­æ³•ï¼Œå¦‚ï¼šæ¼å†™äº†é€—å·ï¼Œå˜é‡åå†™é”™ï¼Œå¤§å°å†™é—®é¢˜ç­‰</p><p>2.<strong>è¾¹ç•Œå¤„ç†</strong><br>åšå¥½å®¹é”™ï¼Œå¿…è¦çš„åˆ¤ç©ºï¼Œè¿˜æœ‰å°±æ˜¯ä»£ç è¾¹ç•Œé—®é¢˜ã€‚å¤šæƒ³ä¸€æƒ³å¦‚æœæ•°ç»„ä¸å­˜åœ¨ï¼Œæˆ‘ä»¬å¦‚ä½•å¤„ç†ï¼Ÿå¦‚æœæ•°ç»„è¶Šç•Œï¼Œæˆ‘ä»¬å¦‚ä½•ä¿®å¤ï¼Ÿå¦‚æœæ•°æ®ç¼ºå¤±ï¼Œæˆ‘ä»¬å¦‚ä½•ä½¿é¡µé¢ä¸å´©æºƒï¼Ÿ</p><p>3.<strong>å•å…ƒæµ‹è¯•</strong><br>å¦‚æœæ—¶é—´å…è®¸ï¼Œæˆ‘ä»¬å¯ä»¥åšå¥½å•å…ƒæµ‹è¯•ï¼Œæ¯æ¬¡ç¼–è¯‘ä»£ç ï¼Œæˆ–è€…ææµ‹å‰å¯åŠ¨è„šæœ¬ï¼Œç¡®å®šæµ‹è¯•è„šæœ¬éƒ½è¦†ç›–åˆ°äº†æ ¸å¿ƒä»£ç ï¼Œå°½å¯èƒ½å‡å°‘ä»£ç å‡ºé”™ç‡ã€‚</p><p>4.<strong>ç§¯ç´¯</strong><br>ä¸ºä»€ä¹ˆè¯´è¦ç§¯ç´¯ï¼Œå…¶å®é“ç†å¾ˆç®€å•ã€‚éšç€å¼€å‘ç»éªŒçš„å¢é•¿ï¼Œä½ å¯èƒ½ä¼šç¢°åˆ°å¾ˆå¤šé—®é¢˜ï¼Œé‚£ä¹ˆå¦‚æœç»†å¿ƒç§¯ç´¯ï¼Œå…¶å®å¾ˆå¤šé”™è¯¯åœ¨ä¸çŸ¥ä¸è§‰ä¸­å°±è¢«å¤„ç†äº†ã€‚åä¹‹ï¼Œä½ ä¼šä¸æ–­çš„æ‰å…¥åŒä¸€ä¸ªå‘é‡Œï¼Œåœ¨è¿›å‘ä¸å‡ºå‘ä¸­è¿·å¤±è‡ªæˆ‘ã€‚é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•ç§¯ç´¯å‘¢ï¼Ÿ</p><p><strong>é¦–å…ˆ</strong>ï¼Œç¢°åˆ°è‡ªå·±ä¸ä¼šçš„é—®é¢˜ï¼Œå¦‚æœç¬¬ä¸€æ—¶é—´æ²¡æœ‰è§£å†³ï¼Œé€šè¿‡æŸ¥æ‰¾æˆ–è€…è¯·æ•™åˆ«äººè§£å†³äº†ï¼Œé‚£ä¹ˆä¸€å®šè¦ç”¨å°æœ¬æœ¬è®°ä¸‹æ¥ï¼Œæœ€å¥½ä½¿ç”¨äº‘ç¬”è®°ã€‚å¥½å¤„ä¸è¨€è‡ªæ˜ã€‚</p><p><strong>å…¶æ¬¡</strong>ï¼Œè¦ç§¯ç´¯è‡ªå·±çš„å‡½æ•°åº“ï¼Œæˆ‘ä»¬ç»å¸¸ç”¨åˆ°çš„ä¸€äº›æ–¹æ³•ï¼Œä¸å¦¨è‡ªå·±åšä¸€ä¸ªå°è£…ï¼Œä¸æ–­æ²‰æ·€ã€‚ä¹Ÿè®¸æœ‰ä¸€å¤©ï¼Œä½ ä¼šå‘ç°ï¼Œè‡ªå·±ä¸çŸ¥ä¸çŸ¥è§‰ä¸­å†™å‡ºäº†ä¸€ä¸ª Lodash å‡½æ•°åº“ã€‚</p><p><strong>æœ€å</strong>ï¼Œä½ å¯ä»¥ç§¯ç´¯ä¼˜ç§€çš„ä»£ç ç‰‡æ®µï¼Œå—¯ï¼Œã€Œæˆ‘ä»¬ä¸ç”Ÿäº§ä»£ç ï¼Œåªæ˜¯ä¼˜ç§€ä»£ç çš„æ¬è¿å·¥ã€ã€‚</p><p>5.å­¦ä¹ <br>ä¸€å¥è¯ï¼Œæ²¡æœ‰ä»€ä¹ˆæ¯”å­¦ä¹ ä¼˜ç§€å¼€æºä»£ç æ›´æœ‰è¶£çš„äº‹æƒ…äº†ã€‚<strong>é˜…è¯»ä¼˜ç§€æºç ï¼Œå­¦ä¹ ä½œè€…æ€æƒ³ï¼Œç«™åœ¨å·¨äººè‚©è†€ä¸Šï¼Œä½ æ‰èƒ½èµ°çš„æ›´è¿œï¼</strong></p><div class="alert success"><p>åšå¥½ä¸Šé¢è¿™äº›ï¼Œç›¸ä¿¡ä½ ä¸€å®šä¼šæ˜¯ä¸€ä½å‡ºè‰²çš„å·¥ç¨‹å¸ˆã€‚</p></div><h4 id="å››ã€æ€»ç»“"><a href="#å››ã€æ€»ç»“" class="headerlink" title="å››ã€æ€»ç»“"></a>å››ã€æ€»ç»“</h4><p>å¯¹äºè¿™ç±»å¼€æ”¾é—®é¢˜ä»è€…è§ä»ï¼Œæ™ºè€…è§æ™ºï¼Œæˆ‘ç›¸ä¿¡æ¯ä¸ªäººéƒ½ä¼šæœ‰è‡ªå·±çš„çœ‹æ³•ï¼Œä¹Ÿä¼šæœ‰è‡ªå·±ä¸€å¥—ç‹¬ç‰¹çš„æ–¹æ³•ã€‚<strong>ä¸ç®¡é»‘çŒ«ç™½çŒ«ï¼Œèƒ½æŠ“ä½è€é¼ çš„å°±æ˜¯å¥½çŒ«</strong>ã€‚å¯¹äºç¨‹åºå‘˜æ¥è¯´ï¼Œèƒ½å‡å°‘ Bug çš„æ–¹æ³•å°±æ˜¯å¥½æ–¹æ³•ã€‚</p><div class="alert info"><p>ç¨‹åºå‘˜ç¾¤ä½“æµä¼ ä¸€å¥è¯ï¼šä¸å†™ä»£ç å°±æœ‰æ²¡æœ‰ Bugã€‚</p></div><p>æˆ‘ä»¬ä¸èƒ½å› ä¸ºæ€•çŠ¯é”™è¯¯è€Œå‡å°‘å†™ä»£ç ï¼Œæ›´åº”è¯¥çŸ¥éš¾è€Œä¸Šï¼Œè¶ŠæŒ«è¶Šå‹‡ã€‚è¦çŸ¥é“æ—¥å¸¸å¼€å‘ä¸­ ã€ŒBug æ˜¯ä¸å¯é¿å…çš„ï¼Œåªèƒ½å‡å°‘ã€ã€‚</p><p>å½“ç„¶ï¼Œè¿™ä¸åº”è¯¥æˆä¸ºæˆ‘ä»¬å†™å‡º Bug æ¨è„±çš„ç†ç”±ã€‚ä¸æ–­è¶…è¶Šï¼Œæ–¹æ˜¯æ°¸æ’ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å‘¨ä¼šä¸Šå¤§å®¶æŠ›å‡ºäº†ä¸€ä¸ªé—®é¢˜ï¼Œç¨‹åºå‘˜å¦‚ä½•å‡å°‘å¼€å‘ä¸­çš„ Bugï¼Ÿå¾ˆæœ‰æ„æ€çš„ä¸€ä¸ªè¯é¢˜ï¼Œæœ¬ç¯‡æ–‡ç« æˆ‘ä»¬æ¥è¿›è¡Œæ¢è®¨ä¸æ€»ç»“ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="æŠ€æœ¯åšæ–‡" scheme="http://jartto.wang/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E6%96%87/"/>
    
    
      <category term="bug" scheme="http://jartto.wang/tags/bug/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ Electron5.0 æ„å»ºä½ çš„ React é¡¹ç›®</title>
    <link href="http://jartto.wang/2019/07/13/use-electron-5/"/>
    <id>http://jartto.wang/2019/07/13/use-electron-5/</id>
    <published>2019-07-13T05:51:17.000Z</published>
    <updated>2019-07-30T05:43:12.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘è¦ä½¿ç”¨ Electron æ¥æ„å»º React é¡¹ç›®ï¼Œçªç„¶å‘ç°ä¹‹å‰çš„ <a href="https://github.com/chenfengyanyu/my-web-accumulation/tree/master/electron-quick-start" target="_blank" rel="noopener">Demo</a> å·²ç»ä¸èƒ½æ­£å¸¸è¿è¡Œäº†ï¼Œæœ‰äº›æ„Ÿæ¦‚æŠ€æœ¯å‘å±•çš„è¿…çŒ›ã€‚<br><a id="more"></a><br>å¦‚æœä½ è¿˜ä¸äº†è§£ <code>Electron</code>ï¼Œå¯ä»¥çœ‹æˆ‘ä¹‹å‰çš„æ–‡ç« ï¼š<a href="http://jartto.wang/2018/01/03/first-exploration-electron/">åˆæ¢ Electron - ç†è®ºç¯‡</a>ï¼Œç†è®ºçŸ¥è¯†æ²¡æœ‰å˜ã€‚å¦‚æœä½ æƒ³äº†è§£ <code>Electron5.0</code> ç‰ˆæœ¬å¦‚ä½•æ„å»º <code>React</code> é¡¹ç›®ï¼Œä¸å¦¨ç»§ç»­çœ‹æœ¬æ–‡ã€‚</p><div class="alert danger"><p>éœ€è¦æ³¨æ„ï¼šç½‘ä¸Šæµä¼ çš„ 1.0 ç‰ˆæœ¬çš„é¡¹ç›®åº”è¯¥å·²ç»å¯åŠ¨ä¸äº†äº†ã€‚</p></div><h4 id="ä¸€ã€ä¸ºä»€ä¹ˆè¦å†™æ­¤æ–‡"><a href="#ä¸€ã€ä¸ºä»€ä¹ˆè¦å†™æ­¤æ–‡" class="headerlink" title="ä¸€ã€ä¸ºä»€ä¹ˆè¦å†™æ­¤æ–‡"></a>ä¸€ã€ä¸ºä»€ä¹ˆè¦å†™æ­¤æ–‡</h4><p>ä¹‹å‰ç ”ç©¶çš„æ—¶å€™ï¼Œ<code>Electron</code> è¿˜æ˜¯ <code>1.0</code> ç‰ˆæœ¬ï¼Œå› æ­¤å†™äº†ä¸€ç³»åˆ—çš„æ–‡ç« ã€‚</p><ul><li><a href="http://jartto.wang/2018/01/03/first-exploration-electron/">åˆæ¢ Electron - ç†è®ºç¯‡</a></li><li><a href="http://jartto.wang/2018/01/04/first-exploration-electron-2/">åˆæ¢ Electron - å‡åç¯‡</a></li><li><a href="http://jartto.wang/2018/01/14/first-exploration-electron-3/">åˆæ¢ Electron - å®è·µç¯‡1</a></li><li><a href="http://jartto.wang/2018/01/21/first-exploration-electron-4/">åˆæ¢ Electron - å®è·µç¯‡2</a></li></ul><p>ç»è¿‡æœ¬æ¬¡å°è¯•ï¼Œå‘ç° <code>5.0</code> ç‰ˆæœ¬æœ‰äº†æ›´å¤šçš„å˜åŒ–ï¼Œæ‰€ä»¥ä¸æƒ³è¯¯äººå­å¼Ÿï¼Œç´¢æ€§æ›´æ–°æ­¤ç³»åˆ—æ–‡ç« ã€‚</p><div class="alert info"><p>è¿™æ¬¡èµ·æ‰‹ï¼Œæˆ‘ä»¬å°±æ¥æ„å»ºä¸€ä¸ª React é¡¹ç›®ã€‚</p></div><h4 id="äºŒã€åˆ›å»º-React-é¡¹ç›®"><a href="#äºŒã€åˆ›å»º-React-é¡¹ç›®" class="headerlink" title="äºŒã€åˆ›å»º React é¡¹ç›®"></a>äºŒã€åˆ›å»º React é¡¹ç›®</h4><p>1.é¦–å…ˆï¼Œå…¨å±€å®‰è£… <code>cli</code>:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --global create-react-app</span><br></pre></td></tr></table></figure></p><p>2.åˆ›å»ºé¡¹ç›®<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create-react-app electron5-react-demo</span><br></pre></td></tr></table></figure></p><p>3.å¯åŠ¨<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> electron5-react-demo &amp;&amp; yarn start</span><br></pre></td></tr></table></figure></p><p>4.è®¿é—® <code>http://localhost:3000/</code> å¦‚æœçœ‹åˆ°å¦‚ä¸‹é¡µé¢ï¼Œè¯´æ˜ä½ çš„ <code>React</code> é¡¹ç›®å·²ç»æˆåŠŸå¯åŠ¨äº†ã€‚<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/electron/react.png" alt="react"></p><h4 id="ä¸‰ã€é›†æˆ-Electron-ç¯å¢ƒ"><a href="#ä¸‰ã€é›†æˆ-Electron-ç¯å¢ƒ" class="headerlink" title="ä¸‰ã€é›†æˆ Electron ç¯å¢ƒ"></a>ä¸‰ã€é›†æˆ Electron ç¯å¢ƒ</h4><p>1.é¦–å…ˆéœ€è¦å®‰è£… <code>Electron</code> å’Œ <code>Electron-builder</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add electron electron-builder --dev</span><br></pre></td></tr></table></figure></p><p>2.å¢åŠ ç›¸åº”å¼€å‘å·¥å…·<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn add wait-on concurrently --dev</span><br><span class="line">yarn add cross-env electron-is-dev</span><br></pre></td></tr></table></figure></p><p>3.é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶ï¼š<code>electron.js</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch public/electron.js</span><br></pre></td></tr></table></figure></p><p>æ­¤æ—¶é¡¹ç›®ç›®å½•å¦‚ä¸‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ main.js</span><br><span class="line">â”œâ”€â”€ node_modules</span><br><span class="line">â”œâ”€â”€ public</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ electron.js</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ favicon.ico</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ index.html</span><br><span class="line">â”‚Â Â  â””â”€â”€ manifest.json</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ App.css</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ App.js</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ App.test.js</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ index.css</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ index.js</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ logo.svg</span><br><span class="line">â”‚Â Â  â””â”€â”€ serviceWorker.js</span><br><span class="line">â””â”€â”€ yarn.lock</span><br></pre></td></tr></table></figure></p><p>4.ä¿®æ”¹ä»£ç ï¼Œå¯ä»¥å»<a href="https://github.com/electron/electron-quick-start/blob/master/main.js" target="_blank" rel="noopener">å®˜ç½‘</a>ä¸Šæ‹·è´ä¸€ä»½å†…å®¹ï¼Œå†™å…¥ <code>electron.js</code>ï¼Œå…·ä½“å¦‚ä¸‹ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Modules to control application life and create native browser window</span></span><br><span class="line"><span class="keyword">const</span> &#123;app, BrowserWindow&#125; = <span class="built_in">require</span>(<span class="string">'electron'</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line">+ <span class="keyword">const</span> isDev = <span class="built_in">require</span>(<span class="string">'electron-is-dev'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Keep a global reference of the window object, if you don't, the window will</span></span><br><span class="line"><span class="comment">// be closed automatically when the JavaScript object is garbage collected.</span></span><br><span class="line"><span class="keyword">let</span> mainWindow</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createWindow</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Create the browser window.</span></span><br><span class="line">  mainWindow = <span class="keyword">new</span> BrowserWindow(&#123;</span><br><span class="line">    width: <span class="number">800</span>,</span><br><span class="line">    height: <span class="number">600</span>,</span><br><span class="line">    webPreferences: &#123;</span><br><span class="line">      preload: path.join(__dirname, <span class="string">'preload.js'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">+  mainWindow.loadURL(</span><br><span class="line">+  isDev</span><br><span class="line">+  ? <span class="string">'http://localhost:3000'</span></span><br><span class="line">+  : <span class="string">`file://<span class="subst">$&#123;path.join(__dirname, <span class="string">"../build/index.html"</span>)&#125;</span>`</span></span><br><span class="line">+  );</span><br><span class="line">    </span><br><span class="line">  <span class="comment">// Open the DevTools.</span></span><br><span class="line">  <span class="comment">// mainWindow.webContents.openDevTools()</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Emitted when the window is closed.</span></span><br><span class="line">  mainWindow.on(<span class="string">'closed'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Dereference the window object, usually you would store windows</span></span><br><span class="line">    <span class="comment">// in an array if your app supports multi windows, this is the time</span></span><br><span class="line">    <span class="comment">// when you should delete the corresponding element.</span></span><br><span class="line">    mainWindow = <span class="literal">null</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This method will be called when Electron has finished</span></span><br><span class="line"><span class="comment">// initialization and is ready to create browser windows.</span></span><br><span class="line"><span class="comment">// Some APIs can only be used after this event occurs.</span></span><br><span class="line">app.on(<span class="string">'ready'</span>, createWindow)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Quit when all windows are closed.</span></span><br><span class="line">app.on(<span class="string">'window-all-closed'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// On macOS it is common for applications and their menu bar</span></span><br><span class="line">  <span class="comment">// to stay active until the user quits explicitly with Cmd + Q</span></span><br><span class="line">  <span class="keyword">if</span> (process.platform !== <span class="string">'darwin'</span>) app.quit()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.on(<span class="string">'activate'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// On macOS it's common to re-create a window in the app when the</span></span><br><span class="line">  <span class="comment">// dock icon is clicked and there are no other windows open.</span></span><br><span class="line">  <span class="keyword">if</span> (mainWindow === <span class="literal">null</span>) createWindow()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// In this file you can include the rest of your app's specific main process</span></span><br><span class="line"><span class="comment">// code. You can also put them in separate files and require them here.</span></span><br></pre></td></tr></table></figure></p><p>æ³¨æ„æˆ‘ä»¬åšäº†ä¸¤å¤„ä¿®æ”¹ï¼ˆåŠ å·ä½ç½®ï¼‰ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥ç¯å¢ƒå˜é‡ï¼š</span></span><br><span class="line"><span class="keyword">const</span> isDev = <span class="built_in">require</span>(<span class="string">'electron-is-dev'</span>);</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®å¯åŠ¨æ–‡ä»¶</span></span><br><span class="line">mainWindow.loadURL(</span><br><span class="line">  isDev</span><br><span class="line">  ? <span class="string">'http://localhost:3000'</span></span><br><span class="line">  : <span class="string">`file://<span class="subst">$&#123;path.join(__dirname, <span class="string">"../build/index.html"</span>)&#125;</span>`</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure></p><p>5.ä¿®æ”¹ <code>package.json</code> æ–‡ä»¶ï¼Œæ€»å…±ä¸¤å¤„ï¼š<br>å…¶ä¸€ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"name"</span>: <span class="string">"electron5-react-demo"</span>,</span><br><span class="line">    <span class="string">"version"</span>: <span class="string">"0.1.0"</span>,</span><br><span class="line">    <span class="string">"private"</span>: <span class="literal">true</span>,</span><br><span class="line">+    <span class="string">"main"</span>: <span class="string">"public/electron.js"</span>,</span><br><span class="line">+    <span class="string">"homepage"</span>: <span class="string">"./"</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å…¶äºŒï¼Œä¿®æ”¹å¯åŠ¨é¡¹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"react-start"</span>: <span class="string">"react-scripts start"</span>,</span><br><span class="line"><span class="string">"react-build"</span>: <span class="string">"react-scripts build"</span>,</span><br><span class="line"><span class="string">"electron-start"</span>: <span class="string">"electron ."</span>,</span><br><span class="line"><span class="string">"electron-build"</span>: <span class="string">"electron-builder"</span>,</span><br><span class="line"><span class="string">"release"</span>: <span class="string">"yarn react-build &amp;&amp; electron-builder --publish=always"</span>,</span><br><span class="line"><span class="string">"build"</span>: <span class="string">"yarn react-build &amp;&amp; yarn electron-build"</span>,</span><br><span class="line"><span class="string">"start"</span>: <span class="string">"concurrently \"cross-env BROWSER=none yarn react-start\" \"wait-on http://localhost:3000 &amp;&amp; electron .\""</span></span><br><span class="line"><span class="string">"test"</span>: <span class="string">"react-scripts test"</span>,</span><br><span class="line"><span class="string">"eject"</span>: <span class="string">"react-scripts eject"</span>,</span><br></pre></td></tr></table></figure></p><h4 id="å››ã€å¯åŠ¨"><a href="#å››ã€å¯åŠ¨" class="headerlink" title="å››ã€å¯åŠ¨"></a>å››ã€å¯åŠ¨</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn start</span><br></pre></td></tr></table></figure><p>çœ‹åˆ°å¦‚ä¸‹ç•Œé¢ï¼Œæ­å–œä½ ï¼Œå·²ç»æˆåŠŸå¯åŠ¨äº†ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/electron/electron.png" alt="Electron"></p><div class="alert info"><p>è¯•ç€ä¿®æ”¹ä¸€ä¸‹å§ï¼Œçƒ­ä¿®æ”¹ä¹Ÿå·²ç»ç”Ÿæ•ˆäº†ã€‚</p></div><h4 id="äº”ã€æ„å»º"><a href="#äº”ã€æ„å»º" class="headerlink" title="äº”ã€æ„å»º"></a>äº”ã€æ„å»º</h4><p>å¦‚æœä½ æƒ³æ„å»ºï¼Œå¯ä»¥ä½¿ç”¨<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn build</span><br></pre></td></tr></table></figure></p><div class="alert danger"><p>éœ€è¦æ³¨æ„ï¼šæ„å»ºä¼šåŒæ—¶æ„å»º React å’Œ Electron ä¸¤ä¸ªé¡¹ç›®ã€‚</p></div><p>æ„å»ºå®Œæˆåï¼Œé¡¹ç›®ç›®å½•ä¸­ä¼šå‡ºç°ä¸€ä¸ª <code>dist</code> ç›®å½•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ builder-effective-config.yaml</span><br><span class="line">â”œâ”€â”€ electron5-react-demo-0.1.0-mac.zip</span><br><span class="line">â”œâ”€â”€ electron5-react-demo-0.1.0.dmg</span><br><span class="line">â”œâ”€â”€ electron5-react-demo-0.1.0.dmg.blockmap</span><br><span class="line">â”œâ”€â”€ latest-mac.yml</span><br><span class="line">â””â”€â”€ mac</span><br><span class="line">    â””â”€â”€ electron5-react-demo.app</span><br></pre></td></tr></table></figure></p><p>ç›®å½•ä¸­çš„ <code>dmg</code> å°±æ˜¯ <code>Mac</code> ä¸Šé¢çš„å®‰è£…ç¨‹åºï¼ŒåŒå‡»å®‰è£…ï¼š<br><img src="https://raw.githubusercontent.com/chenfengyanyu/my-web-accumulation/master/images/electron/dmg.png" alt="dmg"></p><p>å®‰è£…ä¹‹åå»è¿è¡Œå§ï¼Œåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†æ•´ä¸ªé¡¹ç›®ã€‚</p><h4 id="å…­ã€å‚è€ƒ"><a href="#å…­ã€å‚è€ƒ" class="headerlink" title="å…­ã€å‚è€ƒ"></a>å…­ã€å‚è€ƒ</h4><ul><li><a href="https://electronjs.org/docs?q=react" target="_blank" rel="noopener">Electron æ–‡æ¡£</a></li><li><a href="https://github.com/electron/electron-api-demos" target="_blank" rel="noopener">API</a></li><li><a href="https://medium.com/@impaachu/how-to-build-a-react-based-electron-app-d0f27413f17f" target="_blank" rel="noopener">How to build a React based Electron app</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘è¦ä½¿ç”¨ Electron æ¥æ„å»º React é¡¹ç›®ï¼Œçªç„¶å‘ç°ä¹‹å‰çš„ &lt;a href=&quot;https://github.com/chenfengyanyu/my-web-accumulation/tree/master/electron-quick-start&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Demo&lt;/a&gt; å·²ç»ä¸èƒ½æ­£å¸¸è¿è¡Œäº†ï¼Œæœ‰äº›æ„Ÿæ¦‚æŠ€æœ¯å‘å±•çš„è¿…çŒ›ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="æŠ€æœ¯åšæ–‡" scheme="http://jartto.wang/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E6%96%87/"/>
    
    
      <category term="electron" scheme="http://jartto.wang/tags/electron/"/>
    
  </entry>
  
</feed>
